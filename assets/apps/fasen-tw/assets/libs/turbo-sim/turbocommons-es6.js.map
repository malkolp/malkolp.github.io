{"version":3,"sources":["webpack://org_turbocommons/webpack/bootstrap","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/utils/StringUtils.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/utils/ArrayUtils.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/utils/NumericUtils.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/utils/ObjectUtils.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/managers/ValidationManager.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/model/HashMapObject.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/managers/httpmanager/HTTPManagerBaseRequest.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/model/JavaPropertiesObject.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/managers/httpmanager/HTTPManagerGetRequest.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/utils/EncodingUtils.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/model/TableObject.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/index.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/managers/BrowserManager.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/managers/HTTPManager.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/managers/httpmanager/HTTPManagerPostRequest.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/managers/LocalizationManager.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/managers/ModelHistoryManager.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/managers/SerializationManager.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/model/BaseStrictClass.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/model/CSVObject.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/model/DateTimeObject.js","webpack://org_turbocommons/./target/turbocommons-ts-3.7.0/dist/es6/tmp/utils/ConversionUtils.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","NumericUtils_1","ArrayUtils_1","StringUtils","String","valueName","errorMessage","isString","Error","res","isEmpty","length","RegExp","test","string","emptyChars","replace","concat","search","replacement","count","ArrayUtils","isArray","NumericUtils","isInteger","result","searchArray","replacementArray","valueToReplace","resultArray","splittedArray","split","j","push","join","characters","trimLeft","trimRight","padLength","padString","substr","findMe","letterCase","FORMAT_ALL_UPPER_CASE","removeAccents","FORMAT_ALL_LOWER_CASE","wordSeparator","lines","getLines","words","path","formatPath","indexOf","limit","limiterString","isNumeric","substring","url","hostName","getHostNameFromUrl","shift","isUrl","tmp","document","createElement","href","dotsCount","host","match","filters","replacedFilters","elementsToRemove","separator","elements","arrayToRemove","position","extensionSeparator","element","getPathElement","lastIndexOf","undefined","format","FORMAT_START_CASE","map","toUpperCase","toLowerCase","FORMAT_FIRST_UPPER_REST_LOWER","charAt","slice","stringWords","trim","FORMAT_UPPER_CAMEL_CASE","FORMAT_LOWER_CAMEL_CASE","urlSeparator","this","getSchemeFromUrl","string1","string2","length1","length2","compareByLevenshtein","currentRow","prevRow","c1","c2","insertions","deletions","substitutions","Math","min","levenshtein","max","minLength","maxLength","charSet","finalCharSet","chars","firstChar","thirdChar","generateRandomInteger","floor","random","defaultDiacriticsRemovalMap","diacriticsMap","letters","b","a","FORMAT_SENTENCE_CASE","FORMAT_CAMEL_CASE","FORMAT_SNAKE_CASE","FORMAT_UPPER_SNAKE_CASE","FORMAT_LOWER_SNAKE_CASE","ObjectUtils_1","StringUtils_1","ValidationManager_1","toString","array1","array2","isEqualTo","ObjectUtils","isObject","array","str","caseSensitive","isStringFound","numElements","validationManager","ValidationManager","found","resultCount","removeDuplicateElements","isNaN","parseFloat","isFinite","Number","keys","object1","object2","keys1","getKeys","sort","keys2","destination","source","sourceKeys","merge","clone","constructor","_validationStatus","tag","status","OK","_failedMessages","tags","maxStatus","tagsList","getStatus","message","isWarning","_updateValidationStatus","value2","tagFound","ERROR","WARNING","HashMapObject","data","_keys","_data","_length","set","dataCount","index","_validateKeyFormat","newKey","isKey","key1","key2","key1Value","key2Value","key1Index","key2Index","method","SORT_METHOD_STRING","order","SORT_ORDER_ASCENDING","SORT_ORDER_DESCENDING","reverse","SORT_METHOD_NUMERIC","pop","HTTPManagerBaseRequest","resultFormat","timeout","STRING","ignoreGlobalPostParams","successCallback","errorCallback","finallyCallback","JSON","HashMapObject_1","EncodingUtils_1","JavaPropertiesObject","super","isWaitingOtherLine","line","EncodingUtils","unicodeEscapedCharsToUtf8","tmpLine","keyDividerIndex","e","properties","strictOrder","objectToCompare","thisKeys","keysToCompare","keysCount","utf8ToUnicodeEscapedChars","HTTPManagerBaseRequest_1","HTTPManagerGetRequest","arguments","parameters","_match","grp","fromCharCode","parseInt","ch","charCodeAt","TableObject","rows","columns","_columnsCount","_rowsCount","setColumnNames","_columnNames","_cells","column","columnIndex","_validateColumnIndex","names","hasDuplicateElements","namesCount","getCell","number","at","rename","rowAndCol","colIndex","setCell","remove","row","_validateRowIndex","rowIndex","columnNames","getValues","columnNamesKeys","columnNamesCount","BrowserManager_1","BrowserManager","HTTPManager_1","HTTPManager","HTTPManagerGetRequest_1","HTTPManagerPostRequest_1","HTTPManagerPostRequest","LocalizationManager_1","LocalizationManager","ModelHistoryManager_1","ModelHistoryManager","SerializationManager_1","SerializationManager","BaseStrictClass_1","BaseStrictClass","CSVObject_1","CSVObject","DateTimeObject_1","DateTimeObject","JavaPropertiesObject_1","TableObject_1","ConversionUtils_1","ConversionUtils","window","location","readyState","getCookie","expires","domain","secure","days","Date","setDate","getDate","encodeURIComponent","toUTCString","cookie","cookies","pluses","parts","part","decodeURIComponent","setCookie","reload","language","navigator","newWindow","postData","open","form","action","style","display","target","props","getOwnPropertyNames","input","type","appendChild","body","submit","removeChild","history","pushState","URL","addEventListener","_onPopStatePreventBackButton","removeEventListener","pageXOffset","pageYOffset","innerWidth","documentElement","clientWidth","getElementsByTagName","innerHeight","clientHeight","scrollWidth","offsetWidth","scrollHeight","offsetHeight","duration","callback","easingFunction","startX","startY","startTime","performance","now","getTime","documentWidth","getDocumentWidth","documentHeight","getDocumentHeight","windowWidth","getWindowWidth","windowHeight","getWindowHeight","destinationValueX","offsetLeft","destinationValueY","offsetTop","destinationX","destinationY","round","scroll","animate","time","x","ceil","y","requestAnimationFrame","asynchronous","baseUrl","isOnlyHttps","internetCheckLocations","_queues","_globalPostParams","parameterName","isGlobalPostParam","getGlobalPostParam","queue","isRunning","pendingRequests","splice","keyValuePairs","values","stringify","yesCallback","noCallback","recursiveUrlTest","urls","urlExists","generateRandom","onLine","composedUrl","_composeUrl","request","execute","xmlHttprequest","XMLHttpRequest","onload","getAllResponseHeaders","onerror","statusText","ontimeout","ERROR_TIMEOUT","_executeXmlHttprequestSend","requests","finishedCallback","progressCallback","requestsList","_generateValidRequestsList","Function","finishedCount","finishedAnyError","finishedResults","processFinishedRequest","requestWithIndex","response","isError","errorMsg","code","formattedResponse","parse","requestType","responseText","postParamsToSend","globalPostParam","setRequestHeader","send","generateUrlQueryString","requestItem","queueName","unshift","dummyRequest","isQueueRunning","_startQueue","runRequests","urlToListOfResources","results","_anyError","resourcesFullUrls","resourcesList","resource","resultsData","relativeUrl","missingKeyFormat","wildCardsFormat","isBundleMandatory","_initialized","_locales","_languages","_activeBundle","_activeLocation","_definedLocations","_loadedTranslations","_filesManager","_httpManager","locale","locationsLoader","locales","locations","label","bundles","_loadData","errors","pathsToLoad","pathsToLoadInfo","bundle","locationFound","definedLocation","_loadDataFromUrls","processWhenDone","errorCode","bundleFormat","getPathExtension","parseJson","parseProperties","completedUrl","totalRequests","isLocaleLoaded","setPrimaryLocale","languages","setPrimaryLanguage","toReplace","setActiveBundle","replacements","formatCase","jsonString","propertiesString","javaPropertiesObject","instance","maxSnapshots","_snapshots","_currentState","_initialState","snapshot","state","firstSnapshot","tagsFilter","latestSnapshot","undo","isUndoPossible","strictMode","classInstance","javaProperties","objectToClass","objectKeys","classInstanceName","classInstanceKeys","typeErrorMessage","defaultElement","isDefaultElementAClass","headers","delimiter","enclosure","_hasHeaders","currentColumn","enclosureFound","fieldValue","stringLen","character","_insertField","_findNextDelimiterIndex","_defineHeaders","countCells","csv","thisRows","countRows","thisColumns","countColumns","getColumnNames","thisCell","cellToCompare","columnValue","_escapeField","rowsCount","columnsCount","cell","field","currentIndex","char","getRow","duplicateColumnNames","getDuplicateElements","columnName","duplicateColumnName","removeRow","dateTimeString","_dateTimeString","_dateTimeStringExploded","_explodeISO8601String","toISOString","dateTime","regex","parsedDate","testDate","getMonth","getFullYear","dateTime1","dateTime2","compare","month","day","getHours","getMinutes","getSeconds","getMilliseconds","getTimezoneOffset","isValidDateTime","setUTC","date1","date2","sortedDates","getMicroSecond","getTimeZoneOffset","formatString","exploded","pad","splitted","splittedCount","chr1","chr2","chr3","enc1","enc2","enc3","enc4","keyStr","output","utftext","utf8Encode","c3","utf8Decode"],"mappings":"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CACC,EAAK,KACL,EAAK,KACN,CACC,EAAK,KACL,EAAK,KACN,CACC,EAAK,IACL,EAAK,YACN,CACC,EAAK,IACL,EAAK,oBACN,CACC,EAAK,KACL,EAAK,KACN,CACC,EAAK,KACL,EAAK,KACN,CACC,EAAK,IACL,EAAK,+CACN,CACC,EAAK,KACL,EAAK,KACN,CACC,EAAK,KACL,EAAK,KACN,CACC,EAAK,KACL,EAAK,KACN,CACC,EAAK,KACL,EAAK,MACN,CACC,EAAK,KACL,EAAK,MACN,CACC,EAAK,IACL,EAAK,cACN,CACC,EAAK,IACL,EAAK,UACN,CACC,EAAK,IACL,EAAK,qBACN,CACC,EAAK,IACL,EAAK,qBACN,CACC,EAAK,IACL,EAAK,mBACN,CACC,EAAK,KACL,EAAK,KACN,CACC,EAAK,IACL,EAAK,sCACN,CACC,EAAK,IACL,EAAK,YACN,CACC,EAAK,KACL,EAAK,KACN,CACC,EAAK,IACL,EAAK,cACN,CACC,EAAK,IACL,EAAK,SACN,CACC,EAAK,IACL,EAAK,mBACN,CACC,EAAK,IACL,EAAK,kBACN,CACC,EAAK,IACL,EAAK,uCACN,CACC,EAAK,KACL,EAAK,KACN,CACC,EAAK,KACL,EAAK,OACN,CACC,EAAK,KACL,EAAK,KACN,CACC,EAAK,KACL,EAAK,KACN,CACC,EAAK,KACL,EAAK,MACN,CACC,EAAK,KACL,EAAK,KACN,CACC,EAAK,IACL,EAAK,aACN,CACC,EAAK,IACL,EAAK,iBACN,CACC,EAAK,IACL,EAAK,kBACN,CACC,EAAK,KACL,EAAK,MACN,CACC,EAAK,IACL,EAAK,mCACN,CACC,EAAK,IACL,EAAK,UACN,CACC,EAAK,IACL,EAAK,mBACN,CACC,EAAK,IACL,EAAK,mBACN,CACC,EAAK,KACL,EAAK,KACN,CACC,EAAK,IACL,EAAK,wBACN,CACC,EAAK,IACL,EAAK,UACN,CACC,EAAK,IACL,EAAK,kBACN,CACC,EAAK,IACL,EAAK,uBACN,CACC,EAAK,KACL,EAAK,KACN,CACC,EAAK,IACL,EAAK,YACN,CACC,EAA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","file":"turbocommons-es6.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst NumericUtils_1 = require(\"./NumericUtils\");\r\nconst ArrayUtils_1 = require(\"./ArrayUtils\");\r\n/**\r\n * The most common string processing and modification utilities\r\n */\r\nclass StringUtils {\r\n    /**\r\n     * Tells if the given value is a string or not\r\n     *\r\n     * @param value A value to check\r\n     *\r\n     * @returns true if the given value is a string, false otherwise\r\n     */\r\n    static isString(value) {\r\n        return (typeof value === 'string' || value instanceof String);\r\n    }\r\n    /**\r\n     * Strictly check that the provided value is a string or throw an exception\r\n     *\r\n     * @param value A value to check\r\n     * @param valueName The name of the value to be shown at the beginning of the exception message\r\n     * @param errorMessage The rest of the exception message\r\n     *\r\n     * @throws Error If the check fails\r\n     *\r\n     * @return void\r\n     */\r\n    static forceString(value, valueName = '', errorMessage = 'must be a string') {\r\n        if (!StringUtils.isString(value)) {\r\n            throw new Error(valueName + ' ' + errorMessage);\r\n        }\r\n    }\r\n    /**\r\n     * Tells if the given string is a valid url or not\r\n     *\r\n     * @param value The value to check\r\n     *\r\n     * @return False in case the validation fails or true if validation succeeds.\r\n     */\r\n    static isUrl(value) {\r\n        var res = false;\r\n        if (!StringUtils.isEmpty(value) && StringUtils.isString(value)) {\r\n            // This amazingly good solution's been found at http://stackoverflow.com/questions/3809401/what-is-a-good-regular-expression-to-match-a-url\r\n            var urlRegex = '^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\\\S+(?::\\\\S*)?@)?(?:(?:(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}(?:\\\\.(?:[0-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))|(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]+-?)*[a-z\\\\u00a1-\\\\uffff0-9]+)(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]+-?)*[a-z\\\\u00a1-\\\\uffff0-9]+)*(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,})))|localhost)(?::\\\\d{2,5})?(?:(/|\\\\?|#)[^\\\\s]*)?$';\r\n            res = !(value.length < 2083 && (new RegExp(urlRegex, 'i')).test(value)) ? false : true;\r\n        }\r\n        return res;\r\n    }\r\n    /**\r\n     * Tells if a specified string is semantically empty, which applies to any string that is comprised of empty spaces, new line characters, tabulations or any other\r\n     * characters without a visually semantic value to the user.\r\n     *\r\n     * Example1: Following strings are considered as empty: \"     \", \"\", \"    \\n\\n\\n\", \"    \\t\\t\\n\"\r\n     * Example2: Following strings are not considered as empty: \"hello\", \"   a\", \"    \\n\\nB\"\r\n     *\r\n     * @param string The text to check\r\n     * @param emptyChars Custom list of strings that will be also considered as empty characters. For example, we can define 'NULL' and '_' as empty string values by setting this to ['NULL', '_']\r\n     *\r\n     * @return false if the string is not empty, true if the string contains non semantically valuable characters or any other characters defined as \"empty\" values\r\n     */\r\n    static isEmpty(string, emptyChars = []) {\r\n        // Throw exception if non string value was received\r\n        if (!StringUtils.isString(string)) {\r\n            // Empty or null value is considered empty\r\n            if (string == null || string == '') {\r\n                return true;\r\n            }\r\n            throw new Error(\"value is not a string\");\r\n        }\r\n        return StringUtils.replace(string, emptyChars.concat([' ', \"\\n\", \"\\r\", \"\\t\"]), '') === '';\r\n    }\r\n    /**\r\n     * Strictly check that the provided value is a non empty string or throw an exception\r\n     *\r\n     * Uses the same criteria as the StringUtils.isEmpty() method\r\n     *\r\n     * @param value A value to check\r\n     * @param valueName The name of the value to be shown at the beginning of the exception message\r\n     * @param errorMessage The rest of the exception message\r\n     *\r\n     * @throws Error If the check fails\r\n     *\r\n     * @return void\r\n     */\r\n    static forceNonEmptyString(value, valueName = '', errorMessage = 'must be a non empty string') {\r\n        if (!StringUtils.isString(value) || StringUtils.isEmpty(value)) {\r\n            throw new Error(valueName + ' ' + errorMessage);\r\n        }\r\n    }\r\n    static isCamelCase() {\r\n        // TODO - translate from php\r\n    }\r\n    static isSnakeCase() {\r\n        // TODO - translate from php\r\n    }\r\n    /**\r\n     * Replace all occurrences of the search string with the replacement string\r\n     *\r\n     * @param string The string or array being searched and replaced on, otherwise known as the haystack.\r\n     * @param search The value being searched for, otherwise known as the needle. An array may be used to designate multiple needles\r\n     *        (if we use an array, the order of replacement will be the same of the array: First element will be the first one to be replaced,\r\n     *         second element the second, etc..)\r\n     * @param replacement The value being searched for, otherwise known as the needle. An array may be used to designate multiple needles.\r\n     * @param count [optional] If passed and > 0, this will define the maximum number of replacements to perform\r\n     *\r\n     * @returns The string with all the replaced values\r\n     */\r\n    static replace(string, search, replacement, count = -1) {\r\n        if (!StringUtils.isString(string)) {\r\n            throw new Error(\"string is not valid\");\r\n        }\r\n        if (!StringUtils.isString(search) && !ArrayUtils_1.ArrayUtils.isArray(search)) {\r\n            throw new Error(\"search is not a string or array\");\r\n        }\r\n        if (!StringUtils.isString(replacement) && !ArrayUtils_1.ArrayUtils.isArray(replacement)) {\r\n            throw new Error(\"replacement is not a string or array\");\r\n        }\r\n        if (!NumericUtils_1.NumericUtils.isInteger(count) || count === 0) {\r\n            throw new Error(\"count must be a positive integer\");\r\n        }\r\n        let result = string;\r\n        let searchArray = StringUtils.isString(search) ? [String(search)] : search;\r\n        let replacementArray = StringUtils.isString(replacement) ? [String(replacement)] : replacement;\r\n        if (replacementArray.length > 1 && searchArray.length !== replacementArray.length) {\r\n            throw new Error(\"search and replacement arrays must have the same length\");\r\n        }\r\n        for (let i = 0; i < searchArray.length; i++) {\r\n            if (searchArray[i] !== '') {\r\n                let valueToReplace = (replacementArray.length === 1) ? replacementArray[0] : replacementArray[i];\r\n                if (valueToReplace === undefined || valueToReplace === null) {\r\n                    valueToReplace = '';\r\n                }\r\n                let resultArray = [];\r\n                let splittedArray = result.split(searchArray[i]);\r\n                for (let j = 0; j < splittedArray.length; j++) {\r\n                    resultArray.push(splittedArray[j]);\r\n                    if (j < splittedArray.length - 1) {\r\n                        if (count < 0 || j < count) {\r\n                            resultArray.push(valueToReplace);\r\n                        }\r\n                        else {\r\n                            resultArray.push(searchArray[i]);\r\n                        }\r\n                    }\r\n                }\r\n                result = resultArray.join('');\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Remove whitespaces (or any custom set of characters) from both sides of a string\r\n     *\r\n     * @param string A string to process\r\n     *\r\n     * @param characters A set of characters that will be trimmed from both string sides. By default,\r\n     * empty space and new line characters are defined : \" \\n\\r\"\r\n     *\r\n     * @example: StringUtils.trim(\"abcXXabc\", \"abc\") outputs \"XX\"\r\n     *\r\n     * @returns The trimmed string\r\n     */\r\n    static trim(string, characters = \" \\n\\r\") {\r\n        return StringUtils.trimLeft(StringUtils.trimRight(string, characters), characters);\r\n    }\r\n    /**\r\n     * Remove whitespaces (or any custom set of characters) from a string left side\r\n     *\r\n     * @param string A string to process\r\n     * @param characters A set of characters that will be trimmed from string left side. By default,\r\n     *        empty space and new line characters are defined : \" \\n\\r\"\r\n     *\r\n     * @example: StringUtils.trimLeft(\"abcXXabc\", \"abc\") outputs \"XXabc\"\r\n     *\r\n     * @returns The trimmed string\r\n     */\r\n    static trimLeft(string, characters = \" \\n\\r\") {\r\n        if (!StringUtils.isString(string)) {\r\n            throw new Error('value is not a string');\r\n        }\r\n        return string.replace(new RegExp(\"^[\" + characters + \"]+\"), \"\");\r\n    }\r\n    /**\r\n     * Remove whitespaces (or any custom set of characters) from a string right side\r\n     *\r\n     * @param string A string to process\r\n     *\r\n     * @param characters A set of characters that will be trimmed from string right side. By default,\r\n     * empty space and new line characters are defined : \" \\n\\r\"\r\n     *\r\n     * @example: StringUtils.trimRight(\"abcXXabc\", \"abc\") outputs \"abcXX\"\r\n     *\r\n     * @returns The trimmed string\r\n     */\r\n    static trimRight(string, characters = \" \\n\\r\") {\r\n        if (!StringUtils.isString(string)) {\r\n            throw new Error('value is not a string');\r\n        }\r\n        return string.replace(new RegExp(\"[\" + characters + \"]+$\"), \"\");\r\n    }\r\n    /**\r\n     * Pad a string to a certain length with another string\r\n     *\r\n     * @param string The string to which we want to fill the empty spaces\r\n     * @param padLength The minimum length that we want for the resulting string to have\r\n     * @param padString The character or characters which we want to add to the string to match the target length\r\n     * @param mode LEFT to append the padString to the left of the string, RIGHT to append the padString to the right of the string\r\n     *\r\n     * @returns The padded string\r\n     */\r\n    static pad(string, padLength, padString = '0', mode = 'LEFT') {\r\n        if (!StringUtils.isString(string) || !StringUtils.isString(padString) || padString.length <= 0) {\r\n            throw new Error('string and padString must be strings');\r\n        }\r\n        if (!NumericUtils_1.NumericUtils.isInteger(padLength)) {\r\n            throw new Error('padLength is not an int');\r\n        }\r\n        if (mode !== 'LEFT' && mode !== 'RIGHT') {\r\n            throw new Error('mode must be LEFT or RIGHT');\r\n        }\r\n        let result = string;\r\n        if (mode === 'RIGHT') {\r\n            while (result.length < padLength) {\r\n                result = result + padString.substr(0, padLength - result.length);\r\n            }\r\n        }\r\n        else {\r\n            while (result.length < padLength) {\r\n                result = padString.substr(-(padLength - result.length)) + result;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Count the number of times a string is found inside another string\r\n     *\r\n     * @param string The string where we want to search\r\n     * @param findMe The string that we want to look for\r\n     *\r\n     * @returns The number of times that findMe appears on string\r\n     */\r\n    static countStringOccurences(string, findMe) {\r\n        if (!StringUtils.isString(string) || !StringUtils.isString(findMe)) {\r\n            throw new Error('value is not a string');\r\n        }\r\n        if (findMe === '') {\r\n            throw new Error('cannot count empty string occurences');\r\n        }\r\n        return string.split(findMe).length - 1;\r\n    }\r\n    /**\r\n     * Count the number of characters that match the given letter case on the given string\r\n     *\r\n     * @param string The string which case matching characters will be counted\r\n     * @param letterCase Defines which letter case are we looking for: StringUtils.FORMAT_ALL_UPPER_CASE or\r\n     *        StringUtils.FORMAT_ALL_LOWER_CASE\r\n     *\r\n     * @return The number of characters with the specified letter case that are present on the string\r\n     */\r\n    static countByCase(string, letterCase = StringUtils.FORMAT_ALL_UPPER_CASE) {\r\n        string = StringUtils.removeAccents(string);\r\n        if (letterCase === StringUtils.FORMAT_ALL_UPPER_CASE) {\r\n            return string.replace(/[^A-Z]+/g, '').length;\r\n        }\r\n        if (letterCase === StringUtils.FORMAT_ALL_LOWER_CASE) {\r\n            return string.replace(/[^a-z]+/g, '').length;\r\n        }\r\n        throw new Error('invalid case value');\r\n    }\r\n    /**\r\n     * Count the number of words that exist on the given string\r\n     *\r\n     * @param string The string which words will be counted\r\n     * @param wordSeparator ' ' by default. The character that is considered as the word sepparator\r\n     *\r\n     * @returns The number of words (elements divided by the wordSeparator value) that are present on the string\r\n     */\r\n    static countWords(string, wordSeparator = ' ') {\r\n        var count = 0;\r\n        var lines = StringUtils.getLines(string);\r\n        for (var i = 0; i < lines.length; i++) {\r\n            var words = lines[i].split(wordSeparator);\r\n            for (var j = 0; j < words.length; j++) {\r\n                if (!StringUtils.isEmpty(words[j])) {\r\n                    count++;\r\n                }\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n    /**\r\n     * Given a string with a list of elements separated by '/' or '\\' that represent some arbitrary path structure,\r\n     * this method will return the number of elements that are listed on the path.\r\n     *\r\n     * @example \"c:\\\\\" -> results in 1\r\n     *          \"//folder/folder2/folder3/file.txt\" -> results in 4\r\n     *\r\n     * @param path A string containing some arbitrary path.\r\n     *\r\n     * @return The number of elements that are listed on the provided path\r\n     */\r\n    static countPathElements(path) {\r\n        path = StringUtils.formatPath(path, '/');\r\n        path = (path.indexOf('/') === 0) ? path.substr(1) : path;\r\n        return path == '' ? 0 : path.split('/').length;\r\n    }\r\n    /**\r\n     * Method that limits the length of a string and optionally appends informative characters like ' ...'\r\n     * to inform that the original string was longer.\r\n     *\r\n     * @param string String to limit\r\n     * @param limit Max number of characters\r\n     * @param limiterString If the specified text exceeds the specified limit, the value of this parameter will be added to the end of the result. The value is ' ...' by default.\r\n     *\r\n     * @returns The specified string but limited in length if necessary. Final result will never exceed the specified limit, also with the limiterString appended.\r\n     */\r\n    static limitLen(string, limit = 100, limiterString = ' ...') {\r\n        if (limit <= 0 || !NumericUtils_1.NumericUtils.isNumeric(limit)) {\r\n            throw new Error('limit must be a positive numeric value');\r\n        }\r\n        if (!StringUtils.isString(string)) {\r\n            return '';\r\n        }\r\n        if (string.length <= limit) {\r\n            return string;\r\n        }\r\n        if (limiterString.length > limit) {\r\n            return limiterString.substring(0, limit);\r\n        }\r\n        else {\r\n            return string.substring(0, limit - limiterString.length) + limiterString;\r\n        }\r\n    }\r\n    /**\r\n     * Extracts the domain name from a given url (excluding subdomain).\r\n     * For example: http://subdomain.google.com/test/ will result in 'google.com'\r\n     *\r\n     * @param url A string containing an URL\r\n     *\r\n     * @returns The domain from the given string (excluding the subdomain if exists)\r\n     */\r\n    static getDomainFromUrl(url) {\r\n        var hostName = StringUtils.getHostNameFromUrl(url);\r\n        hostName = hostName.split('.');\r\n        if (hostName.length > 2) {\r\n            hostName.shift();\r\n        }\r\n        return hostName.join('.');\r\n    }\r\n    /**\r\n     * Extracts the hostname (domain + subdomain) from a given url.\r\n     * For example: http://subdomain.google.com/test/ will result in 'subdomain.google.com'\r\n     *\r\n     * @param url A string containing an URL\r\n     *\r\n     * @returns The domain and subdomain from the given string (subdomain.domain.com)\r\n     */\r\n    static getHostNameFromUrl(url) {\r\n        if (StringUtils.isEmpty(url) || !StringUtils.isUrl(url)) {\r\n            return '';\r\n        }\r\n        // TODO - This should be improved by avoiding the use of an anchor element,\r\n        // cause it will only work on browsers and Explorer / Edge generate wrong results\r\n        var tmp = document.createElement('a');\r\n        tmp.href = url;\r\n        // Validate domain contains a valid number of dots\r\n        var dotsCount = (tmp.host.match(/\\./g) || []).length;\r\n        if (dotsCount <= 0 || dotsCount > 2) {\r\n            return '';\r\n        }\r\n        return tmp.host;\r\n    }\r\n    /**\r\n     * Extracts all the lines from the given string and outputs an array with each line as an element.\r\n     * It does not matter which line separator's been used (\\n, \\r, Windows, linux...). All source lines will be correctly extracted.\r\n     *\r\n     * @param string Text containing one or more lines that will be converted to an array with each line on a different element.\r\n     * @param filters One or more regular expressions that will be used to filter unwanted lines. Lines that match any of the\r\n     *  filters will be excluded from the result. By default, all empty lines are ignored (those containing only newline, blank, tabulators, etc..).\r\n     *\r\n     * @returns A list with all the string lines sepparated as different array elements.\r\n     */\r\n    static getLines(string, filters = [/\\s+/g]) {\r\n        var res = [];\r\n        // Validate we are receiving a string\r\n        if (!StringUtils.isString(string)) {\r\n            return res;\r\n        }\r\n        var tmp = string.split(/\\r?\\n|\\n|\\r/);\r\n        for (var i = 0; i < tmp.length; i++) {\r\n            // Apply specified filters\r\n            if (StringUtils.isString(tmp[i])) {\r\n                let replacedFilters = tmp[i];\r\n                for (var j = 0; j < filters.length; j++) {\r\n                    replacedFilters = replacedFilters.replace(filters[j], '');\r\n                }\r\n                if (replacedFilters != '') {\r\n                    res.push(tmp[i]);\r\n                }\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n    static getKeyWords() {\r\n        // TODO: translate from php\r\n    }\r\n    /**\r\n     * Given a string with a list of elements separated by '/' or '\\' that represent some arbitrary path structure,\r\n     * this method will format the specified path and remove the number of requested path elements (from its right\r\n     * side) and return the path without that elements.\r\n     *\r\n     * This method can be used with Operating system file paths, urls, or any other string that uses the 'slash separated'\r\n     * format to encode a path.\r\n     *\r\n     * @example \"//folder/folder2/folder3/file.txt\" -> results in \"/folder/folder2/folder3\" if elementsToRemove = 1<br>\r\n     *          \"//folder/folder2\\folder3\\file.txt\" -> results in \"/folder/folder2\" if elementsToRemove = 2\r\n     *\r\n     * @see StringUtils.formatPath\r\n     *\r\n     * @param path A string containing some arbitrary path.\r\n     * @param elementsToRemove (one by default) The number of elements that we want to remove from the right side of the path.\r\n     * @param separator The character to use as the element divider for the returned path. Only slash '/' or backslash '\\' are allowed.\r\n     *\r\n     * @return The received path without the specified number of elements and correctly formatted\r\n     */\r\n    static getPath(path, elementsToRemove = 1, separator = '/') {\r\n        if (StringUtils.isEmpty(path)) {\r\n            return '';\r\n        }\r\n        path = StringUtils.formatPath(path, '/');\r\n        if (path === '/') {\r\n            return path;\r\n        }\r\n        let processedPath = (path.indexOf('/') === 0) ? path.substr(1) : path;\r\n        let elements = processedPath.split('/');\r\n        if (elementsToRemove > elements.length || elementsToRemove < -1) {\r\n            return '';\r\n        }\r\n        let arrayToRemove = [];\r\n        for (let i = elements.length - elementsToRemove; i < elements.length; i++) {\r\n            arrayToRemove.push(elements[i]);\r\n        }\r\n        if (arrayToRemove.length <= 0) {\r\n            return path;\r\n        }\r\n        return StringUtils.formatPath(path.substring(0, path.length - arrayToRemove.join('/').length - 1), separator);\r\n    }\r\n    /**\r\n     * Given a string with a list of elements separated by '/' or '\\' that represent some arbitrary path structure,\r\n     * this method will return the element that is located at the requested position. If no position is defined,\r\n     * by default the last element of the path will be returned (the most to the right one).\r\n     *\r\n     * This method can be used with Operating system file paths, urls, or any other string that uses the 'slash separated'\r\n     * format to encode a path.\r\n     *\r\n     * @example \"//folder/folder2/folder3/file.txt\" -> results in \"file.txt\" if (-1) position is defined<br>\r\n     *          \"//folder/folder2\\folder3\\file.txt\" -> results in \"folder\" if position 0 is defined<br>\r\n     *          \"//folder/folder2\\folder3\\file.txt\" -> results in \"folder3\" if position 2 is defined<br>\r\n     *          \"//folder/folder2\\folder3\\file.txt\" -> results in \"folder3\" if position -2 is defined<br>\r\n     *          \"//folder/folder2\\folder3\\file.txt\" -> results in \"folder2\" if position -3 is defined\r\n     *\r\n     * @param path A string containing some arbitrary path.\r\n     * @param position The index for the element that we want to extract from the path. Positive values will get path elements\r\n     *        starting from the left side, being 0 the first most to the left one. Negative values will get path elements starting from\r\n     *        the right side, being -1 the last path element (or the first most to the right one).\r\n     *        If not specified, the last one will be returned.\r\n     *\r\n     * @return The element at the specified path position or the last one if no position is defined\r\n     */\r\n    static getPathElement(path, position = -1) {\r\n        if (StringUtils.isEmpty(path)) {\r\n            return '';\r\n        }\r\n        path = StringUtils.formatPath(path, '/');\r\n        path = (path.indexOf('/') === 0) ? path.substr(1) : path;\r\n        let elements = path.split('/');\r\n        if (position >= elements.length || position < -elements.length) {\r\n            throw new Error('Invalid position specified');\r\n        }\r\n        return position < 0 ? elements[elements.length + position] : elements[position];\r\n    }\r\n    /**\r\n     * This method works in the same way as getPathElement but it also removes the extension part from the result\r\n     * if it has any.\r\n     *\r\n     * @example \"//folder/folder2/folder3/file.txt\" -> results in \"file\" if position = -1. Notice that \".txt\" extension is removed<br>\r\n     *          \"//folder/folder2\\folder3\\file.txt\" -> results in \"folder3\" if position = 2. \"folder3\" has no extension so it does not get modified.\r\n     *\r\n     * @see StringUtils.getPathElement\r\n     *\r\n     * @param path A string containing some arbitrary path.\r\n     * @param position The index for the element that we want to extract from the path. If not specified, the\r\n     *                 last one will be returned.\r\n     * @param extensionSeparator The character to be used as the extension separator. The most commonly used is '.'\r\n     *\r\n     * @return The element at the specified path position with it's extension removed or the last one if no position is defined\r\n     */\r\n    static getPathElementWithoutExt(path, position = -1, extensionSeparator = '.') {\r\n        let element = StringUtils.getPathElement(path, position);\r\n        if (element.indexOf(extensionSeparator) >= 0) {\r\n            element = element.substr(0, element.lastIndexOf(extensionSeparator));\r\n        }\r\n        return element;\r\n    }\r\n    /**\r\n     * This method works in the same way as getPathElement but it only gives the element extension if it has any.\r\n     *\r\n     * @example \"//folder/folder2/folder3/file.txt\" -> results in \"txt\" if position = -1. Notice that extension without separator character is returned<br>\r\n     *          \"//folder/folder2\\folder3\\file.txt\" -> results in \"folder3\" if position = 2. \"folder3\" has no extension so it does not get modified.\r\n     *\r\n     * @see StringUtils.getPathElement\r\n     *\r\n     * @param path A string containing some arbitrary path.\r\n     * @param position The index for the element extension that we want to extract from the path. If not specified, the\r\n     *                 last one will be returned.\r\n     * @param extensionSeparator The character to be used as the extension separator. The most commonly used is '.'\r\n     *\r\n     * @return The extension from the element at the specified path position or the extension from the last one if no position is defined\r\n     */\r\n    static getPathExtension(path, position = -1, extensionSeparator = '.') {\r\n        let element = StringUtils.getPathElement(path, position);\r\n        if (element.indexOf(extensionSeparator) < 0) {\r\n            return '';\r\n        }\r\n        // Find the extension by getting the last position of the dot character\r\n        return element.substr(element.lastIndexOf(extensionSeparator) + 1);\r\n    }\r\n    /**\r\n     * Given an internet URL, this method extracts only the scheme part.\r\n     * Example: \"http://google.com\" -> results in \"http\"\r\n     *\r\n     * @see StringUtils.formatUrl\r\n     *\r\n     * @param url A valid internet url\r\n     *\r\n     * @returns ('ftp', 'http', ...) if the url is valid or '' if the url is invalid\r\n     */\r\n    static getSchemeFromUrl(url) {\r\n        if (url == null || url == undefined) {\r\n            return '';\r\n        }\r\n        if (!StringUtils.isString(url)) {\r\n            throw new Error(\"Specified value must be a string\");\r\n        }\r\n        if (!StringUtils.isUrl(url)) {\r\n            return '';\r\n        }\r\n        var res = url.split('://');\r\n        return (res.length === 2) ? res[0] : '';\r\n    }\r\n    /**\r\n     * Changes the letter case for the given string to the specified format.\r\n     *\r\n     * @param string A string that will be processed to match the specified case format.\r\n     * @param format The format to which the given string will be converted. Possible values are defined as\r\n     * StringUtils constants that start with <b>FORMAT_</b>, like: StringUtils.FORMAT_ALL_UPPER_CASE\r\n     *\r\n     * @see StringUtils.FORMAT_SENTENCE_CASE\r\n     * @see StringUtils.FORMAT_START_CASE\r\n     * @see StringUtils.FORMAT_ALL_UPPER_CASE\r\n     * @see StringUtils.FORMAT_ALL_LOWER_CASE\r\n     * @see StringUtils.FORMAT_FIRST_UPPER_REST_LOWER\r\n     * @see StringUtils.FORMAT_CAMEL_CASE\r\n     * @see StringUtils.FORMAT_UPPER_CAMEL_CASE\r\n     * @see StringUtils.FORMAT_LOWER_CAMEL_CASE\r\n     * @see StringUtils.FORMAT_SNAKE_CASE\r\n     * @see StringUtils.FORMAT_UPPER_SNAKE_CASE\r\n     * @see StringUtils.FORMAT_LOWER_SNAKE_CASE\r\n     *\r\n     * @returns The given string converted to the specified case format.\r\n     */\r\n    static formatCase(string, format) {\r\n        // Non string values will throw an exception\r\n        if (!StringUtils.isString(string)) {\r\n            throw new Error('value is not a string');\r\n        }\r\n        // Empty values will return the string itself\r\n        if (StringUtils.isEmpty(string)) {\r\n            return string;\r\n        }\r\n        // Generate the sentence case output\r\n        // TODO - translate from PHP\r\n        // Generate the title case output\r\n        if (format === StringUtils.FORMAT_START_CASE) {\r\n            return string.split(' ')\r\n                .map(s => (s.length > 0 ? s[0].toUpperCase() : '') + (s.length > 1 ? s.substr(1).toLowerCase() : ''))\r\n                .join(' ');\r\n        }\r\n        // Generate the all upper case output\r\n        if (format === StringUtils.FORMAT_ALL_UPPER_CASE) {\r\n            return string.toUpperCase();\r\n        }\r\n        // Generate the all lower case output\r\n        if (format === StringUtils.FORMAT_ALL_LOWER_CASE) {\r\n            return string.toLowerCase();\r\n        }\r\n        // Generate the first upper rest lower case output\r\n        if (format === StringUtils.FORMAT_FIRST_UPPER_REST_LOWER) {\r\n            return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\r\n        }\r\n        // Generate the snake case format\r\n        // TODO - translate from PHP\r\n        // Generate the camel case format\r\n        if (format.indexOf('CAMEL_CASE') > 0) {\r\n            // non-alpha and non-numeric characters become spaces and the whole string is splitted to words\r\n            let stringWords = StringUtils.removeAccents(string).replace(/[^a-z0-9]+/ig, ' ').trim().split(' ');\r\n            // uppercase the first character of each word except the first one\r\n            if (stringWords.length > 1) {\r\n                for (let i = 1; i < stringWords.length; i++) {\r\n                    stringWords[i] = stringWords[i].charAt(0).toUpperCase() + stringWords[i].slice(1);\r\n                }\r\n            }\r\n            string = stringWords.join('');\r\n            if (format == StringUtils.FORMAT_UPPER_CAMEL_CASE) {\r\n                return string.charAt(0).toUpperCase() + string.slice(1);\r\n            }\r\n            if (format == StringUtils.FORMAT_LOWER_CAMEL_CASE) {\r\n                return string.charAt(0).toLowerCase() + string.slice(1);\r\n            }\r\n            return string;\r\n        }\r\n        throw new Error('Unknown format specified');\r\n    }\r\n    /**\r\n     * Given a string with a list of elements separated by '/' or '\\' that represent some kind of unformatted path,\r\n     * this method will process it to get a standarized one by applying the following rules:\r\n     *\r\n     * - Duplicate separator characters will be removed: \"a\\\\\\b\\\\c\" will become \"a/b/c\"\r\n     * - All separator characters will be unified to the same one: \"a\\b/c\\d\" will become \"a/b/c/d\"\r\n     * - No trailing separator will exist: \"a\\b\\c\\\" will become \"a\\b\\c\"\r\n     *\r\n     * NOTE: This method only applies format to the received string. It does not check if the path is a real\r\n     *       location or a valid url, and won't also fail if the received path contains strange characters or is invalid.\r\n     *\r\n     * @param path A raw path to be formatted\r\n     * @param separator The character to use as the element divider. Only slash '/' or backslash '\\' are allowed.\r\n     *\r\n     * @return The correctly formatted path without any trailing separator\r\n     */\r\n    static formatPath(path, separator = '/') {\r\n        if (!StringUtils.isString(path)) {\r\n            throw new Error('path must be a string');\r\n        }\r\n        if (separator !== '/' && separator !== '\\\\') {\r\n            throw new Error('separator must be a slash or backslash');\r\n        }\r\n        // Standarize all the separator characters\r\n        path = path.replace(/\\//g, separator);\r\n        path = path.replace(/\\\\/g, separator);\r\n        // Remove duplicate path separator characters\r\n        while (path.indexOf(separator + separator) >= 0) {\r\n            path = path.replace(separator + separator, separator);\r\n        }\r\n        // Remove the last separator only if it exists and is not the only character of the path\r\n        if (path.length > 1 && path.substr(path.length - 1) === separator) {\r\n            path = path.substr(0, path.length - 1);\r\n        }\r\n        return path;\r\n    }\r\n    /**\r\n     * Given a raw string containing an internet URL, this method will process it to obtain a URL that is 100% format valid.\r\n     *\r\n     * A Uniform Resource Locator (URL), commonly informally termed a web address is a reference to a web resource that specifies\r\n     * its location on a computer network and a mechanism for retrieving it. URLs occur most commonly to reference web pages (http),\r\n     * but are also used for file transfer (ftp), email (mailto), database access (JDBC), and many other applications.\r\n     *\r\n     * Every HTTP URL conforms to the syntax of a generic URI. A generic URI is of the form: scheme:[//[user:password@]host[:port]][/]path[?query][#fragment]\r\n     *\r\n     * @see https://en.wikipedia.org/wiki/Uniform_Resource_Locator#Syntax\r\n     *\r\n     * @returns The formated url string or the original string if it was not a valid url\r\n     */\r\n    static formatUrl(url) {\r\n        var urlSeparator = '/';\r\n        if (url == '') {\r\n            return '';\r\n        }\r\n        if (!StringUtils.isString(url)) {\r\n            throw new Error(\"url must be a string\");\r\n        }\r\n        if (StringUtils.isEmpty(url)) {\r\n            return url;\r\n        }\r\n        // Trim and replace all slashes on the url with the correct url slash\r\n        url = url.trim();\r\n        url = url.replace(/\\//g, urlSeparator);\r\n        url = url.replace(/\\\\/g, urlSeparator);\r\n        // Remove duplicate path separator characters. We replace :// with @@\r\n        // to prevent the first two // from being replaced with a single one\r\n        url = url.replace(/\\:\\/\\//g, '@@@');\r\n        while (url.indexOf(urlSeparator + urlSeparator) >= 0) {\r\n            url = url.replace(urlSeparator + urlSeparator, urlSeparator);\r\n        }\r\n        url = url.replace(/@@@/g, '://');\r\n        // get the url scheme\r\n        var scheme = this.getSchemeFromUrl(url);\r\n        if (scheme === '') {\r\n            if (StringUtils.isUrl('http://' + url)) {\r\n                return 'http://' + url;\r\n            }\r\n        }\r\n        return url;\r\n    }\r\n    static formatForFullTextSearch() {\r\n        // TODO: translate from php\r\n    }\r\n    /**\r\n     * Compares two strings and gives the number of character replacements that must be performed to convert one\r\n     * of the strings into the other. A very useful method to use in fuzzy text searches where we want to look for\r\n     * similar texts. This method uses the Levenshtein method for the comparison:\r\n     *\r\n     * The Levenshtein distance is defined as the minimal number of characters you have to replace, insert or delete\r\n     * to transform string1 into string2. The complexity of the algorithm is O(m*n), where n and m are the length\r\n     * of string1 and string2.\r\n     *\r\n     * @example \"aha\" and \"aba\" will output 1 cause we need to change the h for a b to transform one string into another.\r\n     *\r\n     * @param string1 The first string to compare\r\n     * @param string2 The second string to compare\r\n     *\r\n     * @return The number of characters to replace to convert $string1 into $string2 where 0 means both strings are the same.\r\n     *         The higher the result, the more different the strings are.\r\n     */\r\n    static compareByLevenshtein(string1, string2) {\r\n        // This function was found at https://gist.github.com/santhoshtr/1710925\r\n        if (!StringUtils.isString(string1) || !StringUtils.isString(string2)) {\r\n            throw new Error('string1 and string2 must be strings');\r\n        }\r\n        let length1 = string1.length;\r\n        let length2 = string2.length;\r\n        if (length1 < length2) {\r\n            return StringUtils.compareByLevenshtein(string2, string1);\r\n        }\r\n        if (length1 == 0) {\r\n            return length2;\r\n        }\r\n        if (string1 === string2) {\r\n            return 0;\r\n        }\r\n        let currentRow = [];\r\n        // This code is the equivalent to the range(0, $length2) in php version\r\n        let prevRow = [];\r\n        for (let i = 0; i <= length2; i++) {\r\n            prevRow.push(i);\r\n        }\r\n        for (let i = 0; i < length1; i++) {\r\n            currentRow = [];\r\n            currentRow[0] = i + 1;\r\n            let c1 = string1.substr(i, 1);\r\n            for (let j = 0; j < length2; j++) {\r\n                let c2 = string2.substr(j, 1);\r\n                let insertions = prevRow[j + 1] + 1;\r\n                let deletions = currentRow[j] + 1;\r\n                let substitutions = prevRow[j] + ((c1 !== c2) ? 1 : 0);\r\n                currentRow.push(Math.min(insertions, deletions, substitutions));\r\n            }\r\n            prevRow = currentRow;\r\n        }\r\n        return prevRow[length2];\r\n    }\r\n    /**\r\n     * Compares the percentage of similarity between two strings, based on the Levenshtein method. A very useful method\r\n     * to use in fuzzy text searches where we want to look for similar texts.\r\n     *\r\n     * @param string1 The first string to compare\r\n     * @param string2 The second string to compare\r\n     *\r\n     * @return A number between 0 and 100, being 100 if both strings are the same and 0 if both strings are totally different\r\n     */\r\n    static compareSimilarityPercent(string1, string2) {\r\n        let levenshtein = StringUtils.compareByLevenshtein(string1, string2);\r\n        if (levenshtein === 0) {\r\n            return 100;\r\n        }\r\n        return (1 - levenshtein / Math.max(string1.length, string2.length)) * 100;\r\n    }\r\n    /**\r\n     * Generates a random string with the specified length and options\r\n     *\r\n     * @param minLength Specify the minimum possible length for the generated string\r\n     * @param maxLength Specify the maximum possible length for the generated string\r\n     * @param charSet Defines the list of possible characters to be generated. Each element of charSet must be a string containing\r\n     *                the possible characters like 'a1kjuhAO' or a range like 'a-z', 'A-D', '0-5', ... etc.\r\n     *                Note that - character must be escaped \\- when not specified as part of a range.\r\n     *                Default charset is alphanumeric ['0-9', 'a-z', 'A-Z']\r\n     *\r\n     * @return A randomly generated string\r\n     */\r\n    static generateRandom(minLength, maxLength, charSet = ['0-9', 'a-z', 'A-Z']) {\r\n        if (minLength < 0 || !NumericUtils_1.NumericUtils.isInteger(minLength) ||\r\n            maxLength < 0 || !NumericUtils_1.NumericUtils.isInteger(maxLength)) {\r\n            throw new Error('minLength and maxLength must be positive numbers');\r\n        }\r\n        if (maxLength < minLength) {\r\n            throw new Error('Provided maxLength must be higher or equal than minLength');\r\n        }\r\n        if (!ArrayUtils_1.ArrayUtils.isArray(charSet) || charSet.length <= 0) {\r\n            throw new Error('invalid charset');\r\n        }\r\n        // Define the output charset\r\n        let finalCharSet = '';\r\n        let numbers = '0123456789';\r\n        let lowerCaseLetters = 'abcdefghijkmnopqrstuvwxyz';\r\n        let upperCaseLetters = 'ABCDEFGHIJKMNOPQRSTUVWXYZ';\r\n        for (let chars of charSet) {\r\n            if (!StringUtils.isString(chars) || StringUtils.isEmpty(chars)) {\r\n                throw new Error('invalid charset');\r\n            }\r\n            let firstChar = chars.substr(0, 1);\r\n            let thirdChar = chars.substr(2, 1);\r\n            // Check if an interval of characters has been defined\r\n            if (chars.length === 3 && chars.indexOf('-') === 1 && firstChar !== '\\\\') {\r\n                // Look for numeric intervals\r\n                if (numbers.indexOf(firstChar) >= 0) {\r\n                    finalCharSet += numbers.substring(numbers.indexOf(firstChar), numbers.indexOf(thirdChar) + 1);\r\n                    // Look for lower case letter intervals\r\n                }\r\n                else if (lowerCaseLetters.indexOf(firstChar) >= 0) {\r\n                    finalCharSet += lowerCaseLetters.substring(lowerCaseLetters.indexOf(firstChar), lowerCaseLetters.indexOf(thirdChar) + 1);\r\n                    // Look for upper case letter intervals\r\n                }\r\n                else if (upperCaseLetters.indexOf(firstChar) >= 0) {\r\n                    finalCharSet += upperCaseLetters.substring(upperCaseLetters.indexOf(firstChar), upperCaseLetters.indexOf(thirdChar) + 1);\r\n                }\r\n            }\r\n            else {\r\n                finalCharSet += StringUtils.replace(chars, '\\\\-', '-');\r\n            }\r\n        }\r\n        // Generate as many random characters as required\r\n        let result = '';\r\n        let length = (minLength === maxLength) ? maxLength : NumericUtils_1.NumericUtils.generateRandomInteger(minLength, maxLength);\r\n        for (let i = 0; i < length; i++) {\r\n            result += finalCharSet.charAt(Math.floor(Math.random() * finalCharSet.length));\r\n        }\r\n        return result;\r\n    }\r\n    static findMostSimilarString() {\r\n        // TODO: translate from php\r\n    }\r\n    static findMostSimilarStringIndex() {\r\n        // TODO: translate from php\r\n    }\r\n    static removeNewLineCharacters() {\r\n        // TODO: translate from php\r\n    }\r\n    /**\r\n     * Converts all accent characters to ASCII characters on a given string.<br>\r\n     * This method is based on a stack overflow implementation called removeDiacritics\r\n     *\r\n     * @see http://stackoverflow.com/questions/990904/remove-accents-diacritics-in-a-string-in-javascript\r\n     *\r\n     * @param string Text from which accents must be cleaned\r\n     *\r\n     * @returns The given string with all accent and diacritics replaced by the respective ASCII characters.\r\n     */\r\n    static removeAccents(string) {\r\n        if (!StringUtils.isString(string)) {\r\n            throw new Error('value is not a string');\r\n        }\r\n        var defaultDiacriticsRemovalMap = [{\r\n                'b': 'A',\r\n                'l': '\\u0041\\u24B6\\uFF21\\u00C0\\u00C1\\u00C2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\u00C3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\u00C4\\u01DE\\u1EA2\\u00C5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F'\r\n            }, {\r\n                'b': 'AA',\r\n                'l': '\\uA732'\r\n            }, {\r\n                'b': 'AE',\r\n                'l': '\\u00C6\\u01FC\\u01E2'\r\n            }, {\r\n                'b': 'AO',\r\n                'l': '\\uA734'\r\n            }, {\r\n                'b': 'AU',\r\n                'l': '\\uA736'\r\n            }, {\r\n                'b': 'AV',\r\n                'l': '\\uA738\\uA73A'\r\n            }, {\r\n                'b': 'AY',\r\n                'l': '\\uA73C'\r\n            }, {\r\n                'b': 'B',\r\n                'l': '\\u0042\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181'\r\n            }, {\r\n                'b': 'C',\r\n                'l': '\\u0043\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\u00C7\\u1E08\\u0187\\u023B\\uA73E'\r\n            }, {\r\n                'b': 'D',\r\n                'l': '\\u0044\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779'\r\n            }, {\r\n                'b': 'DZ',\r\n                'l': '\\u01F1\\u01C4'\r\n            }, {\r\n                'b': 'Dz',\r\n                'l': '\\u01F2\\u01C5'\r\n            }, {\r\n                'b': 'E',\r\n                'l': '\\u0045\\u24BA\\uFF25\\u00C8\\u00C9\\u00CA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\u00CB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E'\r\n            }, {\r\n                'b': 'F',\r\n                'l': '\\u0046\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B'\r\n            }, {\r\n                'b': 'G',\r\n                'l': '\\u0047\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E'\r\n            }, {\r\n                'b': 'H',\r\n                'l': '\\u0048\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D'\r\n            }, {\r\n                'b': 'I',\r\n                'l': '\\u0049\\u24BE\\uFF29\\u00CC\\u00CD\\u00CE\\u0128\\u012A\\u012C\\u0130\\u00CF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197'\r\n            }, {\r\n                'b': 'J',\r\n                'l': '\\u004A\\u24BF\\uFF2A\\u0134\\u0248'\r\n            }, {\r\n                'b': 'K',\r\n                'l': '\\u004B\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2'\r\n            }, {\r\n                'b': 'L',\r\n                'l': '\\u004C\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780'\r\n            }, {\r\n                'b': 'LJ',\r\n                'l': '\\u01C7'\r\n            }, {\r\n                'b': 'Lj',\r\n                'l': '\\u01C8'\r\n            }, {\r\n                'b': 'M',\r\n                'l': '\\u004D\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C'\r\n            }, {\r\n                'b': 'N',\r\n                'l': '\\u004E\\u24C3\\uFF2E\\u01F8\\u0143\\u00D1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4'\r\n            }, {\r\n                'b': 'NJ',\r\n                'l': '\\u01CA'\r\n            }, {\r\n                'b': 'Nj',\r\n                'l': '\\u01CB'\r\n            }, {\r\n                'b': 'O',\r\n                'l': '\\u004F\\u24C4\\uFF2F\\u00D2\\u00D3\\u00D4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\u00D5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\u00D6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\u00D8\\u01FE\\u0186\\u019F\\uA74A\\uA74C'\r\n            }, {\r\n                'b': 'OI',\r\n                'l': '\\u01A2'\r\n            }, {\r\n                'b': 'OO',\r\n                'l': '\\uA74E'\r\n            }, {\r\n                'b': 'OU',\r\n                'l': '\\u0222'\r\n            }, {\r\n                'b': 'OE',\r\n                'l': '\\u008C\\u0152'\r\n            }, {\r\n                'b': 'oe',\r\n                'l': '\\u009C\\u0153'\r\n            }, {\r\n                'b': 'P',\r\n                'l': '\\u0050\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754'\r\n            }, {\r\n                'b': 'Q',\r\n                'l': '\\u0051\\u24C6\\uFF31\\uA756\\uA758\\u024A'\r\n            }, {\r\n                'b': 'R',\r\n                'l': '\\u0052\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782'\r\n            }, {\r\n                'b': 'S',\r\n                'l': '\\u0053\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784'\r\n            }, {\r\n                'b': 'T',\r\n                'l': '\\u0054\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786'\r\n            }, {\r\n                'b': 'TZ',\r\n                'l': '\\uA728'\r\n            }, {\r\n                'b': 'U',\r\n                'l': '\\u0055\\u24CA\\uFF35\\u00D9\\u00DA\\u00DB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\u00DC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244'\r\n            }, {\r\n                'b': 'V',\r\n                'l': '\\u0056\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245'\r\n            }, {\r\n                'b': 'VY',\r\n                'l': '\\uA760'\r\n            }, {\r\n                'b': 'W',\r\n                'l': '\\u0057\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72'\r\n            }, {\r\n                'b': 'X',\r\n                'l': '\\u0058\\u24CD\\uFF38\\u1E8A\\u1E8C'\r\n            }, {\r\n                'b': 'Y',\r\n                'l': '\\u0059\\u24CE\\uFF39\\u1EF2\\u00DD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE'\r\n            }, {\r\n                'b': 'Z',\r\n                'l': '\\u005A\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762'\r\n            }, {\r\n                'b': 'a',\r\n                'l': '\\u0061\\u24D0\\uFF41\\u1E9A\\u00E0\\u00E1\\u00E2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\u00E3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\u00E4\\u01DF\\u1EA3\\u00E5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250'\r\n            }, {\r\n                'b': 'aa',\r\n                'l': '\\uA733'\r\n            }, {\r\n                'b': 'ae',\r\n                'l': '\\u00E6\\u01FD\\u01E3'\r\n            }, {\r\n                'b': 'ao',\r\n                'l': '\\uA735'\r\n            }, {\r\n                'b': 'au',\r\n                'l': '\\uA737'\r\n            }, {\r\n                'b': 'av',\r\n                'l': '\\uA739\\uA73B'\r\n            }, {\r\n                'b': 'ay',\r\n                'l': '\\uA73D'\r\n            }, {\r\n                'b': 'b',\r\n                'l': '\\u0062\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253'\r\n            }, {\r\n                'b': 'c',\r\n                'l': '\\u0063\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\u00E7\\u1E09\\u0188\\u023C\\uA73F\\u2184'\r\n            }, {\r\n                'b': 'd',\r\n                'l': '\\u0064\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A'\r\n            }, {\r\n                'b': 'dz',\r\n                'l': '\\u01F3\\u01C6'\r\n            }, {\r\n                'b': 'e',\r\n                'l': '\\u0065\\u24D4\\uFF45\\u00E8\\u00E9\\u00EA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\u00EB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD'\r\n            }, {\r\n                'b': 'f',\r\n                'l': '\\u0066\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C'\r\n            }, {\r\n                'b': 'g',\r\n                'l': '\\u0067\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F'\r\n            }, {\r\n                'b': 'h',\r\n                'l': '\\u0068\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265'\r\n            }, {\r\n                'b': 'hv',\r\n                'l': '\\u0195'\r\n            }, {\r\n                'b': 'i',\r\n                'l': '\\u0069\\u24D8\\uFF49\\u00EC\\u00ED\\u00EE\\u0129\\u012B\\u012D\\u00EF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131'\r\n            }, {\r\n                'b': 'j',\r\n                'l': '\\u006A\\u24D9\\uFF4A\\u0135\\u01F0\\u0249'\r\n            }, {\r\n                'b': 'k',\r\n                'l': '\\u006B\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3'\r\n            }, {\r\n                'b': 'l',\r\n                'l': '\\u006C\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u017F\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747'\r\n            }, {\r\n                'b': 'lj',\r\n                'l': '\\u01C9'\r\n            }, {\r\n                'b': 'm',\r\n                'l': '\\u006D\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F'\r\n            }, {\r\n                'b': 'n',\r\n                'l': '\\u006E\\u24DD\\uFF4E\\u01F9\\u0144\\u00F1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5'\r\n            }, {\r\n                'b': 'nj',\r\n                'l': '\\u01CC'\r\n            }, {\r\n                'b': 'o',\r\n                'l': '\\u006F\\u24DE\\uFF4F\\u00F2\\u00F3\\u00F4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\u00F5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\u00F6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\u00F8\\u01FF\\u0254\\uA74B\\uA74D\\u0275'\r\n            }, {\r\n                'b': 'oi',\r\n                'l': '\\u01A3'\r\n            }, {\r\n                'b': 'ou',\r\n                'l': '\\u0223'\r\n            }, {\r\n                'b': 'oo',\r\n                'l': '\\uA74F'\r\n            }, {\r\n                'b': 'p',\r\n                'l': '\\u0070\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755'\r\n            }, {\r\n                'b': 'q',\r\n                'l': '\\u0071\\u24E0\\uFF51\\u024B\\uA757\\uA759'\r\n            }, {\r\n                'b': 'r',\r\n                'l': '\\u0072\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783'\r\n            }, {\r\n                'b': 's',\r\n                'l': '\\u0073\\u24E2\\uFF53\\u00DF\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B'\r\n            }, {\r\n                'b': 't',\r\n                'l': '\\u0074\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787'\r\n            }, {\r\n                'b': 'tz',\r\n                'l': '\\uA729'\r\n            }, {\r\n                'b': 'u',\r\n                'l': '\\u0075\\u24E4\\uFF55\\u00F9\\u00FA\\u00FB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\u00FC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289'\r\n            }, {\r\n                'b': 'v',\r\n                'l': '\\u0076\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C'\r\n            }, {\r\n                'b': 'vy',\r\n                'l': '\\uA761'\r\n            }, {\r\n                'b': 'w',\r\n                'l': '\\u0077\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73'\r\n            }, {\r\n                'b': 'x',\r\n                'l': '\\u0078\\u24E7\\uFF58\\u1E8B\\u1E8D'\r\n            }, {\r\n                'b': 'y',\r\n                'l': '\\u0079\\u24E8\\uFF59\\u1EF3\\u00FD\\u0177\\u1EF9\\u0233\\u1E8F\\u00FF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF'\r\n            }, {\r\n                'b': 'z',\r\n                'l': '\\u007A\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763'\r\n            }];\r\n        var diacriticsMap = {};\r\n        for (var i = 0; i < defaultDiacriticsRemovalMap.length; i++) {\r\n            var letters = defaultDiacriticsRemovalMap[i].l;\r\n            for (var j = 0; j < letters.length; j++) {\r\n                diacriticsMap[letters[j]] = defaultDiacriticsRemovalMap[i].b;\r\n            }\r\n        }\r\n        return string.replace(/[^\\u0000-\\u007E]/g, function (a) {\r\n            return diacriticsMap[a] || a;\r\n        });\r\n    }\r\n    static removeWordsShorterThan() {\r\n        // TODO: translate from php\r\n    }\r\n    static removeWordsLongerThan() {\r\n        // TODO: translate from php\r\n    }\r\n    static removeUrls() {\r\n        // TODO: translate from php\r\n    }\r\n    static removeHtmlCode() {\r\n        // TODO: translate from php\r\n    }\r\n    static removeSameConsecutive() {\r\n        // TODO: translate from php\r\n    }\r\n}\r\nexports.StringUtils = StringUtils;\r\n/**\r\n * Defines the sentence case format (Only the first character of the sentence is capitalised,except for\r\n * proper nouns and other words which are required by a more specific rule to be capitalised).\r\n * Generally equivalent to the baseline universal standard of formal English orthography\r\n */\r\nStringUtils.FORMAT_SENTENCE_CASE = 'FORMAT_SENTENCE_CASE';\r\n/**\r\n * Defines the start case format (The first character in all words capitalised and all the rest\r\n * of the word lower case). It is also called Title Case\r\n */\r\nStringUtils.FORMAT_START_CASE = 'FORMAT_START_CASE';\r\n/**\r\n * Defines the all upper case format (All letters on a string written with Capital letters only)\r\n */\r\nStringUtils.FORMAT_ALL_UPPER_CASE = 'FORMAT_ALL_UPPER_CASE';\r\n/**\r\n * Defines the all lower case format (All letters on a string written with lower case letters only)\r\n */\r\nStringUtils.FORMAT_ALL_LOWER_CASE = 'FORMAT_ALL_LOWER_CASE';\r\n/**\r\n * Defines the first upper rest lower case format (All letters on a string written\r\n * with lower case letters except the first one which is Capitalized)\r\n */\r\nStringUtils.FORMAT_FIRST_UPPER_REST_LOWER = 'FORMAT_FIRST_UPPER_REST_LOWER';\r\n/**\r\n * Defines the CamelCase format (the practice of writing compound words or phrases such that each\r\n * word or abbreviation begins with a capital letter)\r\n */\r\nStringUtils.FORMAT_CAMEL_CASE = 'FORMAT_CAMEL_CASE';\r\n/**\r\n * Defines the UpperCamelCase format variation that writes first letter as upper case\r\n *\r\n * @see StringUtils.FORMAT_CAMEL_CASE\r\n */\r\nStringUtils.FORMAT_UPPER_CAMEL_CASE = 'FORMAT_UPPER_CAMEL_CASE';\r\n/**\r\n * Defines the lowerCamelCase format variation that writes first letter as lower case\r\n *\r\n * @see StringUtils.FORMAT_CAMEL_CASE\r\n */\r\nStringUtils.FORMAT_LOWER_CAMEL_CASE = 'FORMAT_LOWER_CAMEL_CASE';\r\n/**\r\n * Defines the snake_case format (the practice of writing compound words or phrases in which\r\n * the elements are separated with one underscore character (_) and no spaces)\r\n */\r\nStringUtils.FORMAT_SNAKE_CASE = 'FORMAT_SNAKE_CASE';\r\n/**\r\n * Defines the FORMAT_UPPER_SNAKE_CASE format variation that writes all letters as upper case\r\n *\r\n * @see StringUtils.FORMAT_SNAKE_CASE\r\n */\r\nStringUtils.FORMAT_UPPER_SNAKE_CASE = 'FORMAT_UPPER_SNAKE_CASE';\r\n/**\r\n * Defines the lower_snake_case format variation that writes all letters as lower case\r\n *\r\n * @see StringUtils.FORMAT_SNAKE_CASE\r\n */\r\nStringUtils.FORMAT_LOWER_SNAKE_CASE = 'FORMAT_LOWER_SNAKE_CASE';\r\n//# sourceMappingURL=StringUtils.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst ObjectUtils_1 = require(\"./ObjectUtils\");\r\nconst StringUtils_1 = require(\"./StringUtils\");\r\nconst ValidationManager_1 = require(\"../managers/ValidationManager\");\r\n/**\r\n * Utilities to perform common array operations\r\n */\r\nclass ArrayUtils {\r\n    /**\r\n     * Tells if the given value is an array or not\r\n     *\r\n     * @param value A value to check\r\n     *\r\n     * @returns true if the given value is an array, false otherwise\r\n     */\r\n    static isArray(value) {\r\n        return Object.prototype.toString.call(value) === '[object Array]';\r\n    }\r\n    /**\r\n     * Check if two provided arrays are identical (have exactly the same elements and in the same order).\r\n     *\r\n     * @param array1 First array to compare\r\n     * @param array2 Second array to compare\r\n     *\r\n     * @returns true if arrays are exactly the same, false if not\r\n     */\r\n    static isEqualTo(array1, array2) {\r\n        // Both provided values must be arrays or an exception will be launched\r\n        if (!ArrayUtils.isArray(array1) || !ArrayUtils.isArray(array2)) {\r\n            throw new Error('parameters must be arrays');\r\n        }\r\n        // Compare lengths can save a lot of time \r\n        if (array1.length != array2.length) {\r\n            return false;\r\n        }\r\n        for (var i = 0, l = array1.length; i < l; i++) {\r\n            // Check if we have nested arrays\r\n            if (ArrayUtils.isArray(array1[i]) && ArrayUtils.isArray(array2[i])) {\r\n                if (!ArrayUtils.isEqualTo(array1[i], array2[i])) {\r\n                    return false;\r\n                }\r\n            }\r\n            else {\r\n                if (ObjectUtils_1.ObjectUtils.isObject(array1[i]) && ObjectUtils_1.ObjectUtils.isObject(array2[i])) {\r\n                    if (!ObjectUtils_1.ObjectUtils.isEqualTo(array1[i], array2[i])) {\r\n                        return false;\r\n                    }\r\n                }\r\n                else if (array1[i] !== array2[i]) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Check if the provided string is found inside the provided array structure.\r\n     * This method will recursively search inside all the provided array elements and test if the provided string is found.\r\n     * Search will be performed inside any array structures like arrays or other objects. Result will be positive even if\r\n     * any string on the array contains the searched text as a substring.\r\n     *\r\n     * @param array The array where the string will be looked for\r\n     * @param str The string that will be searched on the array\r\n     * @param caseSensitive True (default) to perform a case sensitive search, false otherwise\r\n     *\r\n     * @returns True if the string is found anywhere inside the provided array, false otherwise\r\n     */\r\n    static isStringFound(array, str, caseSensitive = true) {\r\n        if (!ArrayUtils.isArray(array)) {\r\n            throw new Error(\"parameter must be an array\");\r\n        }\r\n        if (!StringUtils_1.StringUtils.isString(str)) {\r\n            throw new Error(\"str is not a string\");\r\n        }\r\n        for (var i = 0; i < array.length; i++) {\r\n            if (StringUtils_1.StringUtils.isString(array[i]) &&\r\n                ((caseSensitive && array[i].indexOf(str) >= 0) ||\r\n                    (!caseSensitive && array[i].toLowerCase().indexOf(str.toLowerCase()) >= 0))) {\r\n                return true;\r\n            }\r\n            if (ArrayUtils.isArray(array[i]) && ArrayUtils.isStringFound(array[i], str, caseSensitive)) {\r\n                return true;\r\n            }\r\n            if (ObjectUtils_1.ObjectUtils.isObject(array[i]) && ObjectUtils_1.ObjectUtils.isStringFound(array[i], str, caseSensitive)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Strictly check that the provided value is a non empty array or throw an exception\r\n     *\r\n     * @param value A value to check\r\n     * @param valueName The name of the value to be shown at the beginning of the exception message\r\n     * @param errorMessage The rest of the exception message\r\n     *\r\n     * @throws Error If the check fails\r\n     *\r\n     * @return void\r\n     */\r\n    static forceNonEmptyArray(value, valueName = '', errorMessage = 'must be a non empty array') {\r\n        if (!this.isArray(value) || value.length <= 0) {\r\n            throw new Error(valueName + ' ' + errorMessage);\r\n        }\r\n    }\r\n    /**\r\n     * Remove the specified item from an array\r\n     *\r\n     * @param array An array (it will not be modified by this method)\r\n     * @param element The element that must be removed from the given array\r\n     *\r\n     * @returns The provided array but without the specified element (if found). Note that originally received array is not modified by this method\r\n     */\r\n    static removeElement(array, element) {\r\n        // Provided array must be an array\r\n        if (!ArrayUtils.isArray(array)) {\r\n            throw new Error('parameter must be an array');\r\n        }\r\n        var res = [];\r\n        if (ArrayUtils.isArray(element)) {\r\n            for (var i = 0; i < array.length; i++) {\r\n                if (!ArrayUtils.isArray(array[i])) {\r\n                    res.push(array[i]);\r\n                }\r\n                else {\r\n                    if (!ArrayUtils.isEqualTo(element, array[i])) {\r\n                        res.push(array[i]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (var j = 0; j < array.length; j++) {\r\n                if (element !== array[j]) {\r\n                    res.push(array[j]);\r\n                }\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n    /**\r\n     * remove all the duplicate values on the provided array\r\n     * Duplicate values with different data types won't be considered as equal ('1', 1 will not be removed)\r\n     *\r\n     * @param array An array with possible duplicate values\r\n     *\r\n     * @return The same provided array but without duplicate elements\r\n     */\r\n    static removeDuplicateElements(array) {\r\n        // Provided array must be an array\r\n        if (!ArrayUtils.isArray(array)) {\r\n            throw new Error('parameter must be an array');\r\n        }\r\n        let result = [];\r\n        let numElements = array.length;\r\n        let validationManager = new ValidationManager_1.ValidationManager();\r\n        for (let i = 0; i < numElements; i++) {\r\n            let found = false;\r\n            let resultCount = result.length;\r\n            for (let j = 0; j < resultCount; j++) {\r\n                if (validationManager.isEqualTo(array[i], result[j])) {\r\n                    found = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (!found) {\r\n                result.push(array[i]);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Check if the given array contains duplicate values or not.\r\n     * Duplicate values with different data types won't be considered as equal ('1', 1 will return false)\r\n     *\r\n     * @param array An array containing some elements to test\r\n     *\r\n     * @return True if there are duplicate values, false otherwise\r\n     */\r\n    static hasDuplicateElements(array) {\r\n        // Provided array must be an array\r\n        if (!ArrayUtils.isArray(array)) {\r\n            throw new Error('parameter must be an array');\r\n        }\r\n        let numElements = array.length;\r\n        let validationManager = new ValidationManager_1.ValidationManager();\r\n        for (let i = 0; i < numElements; i++) {\r\n            for (let j = i + 1; j < numElements; j++) {\r\n                if (validationManager.isEqualTo(array[i], array[j])) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Get all the duplicate values on the provided array\r\n     * Duplicate values with different data types won't be considered as equal ('1', 1 will return false)\r\n     *\r\n     * @param array An array containing some elements to test\r\n     *\r\n     * @return list with all the elements that are duplicated on the provided array\r\n     */\r\n    static getDuplicateElements(array) {\r\n        // Provided array must be an array\r\n        if (!ArrayUtils.isArray(array)) {\r\n            throw new Error('parameter must be an array');\r\n        }\r\n        let result = [];\r\n        let numElements = array.length;\r\n        let validationManager = new ValidationManager_1.ValidationManager();\r\n        for (let i = 0; i < numElements; i++) {\r\n            for (let j = i + 1; j < numElements; j++) {\r\n                if (validationManager.isEqualTo(array[i], array[j])) {\r\n                    result.push(array[i]);\r\n                }\r\n            }\r\n        }\r\n        return ArrayUtils.removeDuplicateElements(result);\r\n    }\r\n}\r\nexports.ArrayUtils = ArrayUtils;\r\n//# sourceMappingURL=ArrayUtils.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst StringUtils_1 = require(\"./StringUtils\");\r\n/**\r\n * Common operations and tools related with numbers\r\n */\r\nclass NumericUtils {\r\n    /**\r\n     * Tells if the given value is numeric or not\r\n     *\r\n     * @param {any} value A value to check\r\n     *\r\n     * @returns {boolean} true if the given value is numeric or represents a numeric value, false otherwise\r\n     */\r\n    static isNumeric(value) {\r\n        if (StringUtils_1.StringUtils.isString(value)) {\r\n            value = String(value).trim();\r\n        }\r\n        return !isNaN(parseFloat(value)) && isFinite(value);\r\n    }\r\n    /**\r\n     * Tells if the given value is a numeric integer or not\r\n     *\r\n     * @param value A value to check\r\n     *\r\n     * @returns true if the given value is a numeric integer or represents a a numeric integer value, false otherwise\r\n     */\r\n    static isInteger(value) {\r\n        if (!NumericUtils.isNumeric(value)) {\r\n            return false;\r\n        }\r\n        return String(value).indexOf('.') < 0;\r\n    }\r\n    /**\r\n     * Get the number represented by the given value\r\n     *\r\n     * @param any $value A value to convert to a number\r\n     *\r\n     * @returns number The numeric type representation from the given value. For example, a string '0001' will return 1\r\n     */\r\n    static getNumeric(value) {\r\n        if (NumericUtils.isNumeric(value)) {\r\n            return Number(value);\r\n        }\r\n        throw new Error('NumericUtils.getNumeric : Provided value is not numeric');\r\n    }\r\n    /**\r\n     * Generate a random integer between the specified range (both extremes are included).\r\n     *\r\n     * @param min lowest possible value (negative values are allowed)\r\n     * @param max highest possible value (negative values are allowed)\r\n     *\r\n     * @return A random integer value between min and max\r\n     *\r\n     * @throws Exception if max is equal or less than min.\r\n     */\r\n    static generateRandomInteger(min, max) {\r\n        if (!NumericUtils.isInteger(max) || !NumericUtils.isInteger(min)) {\r\n            throw new Error('Provided max and min must be integers');\r\n        }\r\n        if (max <= min) {\r\n            throw new Error('Provided max must be higher than min');\r\n        }\r\n        return Math.floor(Math.random() * (max - min + 1)) + min;\r\n    }\r\n}\r\nexports.NumericUtils = NumericUtils;\r\n//# sourceMappingURL=NumericUtils.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst ArrayUtils_1 = require(\"./ArrayUtils\");\r\nconst StringUtils_1 = require(\"./StringUtils\");\r\nconst ValidationManager_1 = require(\"../managers/ValidationManager\");\r\n/**\r\n * Utilities to perform common object operations\r\n *\r\n * @class\r\n */\r\nclass ObjectUtils {\r\n    /**\r\n     * Tells if the given value is an object or not\r\n     *\r\n     * @param value A value to check\r\n     *\r\n     * @returns true if the given value is an object, false otherwise\r\n     */\r\n    static isObject(value) {\r\n        return !(ArrayUtils_1.ArrayUtils.isArray(value) || value === null || typeof value !== 'object');\r\n    }\r\n    /**\r\n     * Get the list of literals for a given object. Note that only 1rst depth keys are providen\r\n     *\r\n     * @param object A valid object\r\n     *\r\n     * @returns List of strings with the first level object key names in the same order as defined on the object instance\r\n     */\r\n    static getKeys(object) {\r\n        if (!ObjectUtils.isObject(object)) {\r\n            throw new Error(\"parameter must be an object\");\r\n        }\r\n        return Object.keys(object);\r\n    }\r\n    /**\r\n     * Check if two provided objects are identical.\r\n     * Note that properties order does not alter the comparison. So if two objects\r\n     * have the same properties with exactly the same values, but they appear in a different\r\n     * order on both objects, this method will consider them as equal.\r\n     *\r\n     * @param object1 First object to compare\r\n     * @param object2 Second object to compare\r\n     *\r\n     * @returns true if objects are exactly the same, false if not\r\n     */\r\n    static isEqualTo(object1, object2) {\r\n        var validationManager = new ValidationManager_1.ValidationManager();\r\n        // Both provided values must be objects or an exception will be launched\r\n        if (!ObjectUtils.isObject(object1) || !ObjectUtils.isObject(object2)) {\r\n            throw new Error(\"parameters must be objects\");\r\n        }\r\n        var keys1 = ObjectUtils.getKeys(object1).sort();\r\n        var keys2 = ObjectUtils.getKeys(object2).sort();\r\n        // Compare keys can save a lot of time \r\n        if (!ArrayUtils_1.ArrayUtils.isEqualTo(keys1, keys2)) {\r\n            return false;\r\n        }\r\n        // Loop all the keys and verify values are identical\r\n        for (var i = 0; i < keys1.length; i++) {\r\n            if (!validationManager.isEqualTo(object1[keys1[i]], object2[keys2[i]])) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Check if the provided string is found inside the provided object structure.\r\n     * This method will recursively search inside all the provided object properties and test if the provided string is found.\r\n     * Search will be performed inside any object structures like arrays or other objects. Result will be positive even if\r\n     * any string on the object contains the searched text as a substring.\r\n     *\r\n     * @param object The object where the string will be looked for\r\n     * @param str The string that will be searched on the object\r\n     * @param caseSensitive True (default) to perform a case sensitive search, false otherwise\r\n     *\r\n     * @returns True if the string is found anywhere inside the provided object, false otherwise\r\n     */\r\n    static isStringFound(object, str, caseSensitive = true) {\r\n        if (!ObjectUtils.isObject(object)) {\r\n            throw new Error(\"parameter must be an object\");\r\n        }\r\n        if (!StringUtils_1.StringUtils.isString(str)) {\r\n            throw new Error(\"str is not a string\");\r\n        }\r\n        const keys = ObjectUtils.getKeys(object);\r\n        for (const key of keys) {\r\n            if (StringUtils_1.StringUtils.isString(object[key]) &&\r\n                ((caseSensitive && object[key].indexOf(str) >= 0) ||\r\n                    (!caseSensitive && object[key].toLowerCase().indexOf(str.toLowerCase()) >= 0))) {\r\n                return true;\r\n            }\r\n            if (ArrayUtils_1.ArrayUtils.isArray(object[key]) && ArrayUtils_1.ArrayUtils.isStringFound(object[key], str, caseSensitive)) {\r\n                return true;\r\n            }\r\n            if (ObjectUtils.isObject(object[key]) && ObjectUtils.isStringFound(object[key], str, caseSensitive)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Combine a source object into a destination one by applying a deep merge.\r\n     * All properties from the source will be replaced into the destination object, without altering the\r\n     * destination properties that are not found on source.\r\n     *\r\n     * @param destination The object that will be overriden with the source one. The given instance will be permanently modified.\r\n     * @param source An object to merge into the destination one. This instance will not be modified\r\n     *\r\n     * @returns The destination object instance after being modified by merging the source object into it\r\n     */\r\n    static merge(destination, source) {\r\n        if (!ObjectUtils.isObject(destination) || !ObjectUtils.isObject(source)) {\r\n            throw new Error('destination and source must objects');\r\n        }\r\n        let sourceKeys = ObjectUtils.getKeys(source);\r\n        // Loop all the source object keys and merge them into the destination\r\n        for (let key of sourceKeys) {\r\n            if (destination.hasOwnProperty(key) &&\r\n                ObjectUtils.isObject(source[key]) &&\r\n                ObjectUtils.isObject(destination[key])) {\r\n                destination[key] = ObjectUtils.merge(destination[key], source[key]);\r\n            }\r\n            else {\r\n                destination[key] = ObjectUtils.clone(source[key]);\r\n            }\r\n        }\r\n        return destination;\r\n    }\r\n    /**\r\n     * Perform a deep copy of the given object.\r\n     *\r\n     * @see https://stackoverflow.com/questions/4459928/how-to-deep-clone-in-javascript\r\n     *\r\n     * @param object Any language instance like numbers, strings, arrays, objects, etc.. that we want to duplicate.\r\n     *\r\n     * @returns An exact independent copy of the received object, without any shared reference.\r\n     */\r\n    static clone(object) {\r\n        if (object == null || typeof (object) != 'object') {\r\n            return object;\r\n        }\r\n        let result = new object.constructor();\r\n        for (var key in object) {\r\n            if (object.hasOwnProperty(key)) {\r\n                result[key] = ObjectUtils.clone(object[key]);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.ObjectUtils = ObjectUtils;\r\n//# sourceMappingURL=ObjectUtils.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst StringUtils_1 = require(\"../utils/StringUtils\");\r\nconst NumericUtils_1 = require(\"../utils/NumericUtils\");\r\nconst ArrayUtils_1 = require(\"../utils/ArrayUtils\");\r\nconst ObjectUtils_1 = require(\"../utils/ObjectUtils\");\r\n/**\r\n * Class that allows us to manage application validation in an encapsulated way.\r\n * We can create as many instances as we want, and each instance will store the validation history and global validation state,\r\n * so we can use this class to validate complex forms or multiple elements globally.\r\n * We can also use tags to sandbox different validation elements or groups togheter.\r\n */\r\nclass ValidationManager {\r\n    constructor() {\r\n        /**\r\n         * Stores the current validation state for each one of the defined tags.\r\n         *\r\n         * tag contains the name of the tag for which we are saving the status\r\n         * status can have 3 different values: OK / WARNING / ERROR\r\n         */\r\n        this._validationStatus = [{\r\n                tag: '',\r\n                status: ValidationManager.OK\r\n            }];\r\n        /**\r\n         * Stores a list of all the validation error or warning messages that have happened\r\n         * since the validation manager was created or since the last reset was performed.\r\n         *\r\n         * Each message is stored with its associated tag.\r\n         */\r\n        this._failedMessages = [];\r\n    }\r\n    /**\r\n     * Check the current validation state.\r\n     * Possible return values are ValidationManager.OK, ValidationManager.WARNING or ValidationManager.ERROR\r\n     *\r\n     * @param tags If we want to check the validation state for a specific tag or a list of tags, we can set it here. If we want to\r\n     *        get the global validation state for all the tags we will leave this value empty ''.\r\n     *\r\n     * @returns ValidationManager.OK, ValidationManager.WARNING or ValidationManager.ERROR\r\n     */\r\n    getStatus(tags = '') {\r\n        let maxStatus = 0;\r\n        let tagsList = ArrayUtils_1.ArrayUtils.isArray(tags) ? tags : [tags];\r\n        for (let status of this._validationStatus) {\r\n            if ((tags === '' || tagsList.indexOf(status.tag) >= 0) &&\r\n                status.status > maxStatus) {\r\n                maxStatus = status.status;\r\n            }\r\n        }\r\n        return maxStatus;\r\n    }\r\n    /**\r\n     * Provides a way to perform a fast validation check. Will return true if validation state is ok, or false if validation\r\n     * manager is in a warning or error state.\r\n     *\r\n     * @param tags If we want to check the validation state for a specific tag or a list of tags, we can set it here. If we want to\r\n     *        get the global validation state for all the tags we will leave this value empty ''.\r\n     *\r\n     * @return True if status is ok, false if status is warning or error\r\n     */\r\n    ok(tags = '') {\r\n        return this.getStatus(tags) === ValidationManager.OK;\r\n    }\r\n    /**\r\n     * Provides a way to perform a fast validation check. Will return true if validation manager is in a warning or error state, or false\r\n     * if validation state is ok.\r\n     *\r\n     * @param tags If we want to check the validation state for a specific tag or a list of tags, we can set it here. If we want to\r\n     *        get the global validation state for all the tags we will leave this value empty ''.\r\n     *\r\n     * @return True if status is warning or error, False if status is ok\r\n     */\r\n    notOk(tags = '') {\r\n        return this.getStatus(tags) !== ValidationManager.OK;\r\n    }\r\n    /**\r\n     * Find the first error or warning message that happened since the validation manager was instantiated or\r\n     * since the last reset\r\n     *\r\n     * @param tag If we want to filter only the warning / error messages by tag or list of tags, we can set it here. If we want to\r\n     *        get the first of all messages, no matter which tag was applied, we will leave this value empty ''.\r\n     *\r\n     * @return The first error or warning message or empty string if no message exists\r\n     */\r\n    getFirstMessage(tags = '') {\r\n        let tagsList = ArrayUtils_1.ArrayUtils.isArray(tags) ? tags : [tags];\r\n        for (let message of this._failedMessages) {\r\n            if (tags === '' || tags === null ||\r\n                (ArrayUtils_1.ArrayUtils.isArray(tags) && tags.length === 0) ||\r\n                tagsList.indexOf(message.tag) >= 0) {\r\n                return message.message;\r\n            }\r\n        }\r\n        return '';\r\n    }\r\n    /**\r\n     * Find the latest error or warning message that happened since the validation manager was instantiated or\r\n     * since the last reset\r\n     *\r\n     * @param tag If we want to filter only the warning / error messages by tag or list of tags, we can set it here. If we want to\r\n     *        get the latest of all messages, no matter which tag was applied, we will leave this value empty ''.\r\n     *\r\n     * @return The last error or warning message or empty string if no message exists\r\n     */\r\n    getLastMessage(tags = '') {\r\n        let tagsList = ArrayUtils_1.ArrayUtils.isArray(tags) ? tags : [tags];\r\n        for (let i = this._failedMessages.length - 1; i >= 0; i--) {\r\n            if (tags === '' || tags === null ||\r\n                (ArrayUtils_1.ArrayUtils.isArray(tags) && tags.length === 0) ||\r\n                tagsList.indexOf(this._failedMessages[i].tag) >= 0) {\r\n                return this._failedMessages[i].message;\r\n            }\r\n        }\r\n        return '';\r\n    }\r\n    /**\r\n     * Validation will fail if specified value is not a true boolean value\r\n     *\r\n     * @param value A boolean expression to validate\r\n     * @param errorMessage The error message that will be generated if validation fails\r\n     * @param tags We can define a tag name or list of tags to group the validation results. We can use this tags later to filter validation state\r\n     * @param isWarning Tells if the validation fail will be processed as a validation error or a validation warning\r\n     *\r\n     * @return False in case the validation fails or true if validation succeeds.\r\n     */\r\n    isTrue(value, errorMessage = 'value is not true', tags = '', isWarning = false) {\r\n        return this._updateValidationStatus(value === true, errorMessage, tags, isWarning);\r\n    }\r\n    /**\r\n     * Validation will fail if specified value is not a boolean\r\n     *\r\n     * @param value The boolean to validate\r\n     * @param errorMessage The error message that will be generated if validation fails\r\n     * @param tags We can define a tag name or list of tags to group the validation results. We can use this tags later to filter validation state\r\n     * @param isWarning Tells if the validation fail will be processed as a validation error or a validation warning\r\n     *\r\n     * @return False in case the validation fails or true if validation succeeds.\r\n     */\r\n    isBoolean(value, errorMessage = 'value is not a boolean', tags = '', isWarning = false) {\r\n        return this._updateValidationStatus((typeof (value) === 'boolean'), errorMessage, tags, isWarning);\r\n    }\r\n    /**\r\n     * Validation will fail if specified value is not numeric\r\n     *\r\n     * @param value The number to validate\r\n     * @param errorMessage The error message that will be generated if validation fails\r\n     * @param tags We can define a tag name or list of tags to group the validation results. We can use this tags later to filter validation state\r\n     * @param isWarning Tells if the validation fail will be processed as a validation error or a validation warning\r\n     *\r\n     * @return False in case the validation fails or true if validation succeeds.\r\n     */\r\n    isNumeric(value, errorMessage = 'value is not a number', tags = '', isWarning = false) {\r\n        return this._updateValidationStatus(NumericUtils_1.NumericUtils.isNumeric(value), errorMessage, tags, isWarning);\r\n    }\r\n    /**\r\n     * Validation will fail if specified value is not numeric and between the two provided values.\r\n     *\r\n     * @param value The number to validate\r\n     * @param min The minimum accepted value (included)\r\n     * @param max The maximum accepted value (included)\r\n     * @param errorMessage The error message that will be generated if validation fails\r\n     * @param tags We can define a tag name or list of tags to group the validation results. We can use this tags later to filter validation state\r\n     * @param isWarning Tells if the validation fail will be processed as a validation error or a validation warning\r\n     *\r\n     * @return False in case the validation fails or true if validation succeeds.\r\n     */\r\n    isNumericBetween(value, min, max, errorMessage = 'value is not between min and max', tags = '', isWarning = false) {\r\n        return this._updateValidationStatus(NumericUtils_1.NumericUtils.isNumeric(value) && value >= min && value <= max, errorMessage, tags, isWarning);\r\n    }\r\n    /**\r\n     * Validation will fail if specified value is not a string\r\n     *\r\n     * @param $value The element to validate\r\n     * @param errorMessage The error message that will be generated if validation fails\r\n     * @param tags We can define a tag name or list of tags to group the validation results. We can use this tags later to filter validation state\r\n     * @param isWarning Tells if the validation fail will be processed as a validation error or a validation warning\r\n     *\r\n     * @return False in case the validation fails or true if validation succeeds.\r\n     */\r\n    isString(value, errorMessage = 'value is not a string', tags = '', isWarning = false) {\r\n        return this._updateValidationStatus(StringUtils_1.StringUtils.isString(value), errorMessage, tags, isWarning);\r\n    }\r\n    /**\r\n     * Validation will fail if specified value is not an url\r\n     *\r\n     * @param value The element to validate\r\n     * @param errorMessage The error message that will be generated if validation fails\r\n     * @param tags We can define a tag name or list of tags to group the validation results. We can use this tags later to filter validation state\r\n     * @param isWarning Tells if the validation fail will be processed as a validation error or a validation warning\r\n     *\r\n     * @return False in case the validation fails or true if validation succeeds.\r\n     */\r\n    isUrl(value, errorMessage = 'value is not an URL', tags = '', isWarning = false) {\r\n        return this._updateValidationStatus(StringUtils_1.StringUtils.isUrl(value), errorMessage, tags, isWarning);\r\n    }\r\n    /**\r\n     * Validation will fail if specified value is not an array\r\n     *\r\n     * @param value The array to validate\r\n     * @param errorMessage The error message that will be generated if validation fails\r\n     * @param tags We can define a tag name or list of tags to group the validation results. We can use this tags later to filter validation state\r\n     * @param isWarning Tells if the validation fail will be processed as a validation error or a validation warning\r\n     *\r\n     * @return False in case the validation fails or true if validation succeeds.\r\n     */\r\n    isArray(value, errorMessage = 'value is not an array', tags = '', isWarning = false) {\r\n        return this._updateValidationStatus(ArrayUtils_1.ArrayUtils.isArray(value), errorMessage, tags, isWarning);\r\n    }\r\n    /**\r\n     * Validation will fail if specified value is not an object\r\n     *\r\n     * @param value The object to validate\r\n     * @param errorMessage The error message that will be generated if validation fails\r\n     * @param tags We can define a tag name or list of tags to group the validation results. We can use this tags later to filter validation state\r\n     * @param isWarning Tells if the validation fail will be processed as a validation error or a validation warning\r\n     *\r\n     * @return False in case the validation fails or true if validation succeeds.\r\n     */\r\n    isObject(value, errorMessage = 'value is not an object', tags = '', isWarning = false) {\r\n        return this._updateValidationStatus(ObjectUtils_1.ObjectUtils.isObject(value), errorMessage, tags, isWarning);\r\n    }\r\n    /**\r\n     * Validation will fail if specified text is empty.<br>\r\n     * See Stringutils.isEmpty to understand what is considered as an empty text\r\n     *\r\n     * @param value A text that must not be empty.\r\n     * @param emptyChars Optional array containing a list of string values that will be considered as empty for the given string. This can be useful in some cases when we want to consider a string like 'NULL' as an empty string.\r\n     * @param errorMessage The error message that will be generated if validation fails\r\n     * @param tags We can define a tag name or list of tags to group the validation results. We can use this tags later to filter validation state\r\n     * @param isWarning Tells if the validation fail will be processed as a validation error or a validation warning\r\n     *\r\n     * @see Stringutils.isEmpty\r\n     *\r\n     * @return False in case the validation fails or true if validation succeeds.\r\n     */\r\n    isFilledIn(value, emptyChars = [], errorMessage = 'value is required', tags = '', isWarning = false) {\r\n        return this._updateValidationStatus(!StringUtils_1.StringUtils.isEmpty(value, emptyChars), errorMessage, tags, isWarning);\r\n    }\r\n    isDate() {\r\n        // TODO\r\n        return false;\r\n    }\r\n    isMail() {\r\n        // TODO\r\n        return false;\r\n    }\r\n    /**\r\n     * Validation will fail if specified elements are not identical.\r\n     *\r\n     * @param value First of the two objects to compare. Almost any type can be provided: ints, strings, arrays...\r\n     * @param value2 Second of the two objects to compare. Almost any type can be provided: ints, strings, arrays...\r\n     * @param errorMessage The error message that will be generated if validation fails\r\n     * @param tags We can define a tag name or list of tags to group the validation results. We can use this tags later to filter validation state\r\n     * @param isWarning Tells if the validation fail will be processed as a validation error or a validation warning\r\n     *\r\n     * @return False in case the validation fails or true if validation succeeds.\r\n     */\r\n    isEqualTo(value, value2, errorMessage = 'values are not equal', tags = '', isWarning = false) {\r\n        let res = false;\r\n        // Compare elements depending on its type\r\n        if (ArrayUtils_1.ArrayUtils.isArray(value) && ArrayUtils_1.ArrayUtils.isArray(value2)) {\r\n            res = ArrayUtils_1.ArrayUtils.isEqualTo(value, value2);\r\n        }\r\n        else {\r\n            if (ObjectUtils_1.ObjectUtils.isObject(value) && ObjectUtils_1.ObjectUtils.isObject(value2)) {\r\n                res = ObjectUtils_1.ObjectUtils.isEqualTo(value, value2);\r\n            }\r\n            else {\r\n                if (value === value2) {\r\n                    res = true;\r\n                }\r\n            }\r\n        }\r\n        return this._updateValidationStatus(res, errorMessage, tags, isWarning);\r\n    }\r\n    isMinimumWords(string) {\r\n        // TODO\r\n        return string === '';\r\n    }\r\n    isNIF(string) {\r\n        // TODO\r\n        return string === '';\r\n    }\r\n    isMinimumLength(string) {\r\n        // TODO\r\n        return string === '';\r\n    }\r\n    isMaximumLength(string) {\r\n        // TODO\r\n        return string === '';\r\n    }\r\n    isPostalCode(string) {\r\n        // TODO\r\n        return string === '';\r\n    }\r\n    isPhone(string) {\r\n        // TODO\r\n        return string === '';\r\n    }\r\n    isHtmlFormValid(string) {\r\n        // TODO\r\n        return string === '';\r\n    }\r\n    /**\r\n     * Reinitialize the validation status.\r\n     *\r\n     * This is normally called at the beginning of every global validation we perform. It will reset all the validation\r\n     * errors on this class and for all tags, so we can re validate whatever we need to.\r\n     *\r\n     * @returns void\r\n     */\r\n    reset() {\r\n        this._validationStatus = [{\r\n                tag: '',\r\n                status: ValidationManager.OK\r\n            }];\r\n        this._failedMessages = [];\r\n    }\r\n    /**\r\n     * Update the class validation Status depending on the provided error message.\r\n     *\r\n     * @param result the result of the validation\r\n     * @param errorMessage The error message that's been generated from a previously executed validation method\r\n     * @param tags The tag or list of tags that have been defiend for the validation value\r\n     * @param isWarning Tells if the validation fail will be processed as a validation error or a validation warning\r\n     *\r\n     * @return True if received errorMessage was '' (validation passed) or false if some error message was received (validation failed)\r\n     */\r\n    _updateValidationStatus(result, errorMessage, tags = '', isWarning) {\r\n        if (!result) {\r\n            // If specified tags do not exist, we will create them\r\n            let tagsList = ArrayUtils_1.ArrayUtils.isArray(tags) ? tags : [tags];\r\n            for (let t of tagsList) {\r\n                let tagFound = false;\r\n                for (let status of this._validationStatus) {\r\n                    if (status.tag === t) {\r\n                        tagFound = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (!tagFound) {\r\n                    this._validationStatus.push({\r\n                        tag: String(t),\r\n                        status: ValidationManager.OK\r\n                    });\r\n                }\r\n            }\r\n            // We must find the specified tags and change their validation status\r\n            for (let t of tagsList) {\r\n                for (let i = 0; i < this._validationStatus.length; i++) {\r\n                    if (this._validationStatus[i].tag === t) {\r\n                        this._failedMessages.push({ tag: t, message: errorMessage });\r\n                        this._validationStatus[i].status =\r\n                            (isWarning && this._validationStatus[i].status != ValidationManager.ERROR) ?\r\n                                ValidationManager.WARNING :\r\n                                ValidationManager.ERROR;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.ValidationManager = ValidationManager;\r\n/**\r\n * Constant that defines the correct validation status\r\n */\r\nValidationManager.OK = 0;\r\n/**\r\n * Constant that defines the warning validation status\r\n */\r\nValidationManager.WARNING = 1;\r\n/**\r\n * Constant that defines the error validation status\r\n */\r\nValidationManager.ERROR = 2;\r\n//# sourceMappingURL=ValidationManager.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst StringUtils_1 = require(\"../utils/StringUtils\");\r\nconst ObjectUtils_1 = require(\"../utils/ObjectUtils\");\r\nconst ArrayUtils_1 = require(\"../utils/ArrayUtils\");\r\nconst NumericUtils_1 = require(\"../utils/NumericUtils\");\r\n/**\r\n * HashMapObject abstraction\r\n */\r\nclass HashMapObject {\r\n    /**\r\n     * An Object that defines a sorted collection of key/value pairs and all their related operations.\r\n     *\r\n     * @param data A value that will be used to initialize the HashMapObject. It can be an object instance\r\n     * (where each key/value will be directly assigned to the HashMap), or a plain array in which case the keys will be\r\n     * created from each element numeric index\r\n     */\r\n    constructor(data = null) {\r\n        /**\r\n         * Javascript objects specification does not guarantee object keys order. So we must keep\r\n         * a sepparate array with the currently sorted hashmap keys to be sure that sorting is guaranteed\r\n         */\r\n        this._keys = [];\r\n        /**\r\n         * Structure that contains the HashMapObject data\r\n         * Note that javascript objects do not guarantee key order, so we must also keep a\r\n         * sepparate array with the sorted list of keys\r\n         */\r\n        this._data = {};\r\n        /**\r\n         * Stores the number of elements inside the HashMapObject\r\n         */\r\n        this._length = 0;\r\n        if (data == null) {\r\n            return;\r\n        }\r\n        if (ObjectUtils_1.ObjectUtils.isObject(data)) {\r\n            for (var key in data) {\r\n                this.set(String(key), data[key]);\r\n            }\r\n        }\r\n        else {\r\n            if (ArrayUtils_1.ArrayUtils.isArray(data)) {\r\n                let dataCount = data.length;\r\n                for (var i = 0; i < dataCount; i++) {\r\n                    this.set(String(i), data[i]);\r\n                }\r\n            }\r\n            else {\r\n                throw new Error('HashMapObject: invalid data');\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Define a key / value pair and add it to the collection.\r\n     * If the key already exists, value will be replaced.\r\n     *\r\n     * @param key A string that labels the provided value\r\n     * @param value A value to be stored with the provided key\r\n     *\r\n     * @return The value after being stored to the collection\r\n     */\r\n    set(key, value) {\r\n        // Check if key is a non empty string.\r\n        // We use the same logic as StringUtils.isEmpty but with some simplification for better performance\r\n        // This should be a call to this._validateKeyFormat but we inline it here to get a big performance improvement\r\n        if (StringUtils_1.StringUtils.isString(key) && key.replace(/ |\\n|\\r|\\t/gi, '') !== '') {\r\n            if (!this._data.hasOwnProperty(key)) {\r\n                this._keys.push(key);\r\n                this._length++;\r\n            }\r\n            return this._data[key] = value;\r\n        }\r\n        throw new Error('HashMapObject: key must be a non empty string');\r\n    }\r\n    /**\r\n     * Get the number of key/value pairs that are currently stored on this HashMapObject instance\r\n     *\r\n     * @return integer The number of items inside the collection\r\n     */\r\n    length() {\r\n        return this._length;\r\n    }\r\n    /**\r\n     * Get the value that is associated to a key from an existing key/value pair\r\n     *\r\n     * @param key The key we are looking for\r\n     *\r\n     * @throws error If key does not exist or is invalid\r\n     * @return The value that is associated to the provided key\r\n     */\r\n    get(key) {\r\n        if (this._data.hasOwnProperty(key)) {\r\n            return this._data[key];\r\n        }\r\n        throw new Error('HashMapObject->get: key does not exist or is invalid');\r\n    }\r\n    /**\r\n     * Get the value that is located at a certain position at the ordered list of key/pair values\r\n     *\r\n     * @param index The position we are looking for\r\n     *\r\n     * @throws Error If index does not exist or is invalid\r\n     * @return The value that is located at the specified position\r\n     */\r\n    getAt(index) {\r\n        if (typeof index === 'number' && NumericUtils_1.NumericUtils.isInteger(index) && index >= 0 && index < this._length) {\r\n            return this._data[this._keys[index]];\r\n        }\r\n        throw new Error('HashMapObject->getAt: index does not exist or is invalid');\r\n    }\r\n    /**\r\n     * Get a list with all the keys from the HashMapObject with the same order as they are stored.\r\n     *\r\n     * @return List of strings containing all the HashMapObject sorted keys.\r\n     */\r\n    getKeys() {\r\n        return this._keys;\r\n    }\r\n    /**\r\n     * Get a list with all the values from the HashMapObject with the same order as they are stored.\r\n     *\r\n     * @return List of elements containing all the HashMapObject sorted values\r\n     */\r\n    getValues() {\r\n        let result = [];\r\n        // Keys must be strictly converted to strings\r\n        for (var i = 0; i < this._keys.length; i++) {\r\n            result.push(this.get(this._keys[i]));\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Tells if the provided value matches a key that's stored inside the HashMapObject\r\n     *\r\n     * @param A value to find on the currently stored keys.\r\n     *\r\n     * @return True if the provided value is a valid HashMap key, false in any other case\r\n     */\r\n    isKey(key) {\r\n        return StringUtils_1.StringUtils.isString(key) && this._data.hasOwnProperty(key);\r\n    }\r\n    /**\r\n     * Delete a key/value pair from the HashMapObject, given it's key.\r\n     *\r\n     * @param key The key for the key/value pair we want to delete\r\n     *\r\n     * @throws Error\r\n     * @return The value from the key/value pair that's been deleted.\r\n     */\r\n    remove(key) {\r\n        if (this._data.hasOwnProperty(key)) {\r\n            let value = this._data[key];\r\n            delete this._data[key];\r\n            delete this._keys[this._keys.indexOf(key)];\r\n            this._length--;\r\n            return value;\r\n        }\r\n        this._validateKeyFormat(key);\r\n        throw new Error('HashMapObject->rename: key does not exist ' + key);\r\n    }\r\n    /**\r\n     * Change the name for an existing key\r\n     *\r\n     * @param key The name we want to change\r\n     * @param newKey The new name that will replace the previous one\r\n     *\r\n     * @throws Error\r\n     * @return True if rename was successful\r\n     */\r\n    rename(key, newKey) {\r\n        this._validateKeyFormat(key);\r\n        this._validateKeyFormat(newKey);\r\n        if (this.isKey(newKey)) {\r\n            throw new Error('HashMapObject->rename: newKey ' + newKey + ' already exists');\r\n        }\r\n        if (this.isKey(key)) {\r\n            let result = {};\r\n            for (var i = 0; i < this._keys.length; i++) {\r\n                if (this._keys[i] == key) {\r\n                    result[newKey] = this._data[key];\r\n                }\r\n                else {\r\n                    result[this._keys[i]] = this._data[this._keys[i]];\r\n                }\r\n            }\r\n            this._data = result;\r\n            this._keys[this._keys.indexOf(key)] = newKey;\r\n            return true;\r\n        }\r\n        else {\r\n            throw new Error('HashMapObject->rename: key does not exist ' + key);\r\n        }\r\n    }\r\n    /**\r\n     * Exchange the positions for two key/value pairs on the HashMapObject sorted elements list\r\n     *\r\n     * @param key1 The first key to exchange\r\n     * @param key2 The second key to exchange\r\n     *\r\n     * @return True if the two key/value pairs positions were correctly exchanged\r\n     * @throws Error If any of the two provided keys does not exist or is invalid\r\n     */\r\n    swap(key1, key2) {\r\n        this._validateKeyFormat(key1);\r\n        this._validateKeyFormat(key2);\r\n        if (!this.isKey(key1)) {\r\n            throw new Error('HashMapObject->swap: key1 does not exist ' + key1);\r\n        }\r\n        if (!this.isKey(key2)) {\r\n            throw new Error('HashMapObject->swap: key2 does not exist ' + key2);\r\n        }\r\n        let result = {};\r\n        let key1Value = this.get(key1);\r\n        let key2Value = this.get(key2);\r\n        for (var i = 0; i < this._keys.length; i++) {\r\n            switch (this._keys[i]) {\r\n                case key1:\r\n                    result[key2] = key2Value;\r\n                    break;\r\n                case key2:\r\n                    result[key1] = key1Value;\r\n                    break;\r\n                default:\r\n                    result[this._keys[i]] = this._data[this._keys[i]];\r\n                    break;\r\n            }\r\n        }\r\n        this._data = result;\r\n        // Swap keys\r\n        let key1Index = this._keys.indexOf(key1);\r\n        let key2Index = this._keys.indexOf(key2);\r\n        this._keys[key1Index] = key2;\r\n        this._keys[key2Index] = key1;\r\n        return true;\r\n    }\r\n    /**\r\n     * Sort the key/value pairs inside the HashMapObject by their key values.\r\n     *\r\n     * @param method Defines sort mode: HashMapObject.SORT_STRING or HashMapObject.SORT_NUMERIC\r\n     * @param order Defines the order for the sorted elements: HashMapObject.SORT_ORDER_ASCENDING (default) or HashMapObject.SORT_ORDER_DESCENDING\r\n     *\r\n     * @throws Error\r\n     * @return True if sort was successful false on failure\r\n     */\r\n    sortByKey(method = HashMapObject.SORT_METHOD_STRING, order = HashMapObject.SORT_ORDER_ASCENDING) {\r\n        switch (method + order) {\r\n            case HashMapObject.SORT_METHOD_STRING + HashMapObject.SORT_ORDER_ASCENDING:\r\n                this._keys.sort();\r\n                break;\r\n            case HashMapObject.SORT_METHOD_STRING + HashMapObject.SORT_ORDER_DESCENDING:\r\n                this._keys.sort();\r\n                this._keys.reverse();\r\n                break;\r\n            case HashMapObject.SORT_METHOD_NUMERIC + HashMapObject.SORT_ORDER_ASCENDING:\r\n                this._keys.sort((a, b) => { return a - b; });\r\n                break;\r\n            case HashMapObject.SORT_METHOD_NUMERIC + HashMapObject.SORT_ORDER_DESCENDING:\r\n                this._keys.sort((a, b) => { return b - a; });\r\n                break;\r\n            default:\r\n                throw new Error('HashMapObject->sortByKey: Unknown sort method or order');\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Remove and get the first element value from the HashMapObject sorted list\r\n     *\r\n     * @throws Error If the HashMapObject is empty\r\n     * @return The value on the first element of the list\r\n     */\r\n    shift() {\r\n        if (this._length <= 0) {\r\n            throw new Error('HashMapObject->shift: No elements');\r\n        }\r\n        this._length--;\r\n        var result = this._data[this._keys[0]];\r\n        delete this._data[this._keys[0]];\r\n        this._keys.shift();\r\n        return result;\r\n    }\r\n    /**\r\n     * Remove and get the last element value from the HashMapObject sorted list\r\n     *\r\n     * @throws Error If the HashMapObject is empty\r\n     * @return The value on the last element of the list\r\n     */\r\n    pop() {\r\n        if (this._length <= 0) {\r\n            throw new Error('HashMapObject->pop: No elements');\r\n        }\r\n        this._length--;\r\n        var result = this._data[this._keys[this._length]];\r\n        delete this._data[this._keys[this._length]];\r\n        this._keys.pop();\r\n        return result;\r\n    }\r\n    /**\r\n     * Reverse the order of the HashMapObject elements\r\n     *\r\n     * @return void\r\n     */\r\n    reverse() {\r\n        this._keys.reverse();\r\n        return true;\r\n    }\r\n    /**\r\n     * Checks that specified key value has a valid format (Non empty string)\r\n     *\r\n     * @param key The key value to test\r\n     *\r\n     * @throws Error\r\n     *\r\n     * @return void\r\n     */\r\n    _validateKeyFormat(key) {\r\n        // Check if key is a non empty string.\r\n        // We use the same logic as StringUtils.isEmpty but with some simplification for better performance\r\n        if (!StringUtils_1.StringUtils.isString(key) || key.replace(/ |\\n|\\r|\\t/gi, '') == '') {\r\n            throw new Error('HashMapObject: key must be a non empty string');\r\n        }\r\n    }\r\n}\r\nexports.HashMapObject = HashMapObject;\r\n/**\r\n * Sort mode that compares values as strings (alphabetically)\r\n */\r\nHashMapObject.SORT_METHOD_STRING = 'SORT_METHOD_STRING';\r\n/**\r\n * Sort mode that compares values as numbers (Avoid using it with non numeric values)\r\n */\r\nHashMapObject.SORT_METHOD_NUMERIC = 'SORT_METHOD_NUMERIC';\r\n/**\r\n * Defines that elements will be sorted upward\r\n */\r\nHashMapObject.SORT_ORDER_ASCENDING = 'SORT_ORDER_ASCENDING';\r\n/**\r\n * Defines that elements will be sorted downward\r\n */\r\nHashMapObject.SORT_ORDER_DESCENDING = 'SORT_ORDER_DESCENDING';\r\n//# sourceMappingURL=HashMapObject.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Class that defines the base http request to be used with http manager\r\n */\r\nclass HTTPManagerBaseRequest {\r\n    constructor(url, resultFormat = 'STRING', timeout = 0) {\r\n        /**\r\n         * Specifies how the result of the request will be transformed. Possible values are:\r\n         * - HTTPManagerBaseRequest.STRING (See the constant docs for more info)\r\n         * - HTTPManagerBaseRequest.JSON (See the constant docs for more info)\r\n         */\r\n        this.resultFormat = HTTPManagerBaseRequest.STRING;\r\n        /**\r\n         * If set to true, any global POST parameters that may be defined by the http manager which executes this request will be ignored.\r\n         * (exclusively for this request only)\r\n         */\r\n        this.ignoreGlobalPostParams = false;\r\n        /**\r\n         * A method to be executed inmediately after the request execution finishes successfully (200 ok code).\r\n         * The callback function must have the following signature:\r\n         * (response) => void\r\n         * Where the response will be formatted according to how resultFormat is defined\r\n         */\r\n        this.successCallback = () => { };\r\n        /**\r\n         * A method to be executed if an error happens to the request execution.\r\n         * The callback function must have the following signature:\r\n         * (errorMsg:string, errorCode:number, response: string) => void\r\n         *\r\n         * errorMsg will contain the error text, errorCode will contain the numeric error http value and response will contain\r\n         * the main request response body\r\n         */\r\n        this.errorCallback = () => { };\r\n        /**\r\n         * A method to be executed always when the request finishes, even successfully or with an error.\r\n         * (This will be the very last method to be executed, allways after success or error callbacks).\r\n         *\r\n         * The callback function must have the following signature:\r\n         * () => void\r\n         */\r\n        this.finallyCallback = () => { };\r\n        this.url = url;\r\n        this.resultFormat = resultFormat;\r\n        this.timeout = timeout;\r\n    }\r\n}\r\nexports.HTTPManagerBaseRequest = HTTPManagerBaseRequest;\r\n/**\r\n * Defines the string format for the result format property.\r\n * The result of request with this resultFormat will be returned as a raw string containing the exact request response body.\r\n */\r\nHTTPManagerBaseRequest.STRING = 'STRING';\r\n/**\r\n * Defines the json format for the result format property.\r\n * The result of request with this resultFormat will be a native type which will have been decoded from the request response\r\n * body (expecting it to be a valid json string).\r\n */\r\nHTTPManagerBaseRequest.JSON = 'JSON';\r\n//# sourceMappingURL=HTTPManagerBaseRequest.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst HashMapObject_1 = require(\"./HashMapObject\");\r\nconst StringUtils_1 = require(\"../utils/StringUtils\");\r\nconst ArrayUtils_1 = require(\"../utils/ArrayUtils\");\r\nconst ValidationManager_1 = require(\"../managers/ValidationManager\");\r\nconst EncodingUtils_1 = require(\"../utils/EncodingUtils\");\r\n/**\r\n * Object that stores java properties file format data\r\n */\r\nclass JavaPropertiesObject extends HashMapObject_1.HashMapObject {\r\n    /**\r\n     * Create a JavaPropertiesObject instance. Java properties is a text file format that stores data\r\n     * into text files with information that is arranged as key/value pairs.\r\n     * For example: tag1=value1\r\n     *\r\n     * @param string String containing the contents of a .properties Java file.\r\n     * Note that string must be encoded with ISO-8859-1 and strictly follow the Java\r\n     * properties file format (Otherwise results won't be correct).\r\n     *\r\n     * @see HashMapObject\r\n     * @return The java properties object with data accessible as key/value pairs.\r\n     */\r\n    constructor(string = '') {\r\n        super();\r\n        if (!StringUtils_1.StringUtils.isString(string)) {\r\n            throw new Error('value must be a string');\r\n        }\r\n        if (string === '') {\r\n            return;\r\n        }\r\n        // Validate received string\r\n        if (string.length < 2 || string.substr(0, 1) === '=' || string.indexOf('=') < 0 && string.indexOf(':') < 0) {\r\n            throw new Error('invalid properties format');\r\n        }\r\n        let key = '';\r\n        let value = '';\r\n        let isWaitingOtherLine = false;\r\n        // Generate an array with the properties lines, ignoring blank lines and comments\r\n        let lines = StringUtils_1.StringUtils.getLines(string, [/\\s+/g, / *#.*| *!.*/g]);\r\n        for (let line of lines) {\r\n            // Remove all blank spaces at the beginning of the line\r\n            line = StringUtils_1.StringUtils.trimLeft(line);\r\n            if (isWaitingOtherLine) {\r\n                value += EncodingUtils_1.EncodingUtils.unicodeEscapedCharsToUtf8(line);\r\n            }\r\n            else {\r\n                // Find the key/value divider index\r\n                let tmpLine = StringUtils_1.StringUtils.replace(line, ['\\\\=', '\\\\:'], 'xx');\r\n                let keyDividerIndex = Math.min((tmpLine + '=').indexOf('='), (tmpLine + ':').indexOf(':'));\r\n                // Extract the key from the line\r\n                key = line.substring(0, keyDividerIndex).trim();\r\n                // Add a space to the end if the last character is a \\\r\n                if (key.substr(key.length - 1, 1) === '\\\\') {\r\n                    key += ' ';\r\n                }\r\n                key = StringUtils_1.StringUtils.replace(key, ['\\\\\\\\', '\\\\ ', '\\\\#', '\\\\!', '\\\\=', '\\\\:'], ['\\\\', ' ', '#', '!', '=', ':']);\r\n                // Extract the value from the line\r\n                value = StringUtils_1.StringUtils.trimLeft(line.substring(keyDividerIndex + 1, line.length));\r\n            }\r\n            // Unescape escaped slashes and spaces on the value\r\n            value = StringUtils_1.StringUtils.replace(value, ['\\\\\\\\', '\\\\ ', '\\\\r\\\\n', '\\\\n', '\\\\t'], ['\\\\u005C', ' ', \"\\r\\n\", \"\\n\", \"\\t\"]);\r\n            // Check if ends with single '\\'\r\n            if (value.substr(value.length - 1) == '\\\\') {\r\n                // Remove trailing backslash\r\n                value = value.substring(0, value.length - 1);\r\n                isWaitingOtherLine = true;\r\n            }\r\n            else {\r\n                isWaitingOtherLine = false;\r\n                // Decode unicode characters\r\n                value = EncodingUtils_1.EncodingUtils.unicodeEscapedCharsToUtf8(value);\r\n            }\r\n            if (!this._data.hasOwnProperty(key)) {\r\n                this._keys.push(key);\r\n            }\r\n            this._data[key] = value;\r\n        }\r\n        this._length = this._keys.length;\r\n    }\r\n    /**\r\n     * Tells if the given value contains valid Java Properties data information or not\r\n     *\r\n     * @param value A value to check (a string or a JavaPropertiesObject instance)\r\n     *\r\n     * @return true if the given value contains valid Java Properties data, false otherwise\r\n     */\r\n    static isJavaProperties(value) {\r\n        // test that received string contains valid properties info\r\n        try {\r\n            let p = new JavaPropertiesObject(value);\r\n            return p.length() >= 0;\r\n        }\r\n        catch (e) {\r\n            try {\r\n                return (value != null) && (value instanceof JavaPropertiesObject);\r\n            }\r\n            catch (e) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Check if the provided java properties is identical to this instance\r\n     * Only data is compared: Any comment that is found on both provided properties will be ignored.\r\n     *\r\n     * @param properties java properties value to compare (a string or a JavaPropertiesObject instance)\r\n     * @param strictOrder If set to true, both properties elements must have the same keys with the same order. Otherwise differences in key sorting will be accepted\r\n     *\r\n     * @return true if both java properties data is exactly the same, false if not\r\n     */\r\n    isEqualTo(properties, strictOrder = false) {\r\n        let objectToCompare = null;\r\n        try {\r\n            objectToCompare = new JavaPropertiesObject(properties);\r\n        }\r\n        catch (e) {\r\n            try {\r\n                if (properties instanceof JavaPropertiesObject) {\r\n                    objectToCompare = properties;\r\n                }\r\n            }\r\n            catch (e) {\r\n                // Nothing to do\r\n            }\r\n        }\r\n        if (objectToCompare == null) {\r\n            throw new Error('properties does not contain valid java properties data');\r\n        }\r\n        let thisKeys = this.getKeys();\r\n        let keysToCompare = objectToCompare.getKeys();\r\n        if (thisKeys.length != keysToCompare.length || (strictOrder && !ArrayUtils_1.ArrayUtils.isEqualTo(thisKeys, keysToCompare))) {\r\n            return false;\r\n        }\r\n        let validationManager = new ValidationManager_1.ValidationManager();\r\n        for (let key of thisKeys) {\r\n            if (!strictOrder && !objectToCompare.isKey(key)) {\r\n                return false;\r\n            }\r\n            if (!validationManager.isEqualTo(this.get(key), objectToCompare.get(key))) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Generate the textual representation for the java properties data stored on this object.\r\n     * The output of this method is ready to be stored on a physical .properties file.\r\n     *\r\n     * @return A valid Java .properties string ready to be stored on a .properties file\r\n     */\r\n    toString() {\r\n        let result = [];\r\n        let keys = this.getKeys();\r\n        let keysCount = keys.length;\r\n        for (let i = 0; i < keysCount; i++) {\r\n            let key = StringUtils_1.StringUtils.replace(keys[i], ['\\\\', ' ', '#', '!', '=', ':'], ['\\\\\\\\', '\\\\ ', '\\\\#', '\\\\!', '\\\\=', '\\\\:']);\r\n            let value = StringUtils_1.StringUtils.replace(this.get(keys[i]), ['\\\\', ' ', \"\\r\\n\", \"\\n\", \"\\t\"], ['\\\\\\\\', '\\\\ ', '\\\\r\\\\n', '\\\\n', '\\\\t']);\r\n            result.push(key + '=' + EncodingUtils_1.EncodingUtils.utf8ToUnicodeEscapedChars(value));\r\n        }\r\n        return result.join(\"\\r\\n\");\r\n    }\r\n}\r\nexports.JavaPropertiesObject = JavaPropertiesObject;\r\n//# sourceMappingURL=JavaPropertiesObject.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst HTTPManagerBaseRequest_1 = require(\"./HTTPManagerBaseRequest\");\r\n/**\r\n * Class that defines a GET http request, to be used by HttpManager\r\n */\r\nclass HTTPManagerGetRequest extends HTTPManagerBaseRequest_1.HTTPManagerBaseRequest {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * A list of key / value pairs that will be used as parameters for this request\r\n         */\r\n        this.parameters = {};\r\n    }\r\n}\r\nexports.HTTPManagerGetRequest = HTTPManagerGetRequest;\r\n//# sourceMappingURL=HTTPManagerGetRequest.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst StringUtils_1 = require(\"./StringUtils\");\r\n/**\r\n * Utilities related to string and text character encoding,\r\n * converting between formats, and perform common encoding operations.\r\n */\r\nclass EncodingUtils {\r\n    /**\r\n     * Convert a string with unicode escaped sequence of characters (\\u00ed, \\u0110, ....) to an utf8 string.\r\n     *\r\n     * @param string A string containing unicode escaped characters.\r\n     *\r\n     * @returns An utf8 string conversion of the unicode encoded input.\r\n     */\r\n    static unicodeEscapedCharsToUtf8(string) {\r\n        if (StringUtils_1.StringUtils.isString(string)) {\r\n            return string.replace(/\\\\u([\\d\\w]{4})/gi, function (_match, grp) {\r\n                return String.fromCharCode(parseInt(grp, 16));\r\n            });\r\n        }\r\n        throw new Error('Specified value must be a string');\r\n    }\r\n    /**\r\n     * Convert a utf8 string to a string with unicode escaped sequence of characters (\\u00ed, \\u0110, ...).\r\n     *\r\n     * @param string A string containing an utf8 valid sequence.\r\n     *\r\n     * @return A string containing escaped sequences for all the original utf8 characters\r\n     */\r\n    static utf8ToUnicodeEscapedChars(string) {\r\n        if (!StringUtils_1.StringUtils.isString(string)) {\r\n            throw new Error('Specified value must be a string');\r\n        }\r\n        if (StringUtils_1.StringUtils.isEmpty(string)) {\r\n            return string;\r\n        }\r\n        return string.replace(/[^\\0-~]/g, function (ch) {\r\n            return \"\\\\u\" + (\"0000\" + ch.charCodeAt(0).toString(16)).slice(-4);\r\n        });\r\n    }\r\n}\r\nexports.EncodingUtils = EncodingUtils;\r\n//# sourceMappingURL=EncodingUtils.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst StringUtils_1 = require(\"../utils/StringUtils\");\r\nconst ArrayUtils_1 = require(\"../utils/ArrayUtils\");\r\nconst NumericUtils_1 = require(\"../utils/NumericUtils\");\r\nconst HashMapObject_1 = require(\"./HashMapObject\");\r\n/**\r\n * A 2D table structure\r\n */\r\nclass TableObject {\r\n    /**\r\n     * TableObject is an abstraction of a 2D table with X columns and Y rows where each cell can be used to store any kind of data.\r\n     *\r\n     * Columns can be labeled with a textual name which can be used to access them anytime (data can be also accessed via numeric row and column indexes).\r\n     *\r\n     * @param rows The number of rows for the created table (Rows can be added or modified anytime later).\r\n     * @param columns The number of columns to create or an array of strings containing the column labels for all of the columns that will be created (Columns can be added or modified anytime later).\r\n     *\r\n     * @return The constructed TableObject\r\n     */\r\n    constructor(rows = 0, columns = 0) {\r\n        /**\r\n         * Stores the number of columns on the current table instance\r\n         */\r\n        this._columnsCount = 0;\r\n        /**\r\n         * Stores the number of rows on the current table instance\r\n         */\r\n        this._rowsCount = 0;\r\n        if (NumericUtils_1.NumericUtils.isInteger(rows) && rows >= 0) {\r\n            this._rowsCount = rows;\r\n        }\r\n        else {\r\n            throw new Error('constructor rows must be a positive integer');\r\n        }\r\n        if (NumericUtils_1.NumericUtils.isInteger(columns) && columns >= 0) {\r\n            this._columnsCount = Number(columns);\r\n        }\r\n        else {\r\n            if (ArrayUtils_1.ArrayUtils.isArray(columns)) {\r\n                this._columnsCount = columns.length;\r\n                this.setColumnNames(columns);\r\n            }\r\n            else {\r\n                throw new Error('constructor columns must be an integer or an array of strings');\r\n            }\r\n        }\r\n        if ((this._columnsCount + this._rowsCount > 0) && (this._columnsCount == 0 || this._rowsCount == 0)) {\r\n            throw new Error('constructor columns cannot be empty if rows are positive and vice versa');\r\n        }\r\n        this._columnNames = new HashMapObject_1.HashMapObject();\r\n        this._cells = new HashMapObject_1.HashMapObject();\r\n    }\r\n    /**\r\n     * Set the label to an existing table column.\r\n     *\r\n     * @param column An integer or a string containing the index or label for the column to which we want to assign a label\r\n     * @param name The new label that will be assigned to the specified column\r\n     *\r\n     * @return True if the column name was correctly assigned\r\n     */\r\n    setColumnName(column, name) {\r\n        let columnIndex = this._validateColumnIndex(column);\r\n        if (!StringUtils_1.StringUtils.isString(name)) {\r\n            throw new Error('name must be a string');\r\n        }\r\n        this._columnNames.set(String(columnIndex), name);\r\n        return true;\r\n    }\r\n    /**\r\n     * Define the names for the current table columns (Already defined column names will be overriden).\r\n     *\r\n     * @param names List of names that will be applied to the table columns.\r\n     * It must have the same number of items and in the same order as the table columns.\r\n     *\r\n     * @return The list of column names after beign assigned\r\n     */\r\n    setColumnNames(names) {\r\n        if (this._columnsCount == names.length) {\r\n            if (ArrayUtils_1.ArrayUtils.hasDuplicateElements(names)) {\r\n                throw new Error('array must not contain duplicate elements');\r\n            }\r\n            let namesCount = names.length;\r\n            this._columnNames = new HashMapObject_1.HashMapObject();\r\n            for (let i = 0; i < namesCount; i++) {\r\n                if (!StringUtils_1.StringUtils.isString(names[i])) {\r\n                    throw new Error('List of names must be an array of strings');\r\n                }\r\n                this._columnNames.set(String(i), names[i]);\r\n            }\r\n            return names;\r\n        }\r\n        throw new Error('List of names must match number of columns');\r\n    }\r\n    /**\r\n     * Get a list with all the currently defined column names in the same order as they are assigned to the table.\r\n     * If the table contains columns but no names are defined, a list with empty strings will be returned\r\n     *\r\n     * @return A list of strings with the column names\r\n     */\r\n    getColumnNames() {\r\n        let result = [];\r\n        for (let i = 0; i < this._columnsCount; i++) {\r\n            let key = String(i);\r\n            result.push(this._columnNames.isKey(key) ? this._columnNames.get(key) : '');\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Get the defined column name for a given column index\r\n     *\r\n     * @param columnIndex a numeric column index\r\n     *\r\n     * @return The column label for the specified numeric index\r\n     */\r\n    getColumnName(columnIndex) {\r\n        let key = String(this._validateColumnIndex(columnIndex));\r\n        if (this._columnNames.isKey(key)) {\r\n            return this._columnNames.get(key);\r\n        }\r\n        else {\r\n            return '';\r\n        }\r\n    }\r\n    /**\r\n     * Get the numeric column index from it's label\r\n     *\r\n     * @param name The label for an existing column\r\n     *\r\n     * @return The numeric index that is related to the given column label\r\n     */\r\n    getColumnIndex(name) {\r\n        if (!StringUtils_1.StringUtils.isString(name) || name === '') {\r\n            throw new Error('value must be a non empty string');\r\n        }\r\n        let keys = this._columnNames.getKeys();\r\n        for (let key of keys) {\r\n            if (this._columnNames.get(key) === name) {\r\n                return Number(key);\r\n            }\r\n        }\r\n        throw new Error('provided column name does not exist');\r\n    }\r\n    /**\r\n     * Get all the elements that are located at the specified column index or label.\r\n     *\r\n     * @param column An integer or a string containing the index or label for the column that we want to retrieve\r\n     *\r\n     * @return All the table elements that belong to the required column\r\n     */\r\n    getColumn(column) {\r\n        let result = [];\r\n        let columnIndex = this._validateColumnIndex(column);\r\n        for (let i = 0; i < this._rowsCount; i++) {\r\n            result.push(this.getCell(i, columnIndex));\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Add the specified amount of columns to the table.\r\n     *\r\n     * @param number The number of columns that will be added to the table\r\n     * @param names Optionally we can list all the labels to define for the new columns that will be added\r\n     * @param at Defines the column index where the new columns will be inserted. Old columns that are located at the insertion point will not be deleted, they will be moved to the Right. By default all the new columns will be appended at the end of the table unless a positive value is specified here.\r\n     *\r\n     * @return True if the operation was successful\r\n     */\r\n    addColumns(number, names = [], at = -1) {\r\n        if (!ArrayUtils_1.ArrayUtils.isArray(names)) {\r\n            throw new Error('names must be an array');\r\n        }\r\n        if (!NumericUtils_1.NumericUtils.isInteger(number) || number <= 0) {\r\n            throw new Error('number must be a positive integer');\r\n        }\r\n        if (!NumericUtils_1.NumericUtils.isInteger(at) || at < -1 || at >= this._columnsCount) {\r\n            throw new Error('at must be a valid column index');\r\n        }\r\n        if (at >= 0) {\r\n            for (let i = this._columnsCount - 1; i >= at; i--) {\r\n                if (this._columnNames.isKey(String(i))) {\r\n                    this._columnNames.rename(String(i), String(i + number));\r\n                }\r\n                for (let j = 0; j < this._rowsCount; j++) {\r\n                    let rowAndCol = String(j) + '-' + String(i);\r\n                    if (this._cells.isKey(rowAndCol)) {\r\n                        this._cells.rename(rowAndCol, String(j) + '-' + String(i + number));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // Add the new column labels if defined\r\n        let namesCount = names.length;\r\n        if (namesCount > 0) {\r\n            if (namesCount != number) {\r\n                throw new Error('names length must be the same as number');\r\n            }\r\n            let colIndex = at < 0 ? this._columnsCount : at;\r\n            for (let i = 0; i < namesCount; i++) {\r\n                this._columnNames.set(String(colIndex + i), names[i]);\r\n            }\r\n        }\r\n        this._columnsCount += number;\r\n        return true;\r\n    }\r\n    /**\r\n     * Fill the data on all the rows for the given column index or label\r\n     *\r\n     * @param column An integer or a string containing the index or label for the column that we want to fill\r\n     * @param data An array with all the values that will be assigned to the table rows on the specified column. Array length must match rows number\r\n     *\r\n     * @return void\r\n     */\r\n    setColumn(column, data) {\r\n        let dataCount = data.length;\r\n        if (dataCount <= 0) {\r\n            throw new Error('data must not be empty');\r\n        }\r\n        if (this._rowsCount != dataCount) {\r\n            throw new Error('data length and number of rows must match');\r\n        }\r\n        let columnIndex = this._validateColumnIndex(column);\r\n        for (let i = 0; i < this._rowsCount; i++) {\r\n            this.setCell(i, columnIndex, data[i]);\r\n        }\r\n    }\r\n    /**\r\n     * Delete a whole column and all its related data from the table\r\n     *\r\n     * @param column An integer or a string containing the index or label for the column that we want to delete\r\n     *\r\n     * @return void\r\n     */\r\n    removeColumn(column) {\r\n        let columnIndex = this._validateColumnIndex(column);\r\n        // Remove column name if it exists\r\n        if (this._columnNames.isKey(String(columnIndex))) {\r\n            this._columnNames.remove(String(columnIndex));\r\n        }\r\n        // Remove all column values if they exist\r\n        for (let i = 0; i < this._rowsCount; i++) {\r\n            let rowAndCol = String(i) + '-' + String(columnIndex);\r\n            if (this._cells.isKey(rowAndCol)) {\r\n                this._cells.remove(rowAndCol);\r\n            }\r\n        }\r\n        // Update indices for all columns that are after the removed one\r\n        for (let i = columnIndex + 1; i < this._columnsCount; i++) {\r\n            if (this._columnNames.isKey(String(i))) {\r\n                this._columnNames.rename(String(i), String(i - 1));\r\n            }\r\n            for (let j = 0; j < this._rowsCount; j++) {\r\n                let rowAndCol = String(j) + '-' + String(i);\r\n                if (this._cells.isKey(rowAndCol)) {\r\n                    this._cells.rename(rowAndCol, String(j) + '-' + String(i - 1));\r\n                }\r\n            }\r\n        }\r\n        this._columnsCount--;\r\n        if (this._columnsCount <= 0) {\r\n            this._rowsCount = 0;\r\n        }\r\n    }\r\n    /**\r\n     * Get the value contained at the specified table cell\r\n     *\r\n     * @param row An integer containing the index for the row that we want to retrieve\r\n     * @param column An integer or a string containing the index or label for the column that we want to retrieve\r\n     *\r\n     * @return The value for the cell that is located at the specified row and column\r\n     */\r\n    getCell(row, column) {\r\n        let rowIndex = this._validateRowIndex(row);\r\n        let columnIndex = this._validateColumnIndex(column);\r\n        let key = rowIndex + '-' + columnIndex;\r\n        if (this._cells.isKey(key)) {\r\n            return this._cells.get(key);\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    /**\r\n     * Set the value for a table cell\r\n     *\r\n     * @param row An integer containing the index for the row that we want to set\r\n     * @param column An integer or a string containing the index or label for the column that we want to set\r\n     * @param value The value we want to set to the specified cell. Any type is allowed, and different cells can contain values of different types.\r\n     *\r\n     * @return The assigned value after beign stored into the table cell\r\n     */\r\n    setCell(row, column, value) {\r\n        let rowIndex = this._validateRowIndex(row);\r\n        let columnIndex = this._validateColumnIndex(column);\r\n        return this._cells.set(rowIndex + '-' + columnIndex, value);\r\n    }\r\n    /**\r\n     * Get all the elements that are located at the specified row index\r\n     *\r\n     * @param row An integer containing the index for the row that we want to retrieve\r\n     *\r\n     * @return All the table elements that belong to the required row\r\n     */\r\n    getRow(row) {\r\n        let result = [];\r\n        let rowIndex = this._validateRowIndex(row);\r\n        for (let i = 0; i < this._columnsCount; i++) {\r\n            result.push(this.getCell(rowIndex, i));\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Add the specified amount of rows to the table.\r\n     *\r\n     * @param number The number of rows that will be added to the table\r\n     * @param at Defines the row index where the new rows will be inserted. Old rows that are located at the insertion point will not be deleted, they will be moved down. By default all the new rows will be appended at the bottom of the table unless a positive value is specified here.\r\n     *\r\n     * @return True if the operation was successful\r\n     */\r\n    addRows(number, at = -1) {\r\n        if (!NumericUtils_1.NumericUtils.isInteger(number) || number <= 0) {\r\n            throw new Error('number must be a positive integer');\r\n        }\r\n        if (!NumericUtils_1.NumericUtils.isInteger(at) || at < -1 || at >= this._rowsCount) {\r\n            throw new Error('at must be a valid row index');\r\n        }\r\n        if (at >= 0) {\r\n            for (let i = this._rowsCount - 1; i >= at; i--) {\r\n                for (let j = 0; j < this._columnsCount; j++) {\r\n                    let rowAndCol = String(i) + '-' + String(j);\r\n                    if (this._cells.isKey(rowAndCol)) {\r\n                        this._cells.rename(rowAndCol, (i + number) + '-' + String(j));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this._rowsCount += number;\r\n        return true;\r\n    }\r\n    /**\r\n     * Fill all the data for the specified row\r\n     *\r\n     * @param row An integer containing the index for the row that we want to set\r\n     * @param data An array with all the values that will be assigned to the table row. Array length must match columns number\r\n     *\r\n     * @return void\r\n     */\r\n    setRow(row, data) {\r\n        let dataCount = data.length;\r\n        if (dataCount <= 0) {\r\n            throw new Error('data must not be empty');\r\n        }\r\n        if (this._columnsCount != dataCount) {\r\n            throw new Error('data length and number of columns must match');\r\n        }\r\n        let rowIndex = this._validateRowIndex(row);\r\n        for (let i = 0; i < this._columnsCount; i++) {\r\n            this.setCell(rowIndex, i, data[i]);\r\n        }\r\n    }\r\n    /**\r\n     * Delete a whole row and all its related data from the table\r\n     *\r\n     * @param row An integer containing the index for the row that we want to delete\r\n     *\r\n     * @return void\r\n     */\r\n    removeRow(row) {\r\n        let rowIndex = this._validateRowIndex(row);\r\n        // Remove all row values if they exist\r\n        for (let i = 0; i < this._columnsCount; i++) {\r\n            let rowAndCol = String(rowIndex) + '-' + String(i);\r\n            if (this._cells.isKey(rowAndCol)) {\r\n                this._cells.remove(rowAndCol);\r\n            }\r\n        }\r\n        // Update indices for all rows that are after the removed one\r\n        for (let i = rowIndex + 1; i < this._rowsCount; i++) {\r\n            for (let j = 0; j < this._columnsCount; j++) {\r\n                let rowAndCol = String(i) + '-' + String(j);\r\n                if (this._cells.isKey(rowAndCol)) {\r\n                    this._cells.rename(rowAndCol, String(i - 1) + '-' + String(j));\r\n                }\r\n            }\r\n        }\r\n        this._rowsCount--;\r\n        if (this._rowsCount <= 0) {\r\n            this._columnsCount = 0;\r\n        }\r\n    }\r\n    /**\r\n     * Get the total number of rows that are currently available on this table\r\n     *\r\n     * @return The total number of rows on the table\r\n     */\r\n    countRows() {\r\n        return this._rowsCount;\r\n    }\r\n    /**\r\n     * Get the total number of columns that are currently available on this table\r\n     *\r\n     * @return The total number of columns on the table\r\n     */\r\n    countColumns() {\r\n        return this._columnsCount;\r\n    }\r\n    /**\r\n     * Get the total number of cells that are currently available on this table\r\n     *\r\n     * @return The total number of cells on the table\r\n     */\r\n    countCells() {\r\n        return this._rowsCount * this._columnsCount;\r\n    }\r\n    /**\r\n     * Auxiliary method to validate that a given column index or label belongs to the current table\r\n     *\r\n     * @param column An integer or a string containing the index or label for the column that we want to validate\r\n     *\r\n     * @return A valid column index based on the specified integer or label.\r\n     */\r\n    _validateColumnIndex(column) {\r\n        let columnIndex = NumericUtils_1.NumericUtils.isInteger(column) ? Number(column) : -1;\r\n        let columnNames = this._columnNames.getValues();\r\n        let columnNamesKeys = this._columnNames.getKeys();\r\n        let columnNamesCount = columnNames.length;\r\n        if (StringUtils_1.StringUtils.isString(column)) {\r\n            for (let i = 0; i < columnNamesCount; i++) {\r\n                if (column === columnNames[i]) {\r\n                    columnIndex = Number(columnNamesKeys[i]);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (columnIndex < 0 || columnIndex >= this._columnsCount) {\r\n            throw new Error('Invalid column value');\r\n        }\r\n        return columnIndex;\r\n    }\r\n    /**\r\n     * Auxiliary method to validate that a given row index belongs to the current table\r\n     *\r\n     * @param row An integer containing the index for the row that we want to validate\r\n     *\r\n     * @return A valid row index based on the specified integer\r\n     */\r\n    _validateRowIndex(row) {\r\n        let rowIndex = NumericUtils_1.NumericUtils.isInteger(row) ? row : -1;\r\n        if (rowIndex < 0 || rowIndex >= this._rowsCount) {\r\n            throw new Error('Invalid row value');\r\n        }\r\n        return rowIndex;\r\n    }\r\n}\r\nexports.TableObject = TableObject;\r\n//# sourceMappingURL=TableObject.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Managers package\r\nvar BrowserManager_1 = require(\"./managers/BrowserManager\");\r\nexports.BrowserManager = BrowserManager_1.BrowserManager;\r\nvar HTTPManager_1 = require(\"./managers/HTTPManager\");\r\nexports.HTTPManager = HTTPManager_1.HTTPManager;\r\nvar HTTPManagerBaseRequest_1 = require(\"./managers/httpmanager/HTTPManagerBaseRequest\");\r\nexports.HTTPManagerBaseRequest = HTTPManagerBaseRequest_1.HTTPManagerBaseRequest;\r\nvar HTTPManagerGetRequest_1 = require(\"./managers/httpmanager/HTTPManagerGetRequest\");\r\nexports.HTTPManagerGetRequest = HTTPManagerGetRequest_1.HTTPManagerGetRequest;\r\nvar HTTPManagerPostRequest_1 = require(\"./managers/httpmanager/HTTPManagerPostRequest\");\r\nexports.HTTPManagerPostRequest = HTTPManagerPostRequest_1.HTTPManagerPostRequest;\r\nvar LocalizationManager_1 = require(\"./managers/LocalizationManager\");\r\nexports.LocalizationManager = LocalizationManager_1.LocalizationManager;\r\nvar ModelHistoryManager_1 = require(\"./managers/ModelHistoryManager\");\r\nexports.ModelHistoryManager = ModelHistoryManager_1.ModelHistoryManager;\r\nvar SerializationManager_1 = require(\"./managers/SerializationManager\");\r\nexports.SerializationManager = SerializationManager_1.SerializationManager;\r\nvar ValidationManager_1 = require(\"./managers/ValidationManager\");\r\nexports.ValidationManager = ValidationManager_1.ValidationManager;\r\n// Model package\r\nvar BaseStrictClass_1 = require(\"./model/BaseStrictClass\");\r\nexports.BaseStrictClass = BaseStrictClass_1.BaseStrictClass;\r\nvar CSVObject_1 = require(\"./model/CSVObject\");\r\nexports.CSVObject = CSVObject_1.CSVObject;\r\nvar DateTimeObject_1 = require(\"./model/DateTimeObject\");\r\nexports.DateTimeObject = DateTimeObject_1.DateTimeObject;\r\nvar HashMapObject_1 = require(\"./model/HashMapObject\");\r\nexports.HashMapObject = HashMapObject_1.HashMapObject;\r\nvar JavaPropertiesObject_1 = require(\"./model/JavaPropertiesObject\");\r\nexports.JavaPropertiesObject = JavaPropertiesObject_1.JavaPropertiesObject;\r\nvar TableObject_1 = require(\"./model/TableObject\");\r\nexports.TableObject = TableObject_1.TableObject;\r\n// Utils package\r\nvar ArrayUtils_1 = require(\"./utils/ArrayUtils\");\r\nexports.ArrayUtils = ArrayUtils_1.ArrayUtils;\r\nvar ConversionUtils_1 = require(\"./utils/ConversionUtils\");\r\nexports.ConversionUtils = ConversionUtils_1.ConversionUtils;\r\nvar EncodingUtils_1 = require(\"./utils/EncodingUtils\");\r\nexports.EncodingUtils = EncodingUtils_1.EncodingUtils;\r\nvar NumericUtils_1 = require(\"./utils/NumericUtils\");\r\nexports.NumericUtils = NumericUtils_1.NumericUtils;\r\nvar ObjectUtils_1 = require(\"./utils/ObjectUtils\");\r\nexports.ObjectUtils = ObjectUtils_1.ObjectUtils;\r\nvar StringUtils_1 = require(\"./utils/StringUtils\");\r\nexports.StringUtils = StringUtils_1.StringUtils;\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst StringUtils_1 = require(\"../utils/StringUtils\");\r\nconst NumericUtils_1 = require(\"../utils/NumericUtils\");\r\nconst ArrayUtils_1 = require(\"../utils/ArrayUtils\");\r\n/**\r\n * An abstraction of the browser entity an all its related operations and properties\r\n * Browser entity is normally available only on client side or front end view applications,\r\n * but some of its features can also make sense on a server side app. So depending on the\r\n * implementation language, this class may or may not have some of its methods implemented.\r\n */\r\nclass BrowserManager {\r\n    /**\r\n     * Get the current page full url, including 'https://', domain and any uri get parameters\r\n     *\r\n     * @return A well formed url\r\n     */\r\n    getCurrentUrl() {\r\n        return window.location.href;\r\n    }\r\n    /**\r\n     * Tells if the current html document is fully loaded or not.\r\n     *\r\n     * @returns True if the current html document is fully loaded (including all frames, objects and images) or false otherwise.\r\n     */\r\n    isDocumentLoaded() {\r\n        return (document.readyState === \"complete\");\r\n    }\r\n    /**\r\n     * Check if the specified cookie exists\r\n     *\r\n     * @param key the name for the cookie we want to find\r\n     *\r\n     * @returns True if cookie with specified name exists, false otherwise\r\n     */\r\n    isCookie(key) {\r\n        return (this.getCookie(key) !== undefined);\r\n    }\r\n    /**\r\n     * Set the value for a cookie or create it if not exist\r\n     *\r\n     * Adapted from the jquery.cookie plugin by Klaus Hartl: https://github.com/carhartl/jquery-cookie\r\n     *\r\n     * @param key the name for the cookie we want to create\r\n     * @param value the value we want to set to the new cookie.\r\n     * @param expires The lifetime of the cookie. Value can be a `Number` which will be interpreted as days from time of creation or a `Date` object. If omitted or '' string, the cookie becomes a session cookie.\r\n     * @param path Define the path where the cookie is valid. By default it is the whole domain: '/'. A specific path can be passed (/ca/Home/) or a '' string to set it as the current site http path.\r\n     * @param domain Define the domain where the cookie is valid. Default: domain of page where the cookie was created.\r\n     * @param secure If true, the cookie transmission requires a secure protocol (https). Default: false.\r\n     *\r\n     * @returns True if cookie was created, false otherwise. An exception may be thrown if invalid parameters are specified\r\n     */\r\n    setCookie(key, value, expires = '', path = \"/\", domain = '', secure = false) {\r\n        // TODO: Should be interesting to detect if we are going to exceed the total available space for \r\n        // cookies storage before storing the data, to prevent it from silently failing     \r\n        // Empty key means an exception\r\n        if (!StringUtils_1.StringUtils.isString(key) || StringUtils_1.StringUtils.isEmpty(key)) {\r\n            throw new Error(\"key must be defined\");\r\n        }\r\n        // Empty values mean cookie will be created empty\r\n        if (value === undefined || value === null) {\r\n            value = '';\r\n        }\r\n        // Reaching here, non string value means an exception\r\n        if (!StringUtils_1.StringUtils.isString(value)) {\r\n            throw new Error(\"value must be a string\");\r\n        }\r\n        // If the expires parameter is numeric, we will generate the correct date value\r\n        if (NumericUtils_1.NumericUtils.isNumeric(expires)) {\r\n            let days = expires;\r\n            expires = new Date();\r\n            expires.setDate(expires.getDate() + days);\r\n        }\r\n        // Generate the cookie value\r\n        let res = encodeURIComponent(key) + '=' + encodeURIComponent(value);\r\n        res += expires ? '; expires=' + expires.toUTCString() : '';\r\n        res += path ? '; path=' + path : '';\r\n        res += domain ? '; domain=' + domain : '';\r\n        res += secure ? '; secure' : '';\r\n        document.cookie = res;\r\n        return true;\r\n    }\r\n    /**\r\n     * Get the value for an existing cookie.\r\n     *\r\n     * Adapted from the jquery.cookie plugin by Klaus Hartl: https://github.com/carhartl/jquery-cookie\r\n     *\r\n     * @param key the name of the cookie we want to get\r\n     *\r\n     * @returns Cookie value or null if cookie does not exist\r\n     */\r\n    getCookie(key) {\r\n        // Empty key means an exception\r\n        if (!StringUtils_1.StringUtils.isString(key) || StringUtils_1.StringUtils.isEmpty(key)) {\r\n            throw new Error(\"key must be defined\");\r\n        }\r\n        // Get an array with all the page cookies\r\n        let cookies = document.cookie.split('; ');\r\n        let pluses = /\\+/g;\r\n        for (let i = 0, l = cookies.length; i < l; i++) {\r\n            const parts = cookies[i].split('=');\r\n            const part = parts.shift() || '';\r\n            if (decodeURIComponent(part.replace(pluses, ' ')) === key) {\r\n                return decodeURIComponent(parts.join('=').replace(pluses, ' '));\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    /**\r\n     * Deletes the specified cookie from browser. Note that the cookie will only be deleted if belongs to the same path as specified.\r\n     *\r\n     * @param key The name of the cookie we want to delete\r\n     * @param path Define the path where the cookie is set. By default it is the whole domain: '/'. If the cookie is not set on this path, we must pass the right one or the delete will fail.\r\n     *\r\n     * @returns True if cookie was deleted or false if cookie could not be deleted or was not found.\r\n     */\r\n    deleteCookie(key, path = '/') {\r\n        // Empty key means an exception\r\n        if (!StringUtils_1.StringUtils.isString(key) || StringUtils_1.StringUtils.isEmpty(key)) {\r\n            throw new Error(\"key must be defined\");\r\n        }\r\n        if (this.getCookie(key) !== undefined) {\r\n            this.setCookie(key, '', -1, path);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Reloads the current url. This will make the browser load all the current html document again\r\n     * and all page state will be lost.\r\n     *\r\n     * @returns void\r\n     */\r\n    reload() {\r\n        location.reload();\r\n    }\r\n    /**\r\n     * Tries to detect the language that is set as preferred by the user on the current browser.\r\n     * NOTE: Getting browser language is not accurate. It is always better to use server side language detection\r\n     *\r\n     * @returns A two digits string containing the detected browser language. For example 'es', 'en', ...\r\n     */\r\n    getPreferredLanguage() {\r\n        let language = '';\r\n        // Try to get the language on modern browsers support for HTML 5.1 \"navigator.languages\"\r\n        if (ArrayUtils_1.ArrayUtils.isArray(window.navigator['languages'])) {\r\n            for (let i = 0; i < window.navigator['languages'].length; i++) {\r\n                if (window.navigator['languages'][i].length >= 2) {\r\n                    language = window.navigator['languages'][i];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            // support for older browsers\r\n            language = window.navigator['userLanguage'] || window.navigator.language;\r\n            language = language.split(',')[0];\r\n        }\r\n        return language.trim().substr(0, 2).toLowerCase();\r\n    }\r\n    /**\r\n     * Opens the specified url on the browser's current tab or in a new one.\r\n     *\r\n     * @param url The url that will be loaded\r\n     * @param newWindow Setting it to true will open the url on a new browser tab. False by default\r\n     * @param postData If we want to send POST data to the url, we can set this parameter to an object where\r\n     *        each property will be translated to a POST variable name, and each property value to the POST variable value\r\n     *\r\n     * @returns void\r\n     */\r\n    goToUrl(url, newWindow = false, postData = null) {\r\n        if (postData == null) {\r\n            // Check if same or new window is required\r\n            if (newWindow) {\r\n                window.open(url, '_blank');\r\n            }\r\n            else {\r\n                window.location.href = url;\r\n            }\r\n        }\r\n        else {\r\n            // We create a dynamic form that will be used to load the url and also send the required POST data\r\n            let form = document.createElement('form');\r\n            form.action = url;\r\n            form.method = \"POST\";\r\n            form.style.display = \"none\";\r\n            if (newWindow) {\r\n                form.target = \"_blank\";\r\n            }\r\n            let props = Object.getOwnPropertyNames(postData);\r\n            for (let i = 0; i < props.length; i++) {\r\n                let input = document.createElement(\"input\");\r\n                input.type = \"hidden\";\r\n                input.name = props[i];\r\n                input.value = postData[props[i]];\r\n                form.appendChild(input);\r\n            }\r\n            document.body.appendChild(form);\r\n            form.submit();\r\n            if (newWindow) {\r\n                document.body.removeChild(form);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Disable the hability for the user to navigate back on browser history. This method does not disable the\r\n     * browser back button, but it prevents it from leaving the current page.\r\n     *\r\n     * @returns void\r\n     */\r\n    disableBackButton() {\r\n        history.pushState(null, '', document.URL);\r\n        window.addEventListener('popstate', this._onPopStatePreventBackButton);\r\n    }\r\n    /**\r\n     * Event listener that will prevent the back button when disableBackButton is enabled\r\n     */\r\n    _onPopStatePreventBackButton() {\r\n        history.pushState(null, '', document.URL);\r\n    }\r\n    /**\r\n     * Restore the back button normal behaviour which was blocked by calling disableBackButton()\r\n     *\r\n     * @returns void\r\n     */\r\n    enableBackButton() {\r\n        window.removeEventListener('popstate', this._onPopStatePreventBackButton);\r\n    }\r\n    /**\r\n     * Totally disables the current page scrolling. Useful when creating popups or elements that have an internal scroll,\r\n     * and we don't want it to interfere with the main document scroll.<br><br>\r\n     * Can be enabled again with enableScroll.<br><br>\r\n     *\r\n     * @returns void\r\n     */\r\n    disableScroll() {\r\n        // TODO - find a good crossbrowser non jquery solution\r\n    }\r\n    /**\r\n     * Restores main document scrolling if has been disabled with HtmlUtils.disableScroll<br><br>\r\n     *\r\n     * @returns void\r\n     */\r\n    enableScroll() {\r\n        // TODO - find a good crossbrowser non jquery solution\r\n    }\r\n    /**\r\n     * Gives the current position for the browser scroll\r\n     *\r\n     * @returns Array with the current x,y position based on the top left corner of the current document\r\n     */\r\n    getScrollPosition() {\r\n        return [window.pageXOffset, window.pageYOffset];\r\n    }\r\n    /**\r\n     * Obtain the current viewport browser window width value\r\n     *\r\n     * @see https://stackoverflow.com/questions/1248081/get-the-browser-viewport-dimensions-with-javascript\r\n     *\r\n     * @returns A numeric value representing the window width in pixels\r\n     */\r\n    getWindowWidth() {\r\n        return window.innerWidth ||\r\n            document.documentElement.clientWidth ||\r\n            document.getElementsByTagName('body')[0].clientWidth || -1;\r\n    }\r\n    /**\r\n     * Obtain the current viewport browser window height value\r\n     *\r\n     * @see https://stackoverflow.com/questions/1248081/get-the-browser-viewport-dimensions-with-javascript\r\n     *\r\n     * @returns A numeric value representing the window height in pixels\r\n     */\r\n    getWindowHeight() {\r\n        return window.innerHeight ||\r\n            document.documentElement.clientHeight ||\r\n            document.getElementsByTagName('body')[0].clientHeight || -1;\r\n    }\r\n    /**\r\n     * Obtain the current html document width in pixels\r\n     *\r\n     * @returns Numeric value representing the document width in pixels\r\n     */\r\n    getDocumentWidth() {\r\n        return Math.max(document.body.scrollWidth, document.body.offsetWidth, document.documentElement.clientWidth, document.documentElement.scrollWidth, document.documentElement.offsetWidth);\r\n    }\r\n    /**\r\n     * Obtain the current html document height in pixels\r\n     *\r\n     * @returns Numeric value representing the document height in pixels\r\n     */\r\n    getDocumentHeight() {\r\n        return Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight);\r\n    }\r\n    /**\r\n     * Moves the browser scroll to the specified X,Y axis position or DOM element.\r\n     *\r\n     * @example browserManager.scrollTo(document.querySelector('#myId'), 800);\r\n     * @example browserManager.scrollTo([100,200], 1000);\r\n     *\r\n     * @see https://pawelgrzybek.com/page-scroll-in-vanilla-javascript/\r\n     *\r\n     * @param destination The location where the scroll must be moved to. It can be an HTML element instance or an array of two numbers with the [x,y] destination coordinates\r\n     * @param duration The animation duration in miliseconds. Set it to 0 to perform a direct scroll change.\r\n     * @param callback A method that will be executed right after the scroll finishes\r\n     *\r\n     * @returns void\r\n      */\r\n    scrollTo(destination, duration = 600, callback = null) {\r\n        // Define an easeOutCubic function for the scroll movement\r\n        const easingFunction = (t) => { return (--t) * t * t + 1; };\r\n        // Get the current scrollbar positions and system miliseconds\r\n        const startX = window.pageXOffset;\r\n        const startY = window.pageYOffset;\r\n        const startTime = ('now' in window.performance) ? performance.now() : (new Date()).getTime();\r\n        // Obtain the viewport and document dimensions\r\n        const documentWidth = this.getDocumentWidth();\r\n        const documentHeight = this.getDocumentHeight();\r\n        const windowWidth = this.getWindowWidth();\r\n        const windowHeight = this.getWindowHeight();\r\n        // Find the requested destination coordinates depending on the type of the parameter\r\n        const destinationValueX = ArrayUtils_1.ArrayUtils.isArray(destination) ? destination[0] : destination.offsetLeft;\r\n        const destinationValueY = ArrayUtils_1.ArrayUtils.isArray(destination) ? destination[1] : destination.offsetTop;\r\n        // Calculate the real value where scrollbars must move\r\n        let destinationX = startX;\r\n        let destinationY = startY;\r\n        if (documentWidth > windowWidth) {\r\n            destinationX = Math.round(documentWidth - destinationValueX < windowWidth ? documentWidth - windowWidth : destinationValueX);\r\n        }\r\n        if (documentHeight > windowHeight) {\r\n            destinationY = Math.round(documentHeight - destinationValueY < windowHeight ? documentHeight - windowHeight : destinationValueY);\r\n        }\r\n        // If requestAnimationFrame is not available, we will simply perform the scroll without any animation\r\n        if ('requestAnimationFrame' in window === false) {\r\n            window.scroll(destinationX, destinationY);\r\n            if (callback) {\r\n                callback();\r\n            }\r\n            return;\r\n        }\r\n        // Define a method that will perform the scroll animation\r\n        function animate() {\r\n            const now = ('now' in window.performance) ? performance.now() : (new Date()).getTime();\r\n            const time = Math.min(1, ((now - startTime) / duration));\r\n            const x = Math.ceil(easingFunction(time) * (destinationX - startX) + startX);\r\n            const y = Math.ceil(easingFunction(time) * (destinationY - startY) + startY);\r\n            window.scroll(x, y);\r\n            if (Math.ceil(window.pageXOffset) === destinationX && Math.ceil(window.pageYOffset) === destinationY) {\r\n                if (callback !== null) {\r\n                    callback();\r\n                }\r\n                return;\r\n            }\r\n            requestAnimationFrame(animate);\r\n        }\r\n        animate();\r\n    }\r\n}\r\nexports.BrowserManager = BrowserManager;\r\n//# sourceMappingURL=BrowserManager.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst StringUtils_1 = require(\"../utils/StringUtils\");\r\nconst ObjectUtils_1 = require(\"../utils/ObjectUtils\");\r\nconst ArrayUtils_1 = require(\"../utils/ArrayUtils\");\r\nconst HashMapObject_1 = require(\"../model/HashMapObject\");\r\nconst HTTPManagerGetRequest_1 = require(\"./httpmanager/HTTPManagerGetRequest\");\r\nconst HTTPManagerBaseRequest_1 = require(\"./httpmanager/HTTPManagerBaseRequest\");\r\n/**\r\n * Class that contains functionalities related to the HTTP protocol and its most common requests\r\n */\r\nclass HTTPManager {\r\n    /**\r\n     * Class that contains functionalities related to the HTTP protocol and its most common requests\r\n     *\r\n     * @param asynchronous Specify if the HTTP manager instance will work in asynchronous or synchronous mode.\r\n     * (Synchronous mode is NOT recommended on client side languages)\r\n     */\r\n    constructor(asynchronous = true) {\r\n        /**\r\n         * If we want to use relative urls on all the requests that are executed by this class, we can define here a root\r\n         * url. All the request urls will then be composed as baseUrl + requestUrl.\r\n         *\r\n         * This property is useful when all the requests in our application share the same root url, which can be defined here.\r\n         */\r\n        this.baseUrl = '';\r\n        /**\r\n         * Defines if the http comunications made by this class will be synchronous (code execution will be stopped while\r\n         * waiting for the response) or asynchronous (execution flow will continue and response will be processed once received)\r\n         * Note: Synchronous requests are normally NOT, NOT a good idea on client side languages\r\n         */\r\n        this.asynchronous = true;\r\n        /**\r\n         * Defines how much miliseconds will the http requests wait before failing with a timeout.\r\n         * If set to 0, no value will be specifically defined, so the platform default will be used.\r\n         */\r\n        this.timeout = 0;\r\n        /**\r\n         * If this flag is enabled, any request that is made by this service which uses http:// instead of https:// will throw\r\n         * an exception. When disabled, non secure http:// requests will be allowed\r\n         */\r\n        this.isOnlyHttps = true;\r\n        /**\r\n         * Defines a list with internet urls that will be used to test network availability by the\r\n         * isInternetAvailable() method. We mainly use globally available CDN urls, cause these are\r\n         * not blocked by cross-orining policies on the browsers and are widely available and replicated.\r\n         * It may be interesting to add your own server side url at the bengining of this list, so it will\r\n         * be the first one to be tested, and you will also check that your server is correctly responding.\r\n         * Note that when an url request is successful, process ends and internet connection is considered\r\n         * to be working.\r\n         */\r\n        this.internetCheckLocations = ['https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js',\r\n            'https://ajax.aspnetcdn.com/ajax/modernizr/modernizr-2.8.3.js',\r\n            'https://code.jquery.com/jquery-3.2.1.slim.min.js'];\r\n        /**\r\n         * Structure containing all the created request queues and their status\r\n         */\r\n        this._queues = [];\r\n        /**\r\n         * A list of key value pairs that define post parameters that will be sent ALWAYS with all the requests that are\r\n         * performed by this class. We can use this feature for example to always send a token to web services, or other\r\n         * globally sent post values\r\n         */\r\n        this._globalPostParams = {};\r\n        if (typeof asynchronous !== 'boolean') {\r\n            throw new Error('asynchronous is not boolean');\r\n        }\r\n        this.asynchronous = asynchronous;\r\n    }\r\n    /**\r\n     * Set the value for a POST parameter that will be stored as a global POST parameter which will be always\r\n     * sent with all the http manager requests\r\n     *\r\n     * @param parameterName The name of the POST parameter that will be always sent to all the http requests\r\n     * @param value The value that the POST parameter will have\r\n     */\r\n    setGlobalPostParam(parameterName, value) {\r\n        if (StringUtils_1.StringUtils.isEmpty(parameterName) || StringUtils_1.StringUtils.isEmpty(value)) {\r\n            throw new Error('parameterName and value must be non empty strings');\r\n        }\r\n        this._globalPostParams[parameterName] = value;\r\n    }\r\n    /**\r\n     * Check if the specified parameter name is defined as a global POST parameter\r\n     *\r\n     * @param parameterName The name of the POST parameter that we want to check\r\n     *\r\n     * @return True if the parameter exists, false otherwise\r\n     */\r\n    isGlobalPostParam(parameterName) {\r\n        if (StringUtils_1.StringUtils.isEmpty(parameterName)) {\r\n            throw new Error('parameterName must be a non empty string');\r\n        }\r\n        return Object.keys(this._globalPostParams).indexOf(parameterName) >= 0;\r\n    }\r\n    /**\r\n     * Get the value for a previously defined global POST parameter\r\n     *\r\n     * @param parameterName The name of the POST parameter that we want to read\r\n     *\r\n     * @return The parameter value\r\n     */\r\n    getGlobalPostParam(parameterName) {\r\n        if (!this.isGlobalPostParam(parameterName)) {\r\n            throw new Error('parameterName does not exist: ' + parameterName);\r\n        }\r\n        return this._globalPostParams[parameterName];\r\n    }\r\n    /**\r\n     * Delete a previously created global POST parameter so it is not sent with all the http manager requests anymore\r\n     *\r\n     * @param parameterName The name of the POST parameter that will be deleted\r\n     */\r\n    deleteGlobalPostParam(parameterName) {\r\n        if (this.getGlobalPostParam(parameterName) !== '') {\r\n            delete this._globalPostParams[parameterName];\r\n        }\r\n    }\r\n    /**\r\n     * Create a new http queue. Requests can then be added to this queue with the queue() method.\r\n     *\r\n     * @param name The name we want to define for this queue\r\n     *\r\n     * @see this.queue()\r\n     *\r\n     * @returns void\r\n     */\r\n    createQueue(name) {\r\n        if (StringUtils_1.StringUtils.isEmpty(name)) {\r\n            throw new Error('name must be a non empty string');\r\n        }\r\n        for (let queue of this._queues) {\r\n            if (queue.name === name) {\r\n                throw new Error(`queue ${name} already exists`);\r\n            }\r\n        }\r\n        this._queues.push({ name: name, isRunning: false, pendingRequests: [] });\r\n    }\r\n    /**\r\n     * Get the number of created queues. Some may be running and some may be not\r\n     *\r\n     * @see this.queue()\r\n     *\r\n     * @return The number of existing queues\r\n     */\r\n    countQueues() {\r\n        return this._queues.length;\r\n    }\r\n    /**\r\n     * Check if the specified queue is currently executing http requests\r\n     *\r\n     * @param name The name for the queue we want to check\r\n     *\r\n     * @see this.queue()\r\n     *\r\n     * @return boolean True if the specified queue is actually running its http requests\r\n     */\r\n    isQueueRunning(name) {\r\n        if (StringUtils_1.StringUtils.isEmpty(name)) {\r\n            throw new Error('name must be a non empty string');\r\n        }\r\n        for (let queue of this._queues) {\r\n            if (queue.name === name) {\r\n                return queue.isRunning;\r\n            }\r\n        }\r\n        throw new Error(`queue ${name} does not exist`);\r\n    }\r\n    /**\r\n     * Remove the specified queue from this manager.\r\n     * Make sure the queue is not running when calling this method, or an exception will happen\r\n     *\r\n     * @param name The name for the queue we want to remove\r\n     *\r\n     * @see this.queue()\r\n     *\r\n     * @return void\r\n     */\r\n    deleteQueue(name) {\r\n        if (StringUtils_1.StringUtils.isEmpty(name)) {\r\n            throw new Error('name must be a non empty string');\r\n        }\r\n        for (var i = 0; i < this._queues.length; i++) {\r\n            if (this._queues[i].name === name) {\r\n                if (this._queues[i].isRunning) {\r\n                    throw new Error(`queue ${name} is currently running`);\r\n                }\r\n                this._queues.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n        throw new Error(`queue ${name} does not exist`);\r\n    }\r\n    /**\r\n     * This method generates a GET url query from a set of key/value pairs\r\n     *\r\n     * A query string is the part of an url that contains the GET parameters. It is placed after\r\n     * the ? symbol and contains a list of parameters and values that are sent to the url.\r\n     *\r\n     * @param keyValuePairs An object or a HashMapObject containing key/value pairs that will be used to construct the query string.\r\n     *        Note that when a value is an object or array, it will be encoded as a JSON string on the resulting query\r\n     *\r\n     * @see https://en.wikipedia.org/wiki/Query_string\r\n     * @see HashMapObject\r\n     *\r\n     * @return A valid query string that can be used with any url: http://www.url.com?query_string (Note that ? symbol is not included)\r\n     */\r\n    generateUrlQueryString(keyValuePairs) {\r\n        let result = '';\r\n        let keys = [];\r\n        let values = [];\r\n        if (ObjectUtils_1.ObjectUtils.isObject(keyValuePairs) && ObjectUtils_1.ObjectUtils.getKeys(keyValuePairs).length > 0) {\r\n            if (keyValuePairs instanceof HashMapObject_1.HashMapObject) {\r\n                keys = keyValuePairs.getKeys();\r\n                values = keyValuePairs.getValues();\r\n            }\r\n            else {\r\n                keys = Object.getOwnPropertyNames(keyValuePairs);\r\n                for (var i = 0; i < keys.length; i++) {\r\n                    values.push(keyValuePairs[keys[i]]);\r\n                }\r\n            }\r\n            for (var i = 0; i < keys.length; i++) {\r\n                result += '&' + encodeURIComponent(keys[i]) + '=' + encodeURIComponent(StringUtils_1.StringUtils.isString(values[i]) ? values[i] : JSON.stringify(values[i]));\r\n            }\r\n            return result.substring(1, result.length);\r\n        }\r\n        throw new Error('keyValuePairs must be a HashMapObject or a non empty Object');\r\n    }\r\n    /**\r\n     * Tells if there's currently a working internet connection available or not.\r\n     *\r\n     * @param yesCallback Executed if the internet connection is available and working\r\n     * @param noCallback Executed if the internet connection is NOT available\r\n     *\r\n     * @return void\r\n     */\r\n    isInternetAvailable(yesCallback, noCallback) {\r\n        if (typeof yesCallback !== 'function' || typeof noCallback !== 'function') {\r\n            throw new Error('params must be functions');\r\n        }\r\n        if (this.internetCheckLocations.length <= 0) {\r\n            throw new Error('no check locations specified');\r\n        }\r\n        // A recursive function that will loop all the defined list of urls to check\r\n        // And execute the appropiate result callback\r\n        let recursiveUrlTest = (urls) => {\r\n            if (urls.length <= 0) {\r\n                return noCallback();\r\n            }\r\n            let url = urls.shift();\r\n            if (!StringUtils_1.StringUtils.isUrl(url)) {\r\n                throw new Error(\"invalid check url : \" + url);\r\n            }\r\n            // We must prevent the browser cache from giving false positives, so we generate\r\n            // an url containing a random GET parameter\r\n            this.urlExists(String(url + '?r=' + StringUtils_1.StringUtils.generateRandom(15, 15)), yesCallback, () => recursiveUrlTest(urls));\r\n        };\r\n        if (navigator.onLine === false) {\r\n            // Navigator.online is only fiable when it returns false. If it returns true, we still need to\r\n            // test the internet connectivity by performing a real check via recursiveUrlTest\r\n            noCallback();\r\n        }\r\n        else {\r\n            // Note that we use slice to create a clone of the array to prevent it from being modified\r\n            // by the recursive method\r\n            recursiveUrlTest(this.internetCheckLocations.slice(0));\r\n        }\r\n    }\r\n    /**\r\n     * Test if the specified url exists by trying to connect to it.\r\n     * Note that crossdomain security rules may prevent this method from working correctly if you try\r\n     * to check the existence of an url that does not allow CORS outside your application domain.\r\n     *\r\n     * @param url A full valid internet address to check\r\n     * @param yesCallback Executed if the url exists\r\n     * @param noCallback Executed if the url does not exist (or is not accessible).\r\n     *\r\n     * @return void\r\n     */\r\n    urlExists(url, yesCallback, noCallback) {\r\n        if (!StringUtils_1.StringUtils.isString(url)) {\r\n            throw new Error('url must be a string');\r\n        }\r\n        if (typeof yesCallback !== 'function' || typeof noCallback !== 'function') {\r\n            throw new Error('params must be functions');\r\n        }\r\n        let composedUrl = this._composeUrl(this.baseUrl, url);\r\n        if (!StringUtils_1.StringUtils.isUrl(composedUrl)) {\r\n            noCallback();\r\n            return;\r\n        }\r\n        let request = new HTTPManagerGetRequest_1.HTTPManagerGetRequest(composedUrl);\r\n        request.successCallback = () => yesCallback();\r\n        request.errorCallback = () => noCallback();\r\n        this.execute(request);\r\n    }\r\n    /**\r\n     * Get the Http headers for a given url.\r\n     * Note that crossdomain security rules may prevent this method from working correctly\r\n     *\r\n     * @param url The url for which we want to get the http headers.\r\n     * @param successCallback Executed when headers are read. An array of strings will be passed to this method\r\n     *        containing all the read headers with each header line as an array element.\r\n     * @param errorCallback Executed if headers cannot be read. A string containing the error description and the error\r\n     *        code will be passed to this method.\r\n     *\r\n     * @return void\r\n     */\r\n    getUrlHeaders(url, successCallback, errorCallback) {\r\n        let composedUrl = this._composeUrl(this.baseUrl, url);\r\n        if (!StringUtils_1.StringUtils.isString(composedUrl)) {\r\n            throw new Error('url must be a string');\r\n        }\r\n        if (typeof successCallback !== 'function' || typeof errorCallback !== 'function') {\r\n            throw new Error('params must be functions');\r\n        }\r\n        if (!StringUtils_1.StringUtils.isUrl(composedUrl)) {\r\n            throw new Error('invalid url ' + composedUrl);\r\n        }\r\n        let xmlHttprequest = new XMLHttpRequest();\r\n        if (this.timeout > 0) {\r\n            xmlHttprequest.timeout = this.timeout;\r\n        }\r\n        xmlHttprequest.open('GET', composedUrl, this.asynchronous);\r\n        xmlHttprequest.onload = () => successCallback(xmlHttprequest.getAllResponseHeaders().split(\"\\n\"));\r\n        xmlHttprequest.onerror = () => errorCallback(xmlHttprequest.statusText, xmlHttprequest.status);\r\n        xmlHttprequest.ontimeout = () => errorCallback(this.timeout + HTTPManager.ERROR_TIMEOUT, 408);\r\n        this._executeXmlHttprequestSend(xmlHttprequest, composedUrl);\r\n    }\r\n    /**\r\n     * Launch one or more http requests without caring about their execution order.\r\n     *\r\n     * @param requests One or more requests to be inmediately launched (at the same time if possible). Each request can be defined as a string\r\n     *        that will be used as a GET request url, or as an HTTPManagerBaseRequest instance in case we want to define parameters and callbacks.\r\n     * @param finishedCallback A method to be executed once all the http requests have finished (either succesfully or with errors). The callback will\r\n     *        receive two parameters: results (an array with information about each request result in the same order as provided to this method) and\r\n     *        anyError (true if any of the requests has failed)\r\n     * @param progressCallback Executed after each one of the urls finishes (either successfully or with an error). A string with the requested url and\r\n     *        the total requests to perform will be passed to this method.\r\n     *\r\n     * @return void\r\n     */\r\n    execute(requests, finishedCallback = null, progressCallback = null) {\r\n        let requestsList = this._generateValidRequestsList(requests);\r\n        // Validate callbacks are ok\r\n        if ((finishedCallback !== null && !(finishedCallback instanceof Function)) ||\r\n            (progressCallback !== null && !(progressCallback instanceof Function))) {\r\n            throw new Error('finishedCallback and progressCallback must be functions');\r\n        }\r\n        let finishedCount = 0;\r\n        let finishedAnyError = false;\r\n        let finishedResults = [];\r\n        // A method that will be executed every time a request is finished (even successfully or with errors)\r\n        const processFinishedRequest = (requestWithIndex, response, isError, errorMsg, code) => {\r\n            let request = requestWithIndex.request;\r\n            let composedUrl = this._composeUrl(this.baseUrl, request.url);\r\n            let formattedResponse = response;\r\n            if (request.resultFormat === HTTPManagerBaseRequest_1.HTTPManagerBaseRequest.JSON) {\r\n                try {\r\n                    formattedResponse = JSON.parse(response);\r\n                }\r\n                catch (e) {\r\n                    if (!isError) {\r\n                        isError = true;\r\n                        errorMsg = 'Could not parse request result as a json string';\r\n                    }\r\n                }\r\n            }\r\n            finishedCount++;\r\n            finishedResults[requestWithIndex.index] = { url: composedUrl,\r\n                response: formattedResponse,\r\n                isError: isError,\r\n                errorMsg: errorMsg,\r\n                code: code };\r\n            if (isError) {\r\n                finishedAnyError = true;\r\n                request.errorCallback(errorMsg, code, response);\r\n            }\r\n            else {\r\n                request.successCallback(formattedResponse);\r\n            }\r\n            request.finallyCallback();\r\n            if (progressCallback !== null) {\r\n                progressCallback(composedUrl, requestsList.length);\r\n            }\r\n            if (finishedCount >= requestsList.length && finishedCallback !== null) {\r\n                finishedCallback(finishedResults, finishedAnyError);\r\n            }\r\n        };\r\n        // Execute each one of the received requests and process their results\r\n        for (let i = 0; i < requestsList.length; i++) {\r\n            let requestWithIndex = { index: i, request: requestsList[i] };\r\n            if (!StringUtils_1.StringUtils.isString(requestsList[i].url) || StringUtils_1.StringUtils.isEmpty(requestsList[i].url)) {\r\n                throw new Error(`url ${i} must be a non empty string`);\r\n            }\r\n            let xmlHttprequest;\r\n            try {\r\n                xmlHttprequest = new XMLHttpRequest();\r\n            }\r\n            catch (e) {\r\n                throw new Error(\"Could not initialize XMLHttpRequest. If running node, it is not natively available. We recommend npm xhr2 library that emulates XMLHttpRequest on node apps (global.XMLHttpRequest = require('xhr2'))\");\r\n            }\r\n            // Define the request timeout if specified on the request or the httpmanager class\r\n            if (requestsList[i].timeout > 0 || this.timeout > 0) {\r\n                xmlHttprequest.timeout = requestsList[i].timeout > 0 ? requestsList[i].timeout : this.timeout;\r\n            }\r\n            // Detect the request type\r\n            let composedUrl = this._composeUrl(this.baseUrl, requestsList[i].url);\r\n            let requestType = requestsList[i] instanceof HTTPManagerGetRequest_1.HTTPManagerGetRequest ? 'GET' : 'POST';\r\n            xmlHttprequest.open(requestType, composedUrl, this.asynchronous);\r\n            xmlHttprequest.onload = () => {\r\n                if (xmlHttprequest.status >= 200 && xmlHttprequest.status < 400) {\r\n                    processFinishedRequest(requestWithIndex, xmlHttprequest.responseText, false, '', xmlHttprequest.status);\r\n                }\r\n                else {\r\n                    processFinishedRequest(requestWithIndex, xmlHttprequest.responseText, true, xmlHttprequest.statusText, xmlHttprequest.status);\r\n                }\r\n            };\r\n            xmlHttprequest.onerror = () => {\r\n                processFinishedRequest(requestWithIndex, xmlHttprequest.responseText, true, xmlHttprequest.statusText, xmlHttprequest.status);\r\n            };\r\n            xmlHttprequest.ontimeout = () => {\r\n                processFinishedRequest(requestWithIndex, xmlHttprequest.responseText, true, this.timeout + HTTPManager.ERROR_TIMEOUT, 408);\r\n            };\r\n            // Encode the GET request parameters if any and run the request\r\n            if (requestType === 'GET') {\r\n                // TODO - implement the GET request params\r\n                this._executeXmlHttprequestSend(xmlHttprequest, composedUrl);\r\n            }\r\n            // Encode the POST request parameters if any and run the request\r\n            if (requestType === 'POST' || Object.keys(this._globalPostParams).length > 0) {\r\n                try {\r\n                    let postParamsToSend = (requestType === 'POST') ? requestsList[i].parameters : {};\r\n                    // Add the global post parameters if any has been defined\r\n                    if (requestsList[i].ignoreGlobalPostParams === false) {\r\n                        for (let globalPostParam of Object.keys(this._globalPostParams)) {\r\n                            if (postParamsToSend instanceof HashMapObject_1.HashMapObject) {\r\n                                postParamsToSend.set(globalPostParam, this._globalPostParams[globalPostParam]);\r\n                            }\r\n                            else {\r\n                                postParamsToSend[globalPostParam] = this._globalPostParams[globalPostParam];\r\n                            }\r\n                        }\r\n                    }\r\n                    xmlHttprequest.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\r\n                    xmlHttprequest.send(this.generateUrlQueryString(postParamsToSend));\r\n                }\r\n                catch (e) {\r\n                    this._executeXmlHttprequestSend(xmlHttprequest, composedUrl);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Auxiliary method to call the send method for an XMLHttpRequest with more explanatory error checking\r\n     *\r\n     * NOTE: this method is exclusive for the typescript / javascript versions of turbocommons\r\n     */\r\n    _executeXmlHttprequestSend(xmlHttprequest, url) {\r\n        try {\r\n            xmlHttprequest.send();\r\n        }\r\n        catch (e) {\r\n            throw new Error('HTTPManager could not execute request to ' + url + '\\n' + e.toString());\r\n        }\r\n    }\r\n    /**\r\n     * Auxiliary method to generate a valid list of HTTPManagerBaseRequest instances from multiple sources\r\n     */\r\n    _generateValidRequestsList(requests) {\r\n        // Convert the received requests to a standarized array of HTTPManagerBaseRequest instances\r\n        let requestsList = [];\r\n        if (ArrayUtils_1.ArrayUtils.isArray(requests)) {\r\n            if (requests.length <= 0) {\r\n                throw new Error('No requests to execute');\r\n            }\r\n            for (let requestItem of requests) {\r\n                if (StringUtils_1.StringUtils.isString(requestItem)) {\r\n                    requestsList.push(new HTTPManagerGetRequest_1.HTTPManagerGetRequest(requestItem));\r\n                }\r\n                else {\r\n                    requestsList.push(requestItem);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (StringUtils_1.StringUtils.isString(requests) && !StringUtils_1.StringUtils.isEmpty(requests)) {\r\n                requestsList = [new HTTPManagerGetRequest_1.HTTPManagerGetRequest(requests)];\r\n            }\r\n            else if (requests instanceof HTTPManagerBaseRequest_1.HTTPManagerBaseRequest) {\r\n                requestsList = [requests];\r\n            }\r\n            else {\r\n                throw new Error('Invalid requests value');\r\n            }\r\n        }\r\n        return requestsList;\r\n    }\r\n    /**\r\n     * Sequentially launch one or more http requests to the specified queue, one after the other.\r\n     * Each request will start inmediately after the previous one is finished (either succesfully or with an error).\r\n     * We can have several independent queues that run their requests at the same time.\r\n     *\r\n     * @param requests One or more requests that must be added to the specified queue. Each request can be defined as a string\r\n     *        that will be used as a GET request url, or as an HTTPManagerBaseRequest instance in case we want to define parameters and callbacks.\r\n     *        Requests will be sequentially executed one after the other in the same order. If the specified queue contains requests\r\n     *        that have not finished yet, they will be executed before the ones provided here.\r\n     * @param queueName The name for an existing queue (created with this.createQueue()) where the specified requests will be added\r\n     * @param finishedAllCallback A method that will be executed once all the queued requests by this method have finished. Note that\r\n     *        if the specified queue already contains running requests, the current ones will be added to be executed after and\r\n     *        when all have finished, this method will be called.\r\n     *\r\n     * @returns void\r\n     */\r\n    queue(requests, queueName, finishedCallback = null) {\r\n        // TODO - this method is almost finished, but some things are pending:\r\n        // 1- FinishedCallback should work the same way as the execute method, and give us the results data and info\r\n        // 2- There should be a progressCallback method\r\n        // 3- Extensive tests must be written: verify requests are sequentially executed one after the other, and all\r\n        //    the rest of the expected behaviour\r\n        let requestsList = this._generateValidRequestsList(requests);\r\n        // Validate callbacks are ok\r\n        if ((finishedCallback !== null && !(finishedCallback instanceof Function))) {\r\n            throw new Error('finishedCallback and progressCallback must be functions');\r\n        }\r\n        for (let queue of this._queues) {\r\n            if (queue.name === queueName) {\r\n                // Add all the received requests to the beginning of the queue pending array\r\n                for (var i = 0; i < requestsList.length; i++) {\r\n                    queue.pendingRequests.unshift(requestsList[i]);\r\n                }\r\n                // Add a dummy request with a special url, containing the finished callback method\r\n                // to be executed after all the requests are done\r\n                if (finishedCallback !== null) {\r\n                    let dummyRequest = new HTTPManagerGetRequest_1.HTTPManagerGetRequest('FINISHED_REQUEST_CALLBACK');\r\n                    dummyRequest.finallyCallback = finishedCallback;\r\n                    queue.pendingRequests.unshift(dummyRequest);\r\n                }\r\n                // Run the queue if it is not already processing requests\r\n                if (!this.isQueueRunning(queueName)) {\r\n                    this._startQueue(queueName);\r\n                }\r\n                return;\r\n            }\r\n        }\r\n        throw new Error(`queue ${queueName} does not exist. Create it with createQueue()`);\r\n    }\r\n    /**\r\n     * Auxiliary method that is used to begin executing the http requests that are pending on the specified queue.\r\n     * A recursive operation will be used to launch the next http request once the previous has totally finished.\r\n     *\r\n     * @param name The name for the queue we want to start\r\n     *\r\n     * @returns void\r\n     */\r\n    _startQueue(name) {\r\n        // Recursive method that will perform the calls to the queue requests\r\n        let runRequests = (queue) => {\r\n            if (queue.pendingRequests.length <= 0) {\r\n                queue.isRunning = false;\r\n            }\r\n            else {\r\n                // Check if a finished queue callback must be called\r\n                if (queue.pendingRequests[queue.pendingRequests.length - 1].url === 'FINISHED_REQUEST_CALLBACK') {\r\n                    let finallyCallback = queue.pendingRequests.pop();\r\n                    if (queue.pendingRequests.length <= 0) {\r\n                        queue.isRunning = false;\r\n                    }\r\n                    finallyCallback.finallyCallback();\r\n                }\r\n                if (queue.pendingRequests.length > 0) {\r\n                    queue.isRunning = true;\r\n                    this.execute(queue.pendingRequests.pop(), () => runRequests(queue));\r\n                }\r\n            }\r\n        };\r\n        // Find the requested queue and start the recursive execution on it\r\n        for (let queue of this._queues) {\r\n            if (queue.name === name) {\r\n                runRequests(queue);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Given a url with a list of resources (normally files), this method will perform a request for each one of them and\r\n     * store the whole file contents as an element of a result array. After all the process completes, the array containing all the loaded\r\n     * data will be available by the successCallback method.\r\n     *\r\n     * This is a technique that allows us to read a big list of files from an http server without needing to\r\n     * write much code. We simply put the files on the server, create a list with all the file names, provide the base url for all the files,\r\n     * and call this method. When the process succeeds, we will have all the files data loaded and ready to be used. We have also a progress callback\r\n     * that will notify us when each one of the files is correctly loaded.\r\n     *\r\n     * @param urlToListOfResources An url that gives us the list of resources to be loaded (normally a plain list of file names)\r\n     * @param baseUrl A url that will be used as the root for all the files of the list when the load is performed. This usually is the path\r\n     *                 to the url folder that contains the files. Each request to a file will be composed with this baseUrl + the respective entry of the file\r\n     *                 on urlToListOfResources\r\n     * @param successCallback Executed once all the resources have been loaded. Two parameters will be passed to this method: An array with\r\n     *                        The list of resources as they are defined on the urlToListOfResources, and an array containing all the data for each\r\n     *                        one of these resources.\r\n     * @param errorCallback Executed if a failure happens on any of the requests. The url that caused the error,\r\n     *                      the error description and the error code will be passed to this method.\r\n     * @param progressCallback Executed after each one of the resources is correctly loaded. A string with the correctly\r\n     *                         requested url will be passed to this method.\r\n     *\r\n     * @returns void\r\n     */\r\n    loadResourcesFromList(urlToListOfResources, baseUrl, successCallback, errorCallback, progressCallback = null) {\r\n        if (!StringUtils_1.StringUtils.isString(urlToListOfResources) || StringUtils_1.StringUtils.isEmpty(urlToListOfResources)) {\r\n            throw new Error('urlToListOfResources must be a non empty string');\r\n        }\r\n        if (!StringUtils_1.StringUtils.isString(baseUrl) || StringUtils_1.StringUtils.isEmpty(baseUrl)) {\r\n            throw new Error('baseUrl must be a non empty string');\r\n        }\r\n        this.execute(urlToListOfResources, (results, _anyError) => {\r\n            if (results[0].isError) {\r\n                return errorCallback(urlToListOfResources, results[0].errorMsg, results[0].code);\r\n            }\r\n            let resourcesFullUrls = [];\r\n            var resourcesList = StringUtils_1.StringUtils.getLines(results[0].response);\r\n            for (var resource of resourcesList) {\r\n                resourcesFullUrls.push(StringUtils_1.StringUtils.formatPath(this._composeUrl(baseUrl, resource), '/'));\r\n            }\r\n            this.execute(resourcesFullUrls, (results, _anyError) => {\r\n                let resultsData = [];\r\n                for (let result of results) {\r\n                    if (result.isError) {\r\n                        return errorCallback(result.url, result.errorMsg, result.code);\r\n                    }\r\n                    resultsData.push(result.response);\r\n                }\r\n                successCallback(resourcesList, resultsData);\r\n            }, progressCallback);\r\n        });\r\n    }\r\n    /**\r\n     * Auxiliary method to join two urls: A base one, and a relative one\r\n     *\r\n     * If a full absolute url is passed to the relativeUrl variable, the result of this method will be the relative one, ignoring\r\n     * any possible value on baseUrl.\r\n     */\r\n    _composeUrl(baseUrl, relativeUrl) {\r\n        let composedUrl = '';\r\n        if (StringUtils_1.StringUtils.isEmpty(baseUrl) ||\r\n            relativeUrl.substr(0, 5) === 'http:' ||\r\n            relativeUrl.substr(0, 6) === 'https:') {\r\n            composedUrl = relativeUrl;\r\n        }\r\n        else {\r\n            composedUrl = StringUtils_1.StringUtils.replace(StringUtils_1.StringUtils.formatPath(baseUrl + '/' + relativeUrl, '/'), ['http:/', 'https:/'], ['http://', 'https://'], 1);\r\n        }\r\n        if (this.isOnlyHttps && composedUrl.substr(0, 5).toLowerCase() === 'http:') {\r\n            throw new Error('Non secure http requests are forbidden. Set isOnlyHttps=false to allow ' + composedUrl);\r\n        }\r\n        return composedUrl;\r\n    }\r\n}\r\nexports.HTTPManager = HTTPManager;\r\n/**\r\n * Error message that is used when a timeout happens\r\n */\r\nHTTPManager.ERROR_TIMEOUT = ' ms Timeout reached';\r\n//# sourceMappingURL=HTTPManager.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst HTTPManagerBaseRequest_1 = require(\"./HTTPManagerBaseRequest\");\r\n/**\r\n * Class that defines a POST http request, to be used by HttpManager\r\n */\r\nclass HTTPManagerPostRequest extends HTTPManagerBaseRequest_1.HTTPManagerBaseRequest {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * A list of key / value pairs that will be sent as POST parameters for the request.\r\n         *\r\n         * String is the default format for these values, so if any of the parameters specified here is not a string, it will be\r\n         * passed through a JSON encoder to obtaion the string that will be sent to the request.\r\n         */\r\n        this.parameters = {};\r\n    }\r\n}\r\nexports.HTTPManagerPostRequest = HTTPManagerPostRequest;\r\n//# sourceMappingURL=HTTPManagerPostRequest.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst StringUtils_1 = require(\"../utils/StringUtils\");\r\nconst ArrayUtils_1 = require(\"../utils/ArrayUtils\");\r\nconst JavaPropertiesObject_1 = require(\"../model/JavaPropertiesObject\");\r\n/**\r\n * Fully featured translation manager to be used with any application that requires text internationalization.\r\n */\r\nclass LocalizationManager {\r\n    constructor() {\r\n        /**\r\n         * Defines the behaviour for get(), getStartCase(), etc... methods when a key is not found on\r\n         * a bundle or the bundle does not exist\r\n         *\r\n         * If this value is empty, all missing keys will return an empty value\r\n         * If this value contains a string, all missing keys will return that string\r\n         * If this value contains a string with some of the following wildcards:\r\n         *    - $key will be replaced with the key name. For example: get(\"NAME\") will output [NAME] if the key is not found and missingKeyFormat = '[$key]'\r\n         *    - $exception (This is the default value) will throw an exception with the problem cause description.\r\n         */\r\n        this.missingKeyFormat = '$exception';\r\n        /**\r\n         * Wildcards are string fragments that are placed inside the translated texts. Their main purpose is to be replaced at\r\n         * runtime by custom values like for example a user name, a date, a numeric value, etc..\r\n         *\r\n         * This class helps with this process by including a parameter called 'toReplace' on all .get methods which allows us\r\n         * to specify a string or list of strings that will replace the respective wildcards on the translated text. Each wildcard\r\n         * must follow the format specified here, and contain a numeric digit that will be used to find the replacement text at the\r\n         * 'toReplace' list. For example, if we define $N as the wildcard format, and we have a translation that contains $0, $1, $2,\r\n         * $0 will be replaced with the first element on toReplace, $1 with the second and so.\r\n         *\r\n         * Note that N is mandayory on the wildcards format and the first index value is 0.\r\n         */\r\n        this.wildCardsFormat = '{N}';\r\n        /**\r\n         * If set to true, when we call any get method from this class to retrieve a translated text, we will be forced\r\n         * to provide the bundle for the key we are looking for. If set to false, only the key parameter will be required.\r\n         */\r\n        this.isBundleMandatory = false;\r\n        /**\r\n         * Tells if the class has been initialized or not\r\n         */\r\n        this._initialized = false;\r\n        /**\r\n         * @see this.locales()\r\n         */\r\n        this._locales = [];\r\n        /**\r\n         * @see this.languages()\r\n         */\r\n        this._languages = [];\r\n        /**\r\n         * Stores the latest resource bundle that's been used to read a localized value.\r\n         * This is used by default when calling get without a bundle value\r\n         */\r\n        this._activeBundle = '';\r\n        /**\r\n         * Stores the label for the latest location that's been used to read a localized value\r\n         * This is used by default when calling get without a location value\r\n         */\r\n        this._activeLocation = '';\r\n        /**\r\n         * Stores all the provided location definitions\r\n         */\r\n        this._definedLocations = [];\r\n        /**\r\n         * Stores all the loaded localization data by location name, locales, bundle and key\r\n         */\r\n        this._loadedTranslations = {};\r\n        /**\r\n         * A files manager instance used to load the data when paths are from file system.\r\n         *\r\n         * (Note that FilesManager class is part of the TurboDepot library)\r\n         */\r\n        this._filesManager = null;\r\n        /**\r\n         * An http manager instance used to load the data when paths are urls\r\n         */\r\n        this._httpManager = null;\r\n    }\r\n    /**\r\n     * Check if the class has been correctly initialized\r\n     */\r\n    isInitialized() {\r\n        return this._initialized;\r\n    }\r\n    /**\r\n     * Checks if the specified locale is currently loaded for the currently defined bundles and paths.\r\n     *\r\n     * @param locale A locale to check. For example 'en_US'\r\n     *\r\n     * @return True if the locale is currently loaded on the class, false if not.\r\n     */\r\n    isLocaleLoaded(locale) {\r\n        return (this._locales.indexOf(locale) >= 0);\r\n    }\r\n    /**\r\n     * Checks if the specified 2 digit language is currently loaded for the currently defined bundles and paths.\r\n     *\r\n     * @param language A language to check. For example 'en'\r\n     *\r\n     * @return True if the language is currently loaded on the class, false if not.\r\n     */\r\n    isLanguageLoaded(language) {\r\n        if (language.length !== 2) {\r\n            throw new Error('language must be a valid 2 digit value');\r\n        }\r\n        return (this._languages.indexOf(language) >= 0);\r\n    }\r\n    /**\r\n     * Performs the initial data load by looking for resource bundles on all the specified locations.\r\n     * All the translations will be loaded for each of the specified locales.\r\n     *\r\n     * Calling this method is mandatory before starting to use this class.\r\n     *\r\n     * @param locationsLoader An instance of HTTPManager or FilesManager that will be used to load the provided locations. If we are working\r\n     *        with paths that are urls, we will pass here an HTTPManager. If we are working with file system paths, we will pass a FilesManager.\r\n     *        (Note that FilesManager class is part of the TurboDepot library)\r\n     * @param locales List of languages for which we want to load the translations. The list also defines the preferred\r\n     *        translation order when a specified key is not found for a locale.\r\n     * @param locations A list (sorted by preference) where each item defines a translations location and must have three properties:\r\n     *        - label: A name that will be used to reference the location\r\n     *        - path: A relative or absolute string that defines a location where resourcebundles reside. It must contain some wildcards:\r\n     *          - $locale wildcard will be replaced by each specific locale when trying to reach a path\r\n     *          - $bundle wildcard will be replaced by each specific bundle name when trying to reach a path\r\n     *              Example1: 'myFolder/$locale/$bundle.txt' will resolve to\r\n     *                        'myFolder/en_US/Customers.txt' when trying to load the Customers bundle for US english locale.\r\n     *              Example2: 'myFolder/$bundle_$locale.properties' will resolve to\r\n     *                        'myFolder/Customers_en_US.properties' when trying to load the Customers bundle for US english locale.\r\n     *        - bundles: The list of bundles to be loaded from the specified path\r\n     * @param finishedCallback A method that will be executed once the initialization ends. An errors variable will be passed\r\n     *        to this method containing an array with information on errors that may have happened while loading the data.\r\n     * @param progressCallback A method that can be used to track the loading progress when lots of bundles and locales are used.\r\n     *\r\n     * @return void\r\n     */\r\n    initialize(locationsLoader, locales, locations, finishedCallback = null, progressCallback = null) {\r\n        if (locationsLoader) {\r\n            this._httpManager = locationsLoader;\r\n        }\r\n        else {\r\n            this._filesManager = locationsLoader;\r\n        }\r\n        this._locales = [];\r\n        this._languages = [];\r\n        this._activeBundle = '';\r\n        this._activeLocation = '';\r\n        this._definedLocations = locations;\r\n        this._loadedTranslations = {};\r\n        // Validate the locations are correctly defined\r\n        if (!ArrayUtils_1.ArrayUtils.isArray(locations) || locations.length <= 0) {\r\n            throw new Error('Locations must be an array of objects');\r\n        }\r\n        for (let location of locations) {\r\n            if (!location.label || StringUtils_1.StringUtils.isEmpty(location.label) ||\r\n                !location.path || StringUtils_1.StringUtils.isEmpty(location.path) ||\r\n                !location.bundles || !ArrayUtils_1.ArrayUtils.isArray(location.bundles)) {\r\n                throw new Error('Invalid locations specified');\r\n            }\r\n        }\r\n        this._loadData(locales, locations.map((l) => { return { label: l.label, bundles: l.bundles }; }), (errors) => {\r\n            this._initialized = true;\r\n            if (finishedCallback !== null) {\r\n                finishedCallback(errors);\r\n            }\r\n        }, progressCallback);\r\n    }\r\n    /**\r\n     * Adds extra locales to the end of the list of currently active locales and load its related translation data.\r\n     *\r\n     * This method can only be called after the class has been initialized in case we need to load the translations for more languages.\r\n     * If any of the provided new locales is already loaded, its translation data will be refreshed\r\n     *\r\n     * @param locales List of languages for which we want to load the translations. The list will be appended at the end of any previously\r\n     *        loaded locales and included in the preferred translation order. The translation data will be loaded from all the currently defined locations.\r\n     * @param finishedCallback A method that will be executed once the load ends. An errors variable will be passed\r\n     *        to this method containing an array with information on errors that may have happened while loading the data.\r\n     * @param progressCallback A method that can be used to track the loading progress when lots of bundles and locales are used.\r\n     *\r\n     * @return void\r\n     */\r\n    loadLocales(locales, finishedCallback = null, progressCallback = null) {\r\n        if (!this._initialized) {\r\n            throw new Error('LocalizationManager not initialized. Call initialize() before loading more locales');\r\n        }\r\n        this._loadData(locales, this._definedLocations.map((l) => { return { label: l.label, bundles: l.bundles }; }), finishedCallback, progressCallback);\r\n    }\r\n    /**\r\n     * Loads on the specified location the translation data for the specified bundles.\r\n     * This method can only be called after the class has been initialized in case we need to refresh or add more bundles to an already loaded location.\r\n     *\r\n     * @param bundles List of bundles to load from the specified location\r\n     * @param location The label for an already defined location. The extra bundles translation data will be added to the already loaded ones. If not defined,\r\n     *        the current active location will be used.\r\n     * @param finishedCallback A method that will be executed once the load ends. An errors variable will be passed\r\n     *        to this method containing an array with information on errors that may have happened while loading the data.\r\n     * @param progressCallback A method that can be used to track the loading progress when lots of bundles and locales are used.\r\n     *\r\n     * @see this.initialize()\r\n     *\r\n     * @return void\r\n     */\r\n    loadBundles(bundles, location = '', finishedCallback = null, progressCallback = null) {\r\n        if (!ArrayUtils_1.ArrayUtils.isArray(bundles) || bundles.length === 0) {\r\n            throw new Error('no bundles specified to load on ' + location + ' location');\r\n        }\r\n        if (!this._initialized) {\r\n            throw new Error('LocalizationManager not initialized. Call initialize() before loading more bundles to a location');\r\n        }\r\n        // If no location specified, use the active one\r\n        if (location === '') {\r\n            location = this._activeLocation;\r\n        }\r\n        this._loadData(this._locales, [{ label: location, bundles: bundles }], finishedCallback, progressCallback);\r\n    }\r\n    /**\r\n     * Auxiliary method used to perform the translation data load\r\n     *\r\n     * @see this.initialize()\r\n     *\r\n     * @param locales List of locales to load\r\n     * @param locations A list of locations and respective bundles to be loaded\r\n     * @param finishedCallback A method that will be executed once the load ends. An errors variable will be passed\r\n     *        to this method containing an array with information on errors that may have happened while loading the data.\r\n     * @param progressCallback Executed after each request is performed\r\n     */\r\n    _loadData(locales, locations, finishedCallback = null, progressCallback = null) {\r\n        if (!ArrayUtils_1.ArrayUtils.isArray(locales) || locales.length <= 0) {\r\n            throw new Error('no locales defined');\r\n        }\r\n        // Generate the list of paths to be loaded\r\n        let pathsToLoad = [];\r\n        let pathsToLoadInfo = [];\r\n        for (let location of locations) {\r\n            for (let bundle of location.bundles) {\r\n                for (let locale of locales) {\r\n                    let locationFound = false;\r\n                    for (let definedLocation of this._definedLocations) {\r\n                        if (definedLocation.label === location.label) {\r\n                            locationFound = true;\r\n                            pathsToLoadInfo.push({ locale: locale, bundle: bundle, location: location.label });\r\n                            pathsToLoad.push(StringUtils_1.StringUtils.replace(definedLocation.path, ['$locale', '$bundle'], [locale, bundle]));\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (!locationFound) {\r\n                        throw new Error('Undefined location: ' + location.label);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this._locales = this._locales.concat(locales);\r\n        this._locales = ArrayUtils_1.ArrayUtils.removeDuplicateElements(this._locales);\r\n        this._languages = this._locales.map(l => l.substr(0, 2));\r\n        if (this._activeLocation === '') {\r\n            this._activeLocation = locations[locations.length - 1].label;\r\n        }\r\n        if (this._filesManager !== null) {\r\n            // TODO this._loadDataFromFiles(pathsToLoad, pathsToLoadInfo, finishedCallback, progressCallback);\r\n        }\r\n        else {\r\n            this._loadDataFromUrls(pathsToLoad, pathsToLoadInfo, finishedCallback, progressCallback);\r\n        }\r\n    }\r\n    /**\r\n     * Perform the paths load from file system\r\n     *\r\n     * @param pathsToLoad list of paths that need to be loaded\r\n     * @param pathsToLoadInfo original info about the paths to load\r\n     * @param finishedCallback method to execute once finished\r\n     * @param progressCallback method to execute after each path is loaded\r\n     */\r\n    //    private _loadDataFromFiles(pathsToLoad: string[],\r\n    //                               pathsToLoadInfo: any[],\r\n    //                               finishedCallback: ((errors: {path:string, errorMsg:string, errorCode:number}[]) => void) | null = null,\r\n    //                               progressCallback: ((completedUrl: string, totalUrls: number) => void) | null = null){\r\n    //        \r\n    //        // TODO\r\n    //        // Use the filesManager instance to load all the locales from the specified paths\r\n    //    }\r\n    /**\r\n     * Perform the paths load from urls\r\n     *\r\n     * @param pathsToLoad list of paths that need to be loaded\r\n     * @param pathsToLoadInfo original info about the paths to load\r\n     * @param finishedCallback method to execute once finished\r\n     * @param progressCallback method to execute after each path is loaded\r\n     */\r\n    _loadDataFromUrls(pathsToLoad, pathsToLoadInfo, finishedCallback = null, progressCallback = null) {\r\n        // Aux method to execute when data load is done\r\n        let processWhenDone = (errors = []) => {\r\n            if (pathsToLoadInfo.length > 0) {\r\n                this._activeBundle = pathsToLoadInfo[pathsToLoadInfo.length - 1].bundle;\r\n            }\r\n            if (finishedCallback !== null) {\r\n                finishedCallback(errors);\r\n            }\r\n        };\r\n        if (pathsToLoad.length <= 0) {\r\n            processWhenDone();\r\n            return;\r\n        }\r\n        this._httpManager.execute(pathsToLoad, (results, _anyError) => {\r\n            let errors = [];\r\n            for (let i = 0; i < results.length; i++) {\r\n                if (results[i].isError) {\r\n                    errors.push({\r\n                        path: results[i].url,\r\n                        errorMsg: results[i].errorMsg,\r\n                        errorCode: results[i].code\r\n                    });\r\n                }\r\n                else {\r\n                    let locale = pathsToLoadInfo[i].locale;\r\n                    let bundle = pathsToLoadInfo[i].bundle;\r\n                    let location = pathsToLoadInfo[i].location;\r\n                    let bundleFormat = StringUtils_1.StringUtils.getPathExtension(pathsToLoad[i]);\r\n                    if (!this._loadedTranslations.hasOwnProperty(location)) {\r\n                        this._loadedTranslations[location] = {};\r\n                    }\r\n                    if (!this._loadedTranslations[location].hasOwnProperty(locale)) {\r\n                        this._loadedTranslations[location][locale] = {};\r\n                    }\r\n                    this._loadedTranslations[location][locale][bundle] = bundleFormat === 'json' ?\r\n                        this.parseJson(results[i].response) :\r\n                        this.parseProperties(results[i].response);\r\n                }\r\n            }\r\n            processWhenDone(errors);\r\n        }, (completedUrl, totalRequests) => {\r\n            if (progressCallback !== null) {\r\n                progressCallback(completedUrl, totalRequests);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * A list of strings containing the locales that are used by this class to translate the given keys, sorted by preference.\r\n     * Each string is formatted as a standard locale code with language and country joined by an underscore, like: en_US, fr_FR\r\n     *\r\n     * When a key and bundle are requested for translation, the class will check on the first language of this\r\n     * list for a translated text. If missing, the next one will be used, and so. This list is constructed after the initialize\r\n     * or loadLocales methods are called.\r\n     *\r\n     * @example: After loading the following list of locales ['en_US', 'es_ES', 'fr_FR'] if we call localizationManager.get('HELLO', 'Greetings')\r\n     * the localization manager will try to locate the en_US value for the HELLO tag on the Greetings bundle. If the tag is not found for the\r\n     * specified locale and bundle, the same search will be performed for the es_ES locale, and so, till a value is found or no more locales\r\n     * are defined.\r\n     */\r\n    locales() {\r\n        return this._locales;\r\n    }\r\n    /**\r\n     * A list of strings containing the languages that are used by this class to translate the given keys, sorted by preference.\r\n     * Each string is formatted as a 2 digit language code, like: en, fr\r\n     *\r\n     * This list is the same as the locales() one, but containing only the language part of each locale (the first two digits)\r\n     *\r\n     * @see this.locales()\r\n     */\r\n    languages() {\r\n        return this._languages;\r\n    }\r\n    /**\r\n     * Get the bundle that is currently being used by default when traslating texts\r\n     *\r\n     * @return The name for the currently active bundle\r\n     */\r\n    activeBundle() {\r\n        return this._activeBundle;\r\n    }\r\n    /**\r\n     * Get the first locale from the list of loaded locales, which is the currently used to search for translated texts.\r\n     *\r\n     * @return The locale that is defined as the primary one. For example: en_US, es_ES, ..\r\n     */\r\n    primaryLocale() {\r\n        if (!this._initialized) {\r\n            throw new Error('LocalizationManager not initialized');\r\n        }\r\n        return this._locales[0];\r\n    }\r\n    /**\r\n     * Get the first language from the list of loaded locales, which is the currently used to search for translated texts.\r\n     *\r\n     * @return The 2 digit language code that is defined as the primary one. For example: en, es, ..\r\n     */\r\n    primaryLanguage() {\r\n        if (!this._initialized) {\r\n            throw new Error('LocalizationManager not initialized');\r\n        }\r\n        return this._languages[0];\r\n    }\r\n    /**\r\n     * Define the bundle that is used by default when no bundle is specified on the get methods\r\n     *\r\n     * @param bundle A currently loaded bundle to be used as the active one\r\n     *\r\n     * @return void\r\n     */\r\n    setActiveBundle(bundle) {\r\n        for (let location of Object.keys(this._loadedTranslations)) {\r\n            for (let locale of Object.keys(this._loadedTranslations[location])) {\r\n                if (Object.keys(this._loadedTranslations[location][locale]).indexOf(bundle) >= 0) {\r\n                    this._activeBundle = bundle;\r\n                    this._activeLocation = location;\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        throw new Error('Bundle <' + bundle + '> not loaded');\r\n    }\r\n    /**\r\n     * Define the locale that will be placed at the front of the currently loaded locales list (moving all the others one position to the right).\r\n     *\r\n     * This will be the first locale to use when trying to get a translation.\r\n     *\r\n     * @param locale A currently loaded locale that will be moved to the first position of the loaded locales list. If the specified locale\r\n     *        is not currently loaded, an exception will happen.\r\n     *\r\n     * @return void\r\n     */\r\n    setPrimaryLocale(locale) {\r\n        if (!StringUtils_1.StringUtils.isString(locale)) {\r\n            throw new Error('Invalid locale value');\r\n        }\r\n        if (!this.isLocaleLoaded(locale)) {\r\n            throw new Error(locale + ' not loaded');\r\n        }\r\n        let result = [locale];\r\n        for (let l of this._locales) {\r\n            if (l !== locale) {\r\n                result.push(l);\r\n            }\r\n        }\r\n        this._locales = result;\r\n        this._languages = this._locales.map(l => l.substr(0, 2));\r\n    }\r\n    /**\r\n     * Moves the specified locales to the beginning of the locales list. This also alters the translation priority by setting the first\r\n     * provided locale as the most prioritary, the second as the next one and so.\r\n     *\r\n     * This method basically works exactly the same way as setPrimaryLocale but letting us add many locales at once.\r\n     *\r\n     * @see LocalizationManager.setPrimaryLocale()\r\n     *\r\n     * @param locales A list of locales to be moved to the beginning of the translation priority. First locales item will be the prefered\r\n     *        locale for translation, second will be the next one in case some key is not translated for the first one and so. If any of the\r\n     *        specified locales is not currently loaded, an exception will happen.\r\n     *\r\n     * @return void\r\n     */\r\n    setPrimaryLocales(locales) {\r\n        if (!ArrayUtils_1.ArrayUtils.isArray(locales) ||\r\n            ArrayUtils_1.ArrayUtils.hasDuplicateElements(locales) ||\r\n            locales.length <= 0) {\r\n            throw new Error('locales must be non empty string array with no duplicate elements');\r\n        }\r\n        for (var i = locales.length - 1; i >= 0; i--) {\r\n            this.setPrimaryLocale(locales[i]);\r\n        }\r\n    }\r\n    /**\r\n     * Define the 2 digit language that will be placed at the front of the currently loaded locales list (moving all the others one position to the right).\r\n     *\r\n     * This will be the first language to use when trying to get a translation.\r\n     *\r\n     * @param language A 2 digit language code that matches with any of the currently loaded locales, which will\r\n     *        be moved to the first position of the loaded locales list. If the specified language does not match with\r\n     *        a locale that is currently loaded, an exception will happen.\r\n     *\r\n     * @return void\r\n     */\r\n    setPrimaryLanguage(language) {\r\n        for (let locale of this._locales) {\r\n            if (locale.substr(0, 2) === language) {\r\n                return this.setPrimaryLocale(locale);\r\n            }\r\n        }\r\n        throw new Error(language + ' not loaded');\r\n    }\r\n    /**\r\n     * Moves the locales that match the specified languages to the beginning of the locales list.\r\n     * Works the same as setPrimaryLocales() but with a list of the 2 digit language codes that match the respective locales.\r\n     *\r\n     * @see LocalizationManager.setPrimaryLocale()\r\n     * @see LocalizationManager.setPrimaryLanguage()\r\n     *\r\n     * @param languages A list of 2 digit language codes to be moved to the beginning of the translation priority. If any of the\r\n     *        specified languages does not match with a locale that is currently loaded, an exception will happen.\r\n     *\r\n     * @return void\r\n     */\r\n    setPrimaryLanguages(languages) {\r\n        if (!ArrayUtils_1.ArrayUtils.isArray(languages) ||\r\n            ArrayUtils_1.ArrayUtils.hasDuplicateElements(languages) ||\r\n            languages.length <= 0) {\r\n            throw new Error('languages must be non empty string array with no duplicate elements');\r\n        }\r\n        for (var i = languages.length - 1; i >= 0; i--) {\r\n            this.setPrimaryLanguage(languages[i]);\r\n        }\r\n    }\r\n    /**\r\n     * Change the loaded locales translation preference order. The same locales that are currently loaded must be passed\r\n     * but with a different order to change the translation priority.\r\n     *\r\n     * @param locales A list with the new locales translation priority\r\n     *\r\n     * @return void\r\n     */\r\n    setLocalesOrder(locales) {\r\n        if (!ArrayUtils_1.ArrayUtils.isArray(locales)) {\r\n            throw new Error('locales must be an array');\r\n        }\r\n        if (locales.length !== this._locales.length) {\r\n            throw new Error('locales must contain all the currently loaded locales');\r\n        }\r\n        for (let locale of locales) {\r\n            if (!this.isLocaleLoaded(locale)) {\r\n                throw new Error(locale + ' not loaded');\r\n            }\r\n        }\r\n        this._locales = locales;\r\n        this._languages = this._locales.map(l => l.substr(0, 2));\r\n    }\r\n    /**\r\n     * Get the translation for the given key, bundle and location\r\n     *\r\n     * @param key The key we want to read from the specified resource bundle and path\r\n     * @param bundle The name for the resource bundle file. If not specified, the value\r\n     *        that was used on the inmediate previous call of this method will be used. This can save us lots of typing\r\n     *        if we are reading multiple consecutive keys from the same bundle.\r\n     * @param location In case we have multiple bundles with the same name on different locations, we can set this parameter with\r\n     *        the location label to uniquely reference the bundle and resolve the conflict. If all of our bundles have different\r\n     *        names, this parameter can be ignored. Just like the bundle parameter, this one is remembered between get() calls.\r\n     * @param toReplace A list of values that will replace the wildcards that are found on the translated text. Each wildcard\r\n     *        will be replaced with the element whose index on the list matches it. Check the documentation for this.wildCardsFormat\r\n     *        property to know more about how to setup wildcards.\r\n     *\r\n     * @returns The localized text\r\n     */\r\n    get(key, bundle = '', location = '', toReplace = []) {\r\n        if (!this._initialized) {\r\n            throw new Error('LocalizationManager not initialized. Call initialize() before requesting translated texts');\r\n        }\r\n        // If no location specified, use the active one\r\n        if (location === '') {\r\n            if (bundle !== '' && bundle !== this._activeBundle) {\r\n                this.setActiveBundle(bundle);\r\n            }\r\n            location = this._activeLocation;\r\n        }\r\n        // If no bundle is specified, the last one will be used\r\n        if (bundle === '') {\r\n            if (this.isBundleMandatory) {\r\n                throw new Error('bundle is mandatory for key ' + key);\r\n            }\r\n            bundle = this._activeBundle;\r\n        }\r\n        if (Object.keys(this._loadedTranslations).indexOf(location) === -1) {\r\n            throw new Error('Location <' + location + '> not loaded');\r\n        }\r\n        // Loop all the locales to find the first one with a value for the specified key\r\n        for (const locale of this._locales) {\r\n            if (Object.keys(this._loadedTranslations[location]).indexOf(locale) >= 0) {\r\n                if (Object.keys(this._loadedTranslations[location][locale]).indexOf(bundle) === -1) {\r\n                    throw new Error('Bundle <' + bundle + '> not loaded');\r\n                }\r\n                if (Object.keys(this._loadedTranslations[location][locale][bundle]).indexOf(key) >= 0) {\r\n                    // Store the specified bundle name and location as the lasts that have been used till now\r\n                    this._activeBundle = bundle;\r\n                    this._activeLocation = location;\r\n                    let result = this._loadedTranslations[location][locale][bundle][key];\r\n                    // Replace all wildcards on the text with the specified replacements if any\r\n                    let replacements = StringUtils_1.StringUtils.isString(toReplace) ? [String(toReplace)] : toReplace;\r\n                    for (let i = 0; i < replacements.length; i++) {\r\n                        result = StringUtils_1.StringUtils.replace(result, StringUtils_1.StringUtils.replace(this.wildCardsFormat, 'N', String(i)), replacements[i]);\r\n                    }\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n        if (this.missingKeyFormat.indexOf('$exception') >= 0) {\r\n            throw new Error('key <' + key + '> not found on ' + bundle + ' - ' + location);\r\n        }\r\n        return this.missingKeyFormat.replace('$key', key);\r\n    }\r\n    /**\r\n     * Get the translation for the given key and bundle as a string with all words first character capitalized\r\n     * and all the rest of the word with lower case\r\n     *\r\n     * @see LocalizationManager.get\r\n     * @see StringUtils.formatCase\r\n     *\r\n     * @returns The localized and case formatted text\r\n     */\r\n    getStartCase(key, bundle = '', location = '', toReplace = []) {\r\n        return StringUtils_1.StringUtils.formatCase(this.get(key, bundle, location, toReplace), StringUtils_1.StringUtils.FORMAT_START_CASE);\r\n    }\r\n    /**\r\n     * Get the translation for the given key and bundle as an all upper case string\r\n     *\r\n     * @see LocalizationManager.get\r\n     * @see StringUtils.formatCase\r\n     *\r\n     * @returns The localized and case formatted text\r\n     */\r\n    getAllUpperCase(key, bundle = '', location = '', toReplace = []) {\r\n        return StringUtils_1.StringUtils.formatCase(this.get(key, bundle, location, toReplace), StringUtils_1.StringUtils.FORMAT_ALL_UPPER_CASE);\r\n    }\r\n    /**\r\n     * Get the translation for the given key and bundle as an all lower case string\r\n     *\r\n     * @see LocalizationManager.get\r\n     * @see StringUtils.formatCase\r\n     *\r\n     * @returns The localized and case formatted text\r\n     */\r\n    getAllLowerCase(key, bundle = '', location = '', toReplace = []) {\r\n        return StringUtils_1.StringUtils.formatCase(this.get(key, bundle, location, toReplace), StringUtils_1.StringUtils.FORMAT_ALL_LOWER_CASE);\r\n    }\r\n    /**\r\n     * Get the translation for the given key and bundle as a string with the first character as Upper case\r\n     * and all the rest as lower case\r\n     *\r\n     * @see LocalizationManager.get\r\n     * @see StringUtils.formatCase\r\n     *\r\n     * @returns The localized and case formatted text\r\n     */\r\n    getFirstUpperRestLower(key, bundle = '', location = '', toReplace = []) {\r\n        return StringUtils_1.StringUtils.formatCase(this.get(key, bundle, location, toReplace), StringUtils_1.StringUtils.FORMAT_FIRST_UPPER_REST_LOWER);\r\n    }\r\n    /**\r\n     * Auxiliary method that can be overriden when extending this class to customize the parsing of Json formatted\r\n     * resource bundles\r\n     *\r\n     * @param jsonString An object with the read resourcebundle json string\r\n     */\r\n    parseJson(jsonString) {\r\n        return JSON.parse(jsonString);\r\n    }\r\n    /**\r\n     * Auxiliary method that can be overriden when extending this class to customize the parsing of Java properties\r\n     * formatted resource bundles\r\n     *\r\n     * @param propertiesString A string containing the read resourcebundle java properties format string\r\n     */\r\n    parseProperties(propertiesString) {\r\n        let result = {};\r\n        let javaPropertiesObject = new JavaPropertiesObject_1.JavaPropertiesObject(propertiesString);\r\n        for (let key of javaPropertiesObject.getKeys()) {\r\n            result[key] = javaPropertiesObject.get(key);\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.LocalizationManager = LocalizationManager;\r\n//# sourceMappingURL=LocalizationManager.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst ObjectUtils_1 = require(\"../utils/ObjectUtils\");\r\nconst ArrayUtils_1 = require(\"../utils/ArrayUtils\");\r\nconst StringUtils_1 = require(\"../utils/StringUtils\");\r\n/**\r\n * Model history management class\r\n *\r\n * @see constructor()\r\n */\r\nclass ModelHistoryManager {\r\n    /**\r\n     * This is a fully featured undo / redo manager.\r\n     * It works with any class but is normally used with those that contain your application model data.\r\n     *\r\n     * The first thing we need to do is to create a ModelHistoryManager and pass a model class instance which will be\r\n     * used as the starting point of the history management. We can redefine the starting point at any time by calling\r\n     * setInitialState() so if we need to perform some changes to the instance values, we can do it an mark it later as the\r\n     * initial state.\r\n     *\r\n     * After defining the initial state, we will be able to save snapshots to track the changes on the instance,\r\n     * and perform undo / redo operations at any time to restore the state to any of the previously saved snapshots.\r\n     *\r\n     * We can get the instance at the current time by using the 'get' property.\r\n     *\r\n     * @param instance An instance of the class model type to be used by the history manager as the starting point.\r\n     */\r\n    constructor(instance) {\r\n        /**\r\n         * Specifies the maximum amount of snapshots that will be saved.\r\n         * If we try to save a snapshot and there are more than the ones specified here, the oldest one\r\n         * will be deleted and the next will be defined as the initial state.\r\n         *\r\n         * Setting it to -1 (default) means infinite snapshots are possible.\r\n         *\r\n         * Basically this property configures the maximun number of 'undo' that are possible.\r\n         */\r\n        this.maxSnapshots = -1;\r\n        /**\r\n         * A list with all the model instances that have been saved as snapshots and the tag that was\r\n         * used to save them\r\n         */\r\n        this._snapshots = [];\r\n        this._currentState = instance;\r\n        this._initialState = ObjectUtils_1.ObjectUtils.clone(this._currentState);\r\n    }\r\n    /**\r\n     * Defines the current model state as the origin of the history management.\r\n     * This means the current moment is considered as the starting point, and the last possible\r\n     * undo operation will leave the model state as it was just when this method was called.\r\n     *\r\n     * Note that calling this method also cleans any possible saved snapshots or history. We can define it as a\r\n     * 'reset to the current moment' method and set it as the starting point.\r\n     */\r\n    setInitialState() {\r\n        this._initialState = ObjectUtils_1.ObjectUtils.clone(this._currentState);\r\n        this._snapshots = [];\r\n    }\r\n    /**\r\n     * The model class instance as it is right now\r\n     */\r\n    get get() {\r\n        return this._currentState;\r\n    }\r\n    /**\r\n     * Array containing all the snapshot tags that have been saved to the current\r\n     * moment. Each one of the array elements is a string containing the name that was assigned\r\n     * to the respective snapshot\r\n     */\r\n    get tags() {\r\n        return this._snapshots.map(snapshot => snapshot.tag);\r\n    }\r\n    /**\r\n     * Array containing all the snapshot states that have been saved to the current\r\n     * moment. Each one of the array elements is a model class instance containing all\r\n     * the information that was available at the moment of taking the snapshot\r\n     *\r\n     * WARNING !! - This value must be used only to read data. Any direct modification of\r\n     * the returned array will result in unwanted behaviours\r\n     */\r\n    get snapshots() {\r\n        return this._snapshots.map(snapshot => snapshot.state);\r\n    }\r\n    /**\r\n     * Obtain a list with all the snapshots that where saved under a specific tag or tags.\r\n     *\r\n     * Only the snapshots that match the given tag or tags will be returned, in the same order as they\r\n     * were saved.\r\n     *\r\n     * Each one of the array elements is a model class instance containing all\r\n     * the information that was available at the moment of taking the snapshot\r\n     *\r\n     * WARNING !! - This value must be used only to read data. Any direct modification of\r\n     * the returned array will result in unwanted behaviours\r\n     *\r\n     * @param tags A list with all the tags for which we want to obtain the related snapshots\r\n     */\r\n    getSnapshotsByTag(tags) {\r\n        const errorMessage = 'tags must be a non empty string array. To get the full list of snapshots, use the <snapshots> property';\r\n        if (!ArrayUtils_1.ArrayUtils.isArray(tags)) {\r\n            throw new Error(errorMessage);\r\n        }\r\n        if (tags.length <= 0) {\r\n            throw new Error(errorMessage);\r\n        }\r\n        let result = [];\r\n        for (var i = 0; i < this._snapshots.length; i++) {\r\n            if (tags.indexOf(this._snapshots[i].tag) >= 0) {\r\n                result.push(this._snapshots[i].state);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Save a copy of the current model class instance state so it can be retrieved later.\r\n     *\r\n     * @param tag A string we can use as 'label' or 'name' for the saved snapshot. This is useful if\r\n     * we later want to get a filtered list of snapshots\r\n     *\r\n     * @returns true if a snapshot was saved, false if no snapshot saved (model has not changed)\r\n     */\r\n    saveSnapshot(tag = '') {\r\n        if (!StringUtils_1.StringUtils.isString(tag)) {\r\n            throw new Error('tag must be a string');\r\n        }\r\n        // If current model state is the same as the latest snapshot and the tag we want to store\r\n        // is the same, a new copy won't be created\r\n        if (this._snapshots.length > 0 &&\r\n            this._snapshots[this._snapshots.length - 1].tag === tag &&\r\n            ObjectUtils_1.ObjectUtils.isEqualTo(this._currentState, this._snapshots[this._snapshots.length - 1].state)) {\r\n            return false;\r\n        }\r\n        // If we are at the initial state, snapshot won't also be saved\r\n        if (this._snapshots.length <= 0 &&\r\n            ObjectUtils_1.ObjectUtils.isEqualTo(this._currentState, this._initialState)) {\r\n            return false;\r\n        }\r\n        // If max undo limit is reached, remove first snapshot and set it as the initial state\r\n        if (this.maxSnapshots > 0 &&\r\n            this._snapshots.length >= this.maxSnapshots) {\r\n            let firstSnapshot = this._snapshots.shift();\r\n            this._initialState = firstSnapshot.state;\r\n        }\r\n        this._snapshots.push({\r\n            state: ObjectUtils_1.ObjectUtils.clone(this._currentState),\r\n            tag: tag\r\n        });\r\n        return true;\r\n    }\r\n    /**\r\n     * True if the current instance can be reverted to a previous state, false otherwise\r\n     */\r\n    get isUndoPossible() {\r\n        if (this._snapshots.length > 0 ||\r\n            !ObjectUtils_1.ObjectUtils.isEqualTo(this._currentState, this._initialState)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Revert the current model class state to the most recent of the saved snapshots or to the initial state\r\n     * if no snapshots are available.\r\n     *\r\n     * If current state is the same as the initial state, undo will do nothing\r\n     *\r\n     * @param tagsFilter Defines which tags we are looking for. If enpty list (default) , undo will be performed to the latest snapshot.\r\n     *        If a list of strings (tags) is provided, undo will be performed to the youngest snapshot that was saved with any\r\n     *        of the specified tags\r\n     *\r\n     * @returns True if the undo operation resulted in a current state change, false otherwise\r\n     */\r\n    undo(tagsFilter = []) {\r\n        // If there are no snapshots left and the current model state is different\r\n        // than the initial state, we will restore the initial state\r\n        if (this._snapshots.length === 0 &&\r\n            !ObjectUtils_1.ObjectUtils.isEqualTo(this._currentState, this._initialState)) {\r\n            this._currentState = ObjectUtils_1.ObjectUtils.clone(this._initialState);\r\n            return true;\r\n        }\r\n        // If any snapshot is available, check if we should restore it\r\n        if (this._snapshots.length > 0) {\r\n            let latestSnapshot = this._snapshots[this._snapshots.length - 1];\r\n            // If the current state is identical to the latest snapshot, or the latest\r\n            // snapshot tag is not on the tags filter list, we will discard the latest snapshot\r\n            // and call undo to check the next\r\n            if (ObjectUtils_1.ObjectUtils.isEqualTo(this._currentState, latestSnapshot.state) ||\r\n                (tagsFilter.length > 0 && tagsFilter.indexOf(latestSnapshot.tag) < 0)) {\r\n                this._snapshots.pop();\r\n                return this.undo(tagsFilter);\r\n            }\r\n            // Clone the latest snapshot to the current model state\r\n            this._currentState = ObjectUtils_1.ObjectUtils.clone(latestSnapshot.state);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Clear all the snapshots, and reset the model class instance to the initial state.\r\n     *\r\n     * This operation is definitive. After this method is called, all history and the current state\r\n     * will be lost forever. No redo will be possible\r\n     *\r\n     * @returns True if the current state changed, false otherwise\r\n     */\r\n    undoAll() {\r\n        if (this.isUndoPossible) {\r\n            this._currentState = ObjectUtils_1.ObjectUtils.clone(this._initialState);\r\n            this._snapshots = [];\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * TODO - This method must be designed\r\n     */\r\n    redo() {\r\n        // TODO\r\n        // It seems that Proxy feature of ES6 allows us to detect object chages\r\n        // so we will be able to disable the redo after current state is modified.\r\n        // http://blog.revathskumar.com/2016/02/es6-observe-change-in-object-using-proxy.html\r\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy\r\n    }\r\n}\r\nexports.ModelHistoryManager = ModelHistoryManager;\r\n//# sourceMappingURL=ModelHistoryManager.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst JavaPropertiesObject_1 = require(\"../model/JavaPropertiesObject\");\r\nconst ArrayUtils_1 = require(\"../utils/ArrayUtils\");\r\nconst ObjectUtils_1 = require(\"../utils/ObjectUtils\");\r\n/**\r\n * Contains methods that allow us to convert data from one complex data structure\r\n * format to another complex data structure format\r\n */\r\nclass SerializationManager {\r\n    constructor() {\r\n        /**\r\n         * When set to true, the structures that are passed as serialization sources must match the structures\r\n         * that are passed as serialization targets: All keys or properties that are defined on the serialization sources\r\n         * must exist on the serialization targets, otherwise an exception will be thrown\r\n         */\r\n        this.strictMode = true;\r\n    }\r\n    /**\r\n     * Generate a valid JSON string from a given class instance\r\n     *\r\n     * @param classInstance A class instance\r\n     *\r\n     * @returns A valid JSON string containing all the data on the provided class\r\n     */\r\n    classToJson(classInstance) {\r\n        return JSON.stringify(classInstance);\r\n    }\r\n    // TODO\r\n    classToObject() {\r\n        // TODO\r\n    }\r\n    /**\r\n     * Copy data from a HashMapObject instance to an arbitrary class instance which contains\r\n     * the same properties as the hashmap keys. Class property values will be set to the same value of the hash map key\r\n     *\r\n     * @param hashMap An object that contains data which is organized as a hash map. For example: An associative array or an object with key / value pairs\r\n     * @param classInstance A class instance that will be filled with all the values that are found on the hashmap (the instance is modified by this method and all values erased).\r\n     *\r\n     * @return The provided class instance with all its properties filled with the corresponding hashmap values\r\n     */\r\n    //    hashMapObjectToClass<T>(hashMap:HashMapObject, classInstance:T): T{\r\n    //\r\n    //        TODO - implement this and translate it to PHP\r\n    //        let keys = hashMap.getKeys(); \r\n    //        \r\n    //        for (let key of keys) {\r\n    //\r\n    //            if(property_exists($classInstance, $key)){\r\n    //\r\n    //                $classInstance->{$key} = $value;\r\n    //            }\r\n    //        }\r\n    //\r\n    //        return classInstance;\r\n    //    }\r\n    /**\r\n     * Convert a JavaPropertiesObject instance to a string that is valid so it can be saved to a .properties file.\r\n     *\r\n     * @param javaProperties An instance of a JavaPropertiesObject\r\n     *\r\n     * @return An ISO-8859-1 string containing valid properties data, ready to be stored as a .properties java format file.\r\n     */\r\n    javaPropertiesObjectToString(javaProperties) {\r\n        return javaProperties.toString();\r\n    }\r\n    /**\r\n     * Copy data from a json string to a class instance. All class properties will be filled with the values from the json\r\n     * For more information on how the conversion is performed, see this class objectToClass method\r\n     *\r\n     * @see SerializationUtils.objectToClass\r\n     *\r\n     * @param string A string containing valid json data\r\n     * @param classInstance A class instance that will be filled with all the json data (the instance is modified by this method and all values erased).\r\n     *\r\n     * @return The provided class instance with all its properties filled with the corresponding json values\r\n     */\r\n    jsonToClass(string, classInstance) {\r\n        return this.objectToClass(JSON.parse(string), classInstance);\r\n    }\r\n    /**\r\n     * Copy data from an object instance to a class instance. All class properties will be filled with the values\r\n     * from the object.\r\n     *\r\n     * If a property from the class instance contains a default value, it will be used as a reference to restrict\r\n     * the value type. If the same key on the object has a different type value, an exception will happen.\r\n     * Null values on the source object keys will leave the same destination class properties untouched.\r\n     *\r\n     * Typed arrays can be forced by setting a class property as an array with a single default item. That item type\r\n     * will be used as the reference for all the array values on the object property.\r\n     *\r\n     * @param object An object containing the source data to serialize\r\n     * @param classInstance An empty class instance that will be filled with all the values from the object\r\n     *\r\n     * @return The provided class instance with all its properties filled with the corresponding object values\r\n     */\r\n    objectToClass(object, classInstance) {\r\n        let objectKeys = ObjectUtils_1.ObjectUtils.getKeys(object);\r\n        let classInstanceName = classInstance.constructor.name;\r\n        let classInstanceKeys = ObjectUtils_1.ObjectUtils.getKeys(classInstance);\r\n        // On strict mode, verify that both objects have the same number of keys\r\n        if (this.strictMode && objectKeys.length !== classInstanceKeys.length) {\r\n            throw new Error(\"(strict mode): [\" + objectKeys.join(',') + \"] keys do not match \" + classInstanceName + \" props: [\" + classInstanceKeys.join(',') + \"]\");\r\n        }\r\n        // Loop all the received object keys and store each value on the respective class property\r\n        for (let key of objectKeys) {\r\n            // Check if key exists on class instance\r\n            if (!classInstance.hasOwnProperty(key)) {\r\n                if (this.strictMode) {\r\n                    throw new Error(\"(strict mode): <\" + key + \"> not found in \" + classInstanceName);\r\n                }\r\n                continue;\r\n            }\r\n            let value = object[key];\r\n            // A null key value will leave the property value untouched\r\n            if (value === null) {\r\n                continue;\r\n            }\r\n            // If property has an explicit null or undefined default value, any type is allowed.\r\n            if (classInstance[key] !== null && classInstance[key] !== undefined) {\r\n                let typeErrorMessage = '<' + classInstanceName + '.' + key + '> was ' + (typeof value) + ' but expected to be ';\r\n                if (ArrayUtils_1.ArrayUtils.isArray(classInstance[key])) {\r\n                    if (!ArrayUtils_1.ArrayUtils.isArray(value)) {\r\n                        throw new Error(typeErrorMessage + 'array');\r\n                    }\r\n                    if (classInstance[key].length > 0) {\r\n                        if (classInstance[key].length !== 1) {\r\n                            throw new Error('To define a typed list, <' + classInstanceName + '.' + key + '> must contain only 1 default typed element');\r\n                        }\r\n                        let defaultElement = classInstance[key][0];\r\n                        let isDefaultElementAClass = (ObjectUtils_1.ObjectUtils.isObject(defaultElement) && defaultElement.constructor.name !== 'Object');\r\n                        classInstance[key] = [];\r\n                        for (let o of value) {\r\n                            if (isDefaultElementAClass) {\r\n                                o = this.objectToClass(o, ObjectUtils_1.ObjectUtils.clone(defaultElement));\r\n                            }\r\n                            else {\r\n                                // Type of array elements must match the default value\r\n                                if (typeof o !== typeof defaultElement) {\r\n                                    throw new Error('<' + classInstanceName + '.' + key + '> is defined as array of ' + (typeof defaultElement) + ' but received ' + typeof o);\r\n                                }\r\n                            }\r\n                            classInstance[key].push(o);\r\n                        }\r\n                        continue;\r\n                    }\r\n                }\r\n                if (ObjectUtils_1.ObjectUtils.isObject(classInstance[key])) {\r\n                    if (!ObjectUtils_1.ObjectUtils.isObject(value)) {\r\n                        throw new Error(typeErrorMessage + classInstance[key].constructor.name);\r\n                    }\r\n                    if (classInstance[key].constructor.name !== 'Object') {\r\n                        value = this.objectToClass(value, classInstance[key]);\r\n                    }\r\n                }\r\n                // Type of both object key and class property must match\r\n                if (typeof classInstance[key] !== typeof value) {\r\n                    throw new Error(typeErrorMessage + typeof classInstance[key]);\r\n                }\r\n            }\r\n            classInstance[key] = value;\r\n        }\r\n        return classInstance;\r\n    }\r\n    /**\r\n     * Convert a string containing the contents of a Java properties file to a JavaPropertiesObject instance\r\n     * Note that the input string must be encoded with ISO-8859-1 and strictly follow the Java\r\n     * properties file format (Otherwise results may not be correct).\r\n     *\r\n     * @param string String containing the contents of a .properties Java file\r\n     *\r\n     * @return The properties format parsed as an object\r\n     */\r\n    stringToJavaPropertiesObject(string) {\r\n        return new JavaPropertiesObject_1.JavaPropertiesObject(string);\r\n    }\r\n}\r\nexports.SerializationManager = SerializationManager;\r\n//# sourceMappingURL=SerializationManager.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * A base class that can be extended to protect created objects from access/read to undefined properties, and all other defensive OOP best practices\r\n */\r\nclass BaseStrictClass {\r\n}\r\nexports.BaseStrictClass = BaseStrictClass;\r\n//# sourceMappingURL=BaseStrictClass.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst TableObject_1 = require(\"./TableObject\");\r\nconst StringUtils_1 = require(\"../utils/StringUtils\");\r\nconst ArrayUtils_1 = require(\"../utils/ArrayUtils\");\r\n/**\r\n * CSV data abstraction\r\n */\r\nclass CSVObject extends TableObject_1.TableObject {\r\n    /**\r\n     * CSVObject stores all the information for a CSV document and provides easy access to all the\r\n     * columns and values and allows us to operate with it's data easily.\r\n     *\r\n     * @param string A string containing valid csv data\r\n     * @param headers Specifies if the first row of the provided csv data contains the column names or not. It is important to correctly set this value to avoid invalid data\r\n     * @param delimiter The character that is used as the csv delimiter. ',' is set by default\r\n     * @param enclosure The character that is used to escape fields when special characters are found\r\n     *\r\n     * @return The constructed CSVObject\r\n     */\r\n    constructor(string = '', headers = false, delimiter = ',', enclosure = '\"') {\r\n        super();\r\n        /**\r\n         * True if the CSV data was loaded with headers enabled or false if not\r\n         */\r\n        this._hasHeaders = false;\r\n        if (!StringUtils_1.StringUtils.isString(string)) {\r\n            throw new Error('constructor expects a string value');\r\n        }\r\n        if (StringUtils_1.StringUtils.isEmpty(string)) {\r\n            return;\r\n        }\r\n        let currentRow = 0;\r\n        let currentColumn = 0;\r\n        let enclosureFound = false;\r\n        let fieldValue = '';\r\n        let stringLen = string.length;\r\n        for (let i = 0; i < stringLen; i++) {\r\n            let character = string.charAt(i);\r\n            if (character === delimiter && !enclosureFound) {\r\n                this._insertField(currentRow, currentColumn, fieldValue);\r\n                fieldValue = '';\r\n                currentColumn++;\r\n                continue;\r\n            }\r\n            if (character === enclosure) {\r\n                if (enclosureFound && string.substr(i + 1, 1) === enclosure) {\r\n                    fieldValue += character;\r\n                    i++;\r\n                }\r\n                else {\r\n                    enclosureFound = !enclosureFound;\r\n                    if (enclosureFound) {\r\n                        fieldValue = '';\r\n                    }\r\n                    else {\r\n                        i = this._findNextDelimiterIndex(string, i, delimiter, stringLen) - 1;\r\n                    }\r\n                }\r\n                continue;\r\n            }\r\n            if (character === \"\\r\" || character === \"\\n\") {\r\n                if (enclosureFound) {\r\n                    fieldValue += character;\r\n                }\r\n                else {\r\n                    if (currentColumn > 0) {\r\n                        this._insertField(currentRow, currentColumn, fieldValue);\r\n                        currentRow++;\r\n                        fieldValue = '';\r\n                        currentColumn = 0;\r\n                    }\r\n                }\r\n                if (character === \"\\r\" && string.substr(i + 1, 1) === \"\\n\") {\r\n                    if (enclosureFound) {\r\n                        fieldValue += \"\\n\";\r\n                    }\r\n                    i++;\r\n                }\r\n                continue;\r\n            }\r\n            fieldValue += character;\r\n        }\r\n        if (fieldValue != '' || currentColumn >= this._columnsCount) {\r\n            this._insertField(currentRow, currentColumn, fieldValue);\r\n        }\r\n        if (headers) {\r\n            this._defineHeaders();\r\n        }\r\n    }\r\n    /**\r\n     * Get the value contained at the specified csv cell\r\n     *\r\n     * @param row An integer containing the index for the row that we want to retrieve\r\n     * @param column An integer or a string containing the index or label for the column that we want to retrieve\r\n     *\r\n     * @return The value for the cell that is located at the specified row and column\r\n     */\r\n    getCell(row, column) {\r\n        let result = super.getCell(row, column);\r\n        return result === null ? '' : result;\r\n    }\r\n    /**\r\n     * Set the value for a csv cell\r\n     *\r\n     * @param row An integer containing the index for the row that we want to set\r\n     * @param column An integer or a string containing the index or label for the column that we want to set\r\n     * @param value The value we want to set to the specified cell. Only string values are allowed\r\n     *\r\n     * @see TableObject.setCell\r\n     *\r\n     * @return The assigned value after beign stored into the csv cell\r\n     */\r\n    setCell(row, column, value) {\r\n        if (!StringUtils_1.StringUtils.isString(value)) {\r\n            throw new Error('value must be a string');\r\n        }\r\n        return super.setCell(row, column, value);\r\n    }\r\n    /**\r\n     * Check if the provided value contains valid CSV information.\r\n     *\r\n     * @param value Object to test for valid CSV data. Accepted values are: Strings containing CSV data or CSVObject elements\r\n     *\r\n     * @return True if the received object represent valid CSV data. False otherwise.\r\n     */\r\n    static isCSV(value) {\r\n        try {\r\n            let c = new CSVObject(value);\r\n            return c.countCells() >= 0;\r\n        }\r\n        catch (e) {\r\n            try {\r\n                return (value !== null) && (value instanceof CSVObject);\r\n            }\r\n            catch (e) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Check if two provided CSV structures represent the same data\r\n     *\r\n     * @param csv A valid string or CSVObject to compare with the current one\r\n     *\r\n     * @return true if the two CSV elements are considered equal, false if not\r\n     */\r\n    isEqualTo(csv) {\r\n        let objectToCompare = null;\r\n        try {\r\n            objectToCompare = new CSVObject(csv, this._hasHeaders);\r\n        }\r\n        catch (e) {\r\n            try {\r\n                if (csv instanceof CSVObject) {\r\n                    objectToCompare = csv;\r\n                }\r\n            }\r\n            catch (e) {\r\n                // Nothing to do\r\n            }\r\n        }\r\n        if (objectToCompare == null) {\r\n            throw new Error('csv does not contain valid csv data');\r\n        }\r\n        let thisRows = this.countRows();\r\n        let thisColumns = this.countColumns();\r\n        if (this.countCells() === 0 && objectToCompare.countCells() === 0) {\r\n            return true;\r\n        }\r\n        if (this._hasHeaders && !ArrayUtils_1.ArrayUtils.isEqualTo(this.getColumnNames(), objectToCompare.getColumnNames())) {\r\n            return false;\r\n        }\r\n        if (thisRows !== objectToCompare.countRows() || thisColumns !== objectToCompare.countColumns()) {\r\n            return false;\r\n        }\r\n        for (let i = 0; i < thisRows; i++) {\r\n            for (let j = 0; j < thisColumns; j++) {\r\n                let thisCell = this.getCell(i, j);\r\n                if (thisCell === null) {\r\n                    thisCell = '';\r\n                }\r\n                let cellToCompare = objectToCompare.getCell(i, j);\r\n                if (cellToCompare === null) {\r\n                    cellToCompare = '';\r\n                }\r\n                if (thisCell !== cellToCompare) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Generate the textual representation for the csv data stored on this object.\r\n     * The output of this method is ready to be stored on a physical .csv file.\r\n     *\r\n     * @param delimiter The character that is used as the csv delimiter. ',' is set by default\r\n     * @param enclosure The character that is used to escape fields when special characters are found\r\n     *\r\n     * @return A valid csv string ready to be stored on a .csv file\r\n     */\r\n    toString(delimiter = ',', enclosure = '\"') {\r\n        let result = '';\r\n        if (this._hasHeaders) {\r\n            let row = [];\r\n            for (let columnValue of this.getColumnNames()) {\r\n                row.push(this._escapeField(columnValue, delimiter, enclosure));\r\n            }\r\n            result += row.join(delimiter) + \"\\r\\n\";\r\n        }\r\n        let rowsCount = this.countRows();\r\n        let columnsCount = this.countColumns();\r\n        for (let i = 0; i < rowsCount; i++) {\r\n            let row = [];\r\n            for (let j = 0; j < columnsCount; j++) {\r\n                let cell = '';\r\n                try {\r\n                    cell = this._escapeField(this._cells.get(i + '-' + j), delimiter, enclosure);\r\n                }\r\n                catch (e) {\r\n                    // Nothing necessary.\r\n                    // This try chatch is used only to improve performance over $this->_cells->isKey($i.'-'.$j)\r\n                }\r\n                row.push(cell);\r\n            }\r\n            result += row.join(delimiter) + \"\\r\\n\";\r\n        }\r\n        return rowsCount > 0 ? result.substring(0, result.length - 2) : result;\r\n    }\r\n    /**\r\n     * Auxiliary method that is used to add a new field to the table at the specified position\r\n     *\r\n     * @param currentRow The row where we want to add the field\r\n     * @param currentColumn The column where we want to add the field\r\n     * @param fieldValue The value we want to add to the field\r\n     *\r\n     * @return void\r\n     */\r\n    _insertField(currentRow, currentColumn, fieldValue) {\r\n        if (currentRow >= this._rowsCount) {\r\n            this._rowsCount++;\r\n        }\r\n        if (currentColumn >= this._columnsCount) {\r\n            this._columnsCount++;\r\n        }\r\n        this._cells.set(currentRow + '-' + currentColumn, fieldValue);\r\n    }\r\n    /**\r\n     * Auxiliary method to correctly format a csv field so it can be stored as a string\r\n     *\r\n     * @param field The field that has to be formatted\r\n     * @param delimiter The character that is used as the csv delimiter. ',' is set by default\r\n     * @param enclosure The character that is used to escape fields when special characters are found\r\n     *\r\n     * @return The field correctly scaped and ready to be stored on a string\r\n     */\r\n    _escapeField(field, delimiter, enclosure) {\r\n        if (field.indexOf(\"\\r\") >= 0 || field.indexOf(\"\\n\") >= 0 || field.indexOf(enclosure) >= 0 || field.indexOf(delimiter) >= 0) {\r\n            field = StringUtils_1.StringUtils.replace(field, [enclosure], [enclosure + enclosure]);\r\n            field = enclosure + field + enclosure;\r\n        }\r\n        return field;\r\n    }\r\n    /**\r\n     * Auxiliary method that looks for the next delimiter or newline characters on the csv string starting at the specified position.\r\n     *\r\n     * @param string The full csv string to search in.\r\n     * @param currentIndex The csv string starting point for the search\r\n     * @param delimiter The character that is used as the csv delimiter\r\n     *\r\n     * @return The index where the next delimiter or newline character is found\r\n     */\r\n    _findNextDelimiterIndex(string, currentIndex, delimiter, stringLen) {\r\n        for (let i = currentIndex + 1; i < stringLen; i++) {\r\n            let char = string.charAt(i);\r\n            if (char === delimiter || char === \"\\r\" || char === \"\\n\") {\r\n                return i;\r\n            }\r\n        }\r\n        return stringLen;\r\n    }\r\n    /**\r\n     * Auxiliary method to load the first csv row as the column names and avoid duplicate column names\r\n     *\r\n     * @return void\r\n     */\r\n    _defineHeaders() {\r\n        let columnNames = this.getRow(0);\r\n        if (ArrayUtils_1.ArrayUtils.hasDuplicateElements(columnNames)) {\r\n            let i = 0;\r\n            let result = [];\r\n            let duplicateColumnNames = ArrayUtils_1.ArrayUtils.getDuplicateElements(columnNames);\r\n            for (let columnName of columnNames) {\r\n                if (columnName === null || columnName === '') {\r\n                    i++;\r\n                    columnName = '(' + i + ')';\r\n                }\r\n                else {\r\n                    for (let duplicateColumnName of duplicateColumnNames) {\r\n                        if (columnName === duplicateColumnName) {\r\n                            i++;\r\n                            columnName = columnName + '(' + i + ')';\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                result.push(columnName);\r\n            }\r\n            this.setColumnNames(result);\r\n        }\r\n        else {\r\n            this.setColumnNames(columnNames);\r\n        }\r\n        this.removeRow(0);\r\n        this._hasHeaders = true;\r\n    }\r\n}\r\nexports.CSVObject = CSVObject;\r\n//# sourceMappingURL=CSVObject.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst StringUtils_1 = require(\"../utils/StringUtils\");\r\nconst NumericUtils_1 = require(\"../utils/NumericUtils\");\r\n/**\r\n * date and time format object abstraction based on ISO 8601 standard\r\n * TODO - This is a first implementation of this class which must be strictly tested and completed by taking the php version as a reference\r\n */\r\nclass DateTimeObject {\r\n    /**\r\n     * Object that represents a date and time value with timezone and its related operations.\r\n     *\r\n     * All the class methods are based and expect values that follow the ISO 8601 format, which is the international standard for the\r\n     * representation of dates and times. Any other date/time format will be considered as invalid.<br><br>\r\n     * Following is an example of a valid ISO 8601 dateTime value:<br><br>yyyy-mm-ddTHH:MM:SS.UUU+TT:TT<br><br>where:<br>\r\n     * - yyyy is a four digits year value<br>\r\n     * - mm is a two digits month value<br>\r\n     * - dd is a two digits day value<br>\r\n     * - HH is a two digits hour value<br>\r\n     * - MM is a two digits minutes value<br>\r\n     * - SS is a two digits seconds value<br>\r\n     * - UUU is an arbitrary number of digits decimal seconds fraction value<br>\r\n     * - +TT:TT is the timezone offset value, like +03:00\r\n     *\r\n     * IMPORTANT: It is highly recommended to always physically store your datetime values as UTC (aka 00 timezone offset).\r\n     * The local timezone offset should be applied only when showing the datetime values to the user. All the other date and time usages of your application\r\n     * should be performed with UTC values.\r\n     *\r\n     * @param dateTimeString A string containing a valid ISO 8601 date/time value that will be used to initialize this instance.\r\n     * If string is empty, the current system date/time WITH UTC TIMEZONE will be used. If string is incomplete, all missing parts will be filled\r\n     * with the lowest possible value. If timezone offset is missing, UTC will be used.\r\n     *\r\n     * @example '1996' Will create a DateTimeObject with the value '1996-01-01T00:00:00.000000+00:00' based on the UTC 00 timezone\r\n     * @example '1996-12' Will create a DateTimeObject with the value '1996-12-01T00:00:00.000000+00:00' based on the UTC 00 timezone\r\n     * @example This is a fully valid ISO 8601 string value: '2017-10-14T17:55:25.163583+02:00'\r\n     *\r\n     * @see https://es.wikipedia.org/wiki/ISO_8601\r\n     *\r\n     * @return The created instance\r\n     */\r\n    constructor(dateTimeString = '') {\r\n        /**\r\n         * String that defines the ISO 8601 format to be used internally when calling the format method on DateTime Php class.\r\n         */\r\n        //    private _iso8601FormatString = 'Y-m-d\\\\TH:i:s.uP';\r\n        /**\r\n         * The date and time values that are stored on this instance are saved as an ISO 8601 string\r\n         */\r\n        this._dateTimeString = '';\r\n        /**\r\n         * An exploded version of this instance _dateTimeString ISO string, that is used to improve performance when reading\r\n         * some of the date values\r\n         */\r\n        this._dateTimeStringExploded = [];\r\n        if (StringUtils_1.StringUtils.isEmpty(dateTimeString)) {\r\n            this._dateTimeStringExploded = this._explodeISO8601String((new Date()).toISOString());\r\n            return;\r\n        }\r\n        //\r\n        //        if(!DateTimeObject::isValidDateTime($dateTimeString)){\r\n        //\r\n        //            throw new UnexpectedValueException('Provided value is not a valid ISO 8601 date time format');\r\n        //        }\r\n        //\r\n        //        $v = this._explodeISO8601String($dateTimeString);\r\n        //\r\n        //        $string = $v[0].'-'.$v[1].'-'.$v[2].'T'.$v[3].':'.$v[4].':'.$v[5].'.'.$v[6].$v[7];\r\n        //\r\n        //        this._dateTimeString = (new DateTime($string, $v[7] === '' ? new DateTimeZone('UTC') : null))->format(this._iso8601FormatString);\r\n        //\r\n        this._dateTimeStringExploded = this._explodeISO8601String(this._dateTimeString);\r\n    }\r\n    /**\r\n     * DateTimeObject class operates only with ISO 8601 strings, which is the international standard for the representation of dates and times.\r\n     * Therefore, this method considers a dateTime string value to be valid only if it is a string that follows that standard or a DateTimeObject instance.\r\n     *\r\n     * @param dateTime A string containing a valid ISO 8601 date/time value or a valid DateTimeObject instance.\r\n     *\r\n     * @see DateTimeObject.constructor()\r\n     *\r\n     * @return true if the specified value is ISO 8601 or a DateTimeObject instance, false if value contains invalid information.\r\n     */\r\n    static isValidDateTime(dateTime) {\r\n        // Validate that is a string and ends only with alphanumeric values\r\n        if (StringUtils_1.StringUtils.isString(dateTime) && dateTime.substr(-1).match(/^[a-z0-9]+$/i)) {\r\n            let regex = /^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$/;\r\n            if (dateTime.match(regex)) {\r\n                // We must also validate that the day, month and year are a correct date value\r\n                let parsedDate = dateTime.split('-');\r\n                if (parsedDate.length >= 3) {\r\n                    let testDate = new Date(Number(parsedDate[0]), Number(parsedDate[1]), Number(parsedDate[2].substr(0, 2)));\r\n                    return (testDate.getMonth() + 1 === Number(parsedDate[1])) &&\r\n                        (testDate.getDate() === Number(parsedDate[2].substr(0, 2))) &&\r\n                        (testDate.getFullYear() === Number(parsedDate[0]));\r\n                }\r\n                else {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return typeof dateTime === typeof DateTimeObject;\r\n    }\r\n    /**\r\n     * Given two valid dateTime values, this method will check if they represent the same date and time value\r\n     *\r\n     * @param dateTime1 A valid ISO 8601 dateTime string or a DateTimeObject instance.\r\n     * @param dateTime2 A valid ISO 8601 dateTime string or a DateTimeObject instance.\r\n     *\r\n     * @see DateTimeObject.__constructor()\r\n     *\r\n     * @return True if the date and time values on both elements are the same\r\n     */\r\n    static isEqual(dateTime1, dateTime2) {\r\n        return DateTimeObject.compare(dateTime1, dateTime2) === 0;\r\n    }\r\n    /**\r\n     * Returns the month name from a numeric month value\r\n     *\r\n     * @param month A month number between 1 and 12\r\n     *\r\n     * @return the month name in english and with capital letters, like: JANUARY, FEBRUARY, ...\r\n     */\r\n    static getMonthName(month) {\r\n        if (!NumericUtils_1.NumericUtils.isNumeric(month) || month > 12 || month < 1) {\r\n            throw new Error('Provided value is not a valid month number between 1 and 12');\r\n        }\r\n        let months = ['JANUARY', 'FEBRUARY', 'MARCH', 'APRIL', 'MAY', 'JUNE', 'JULY', 'AUGUST', 'SEPTEMBER', 'OCTOBER', 'NOVEMBER', 'DECEMBER'];\r\n        return months[month - 1];\r\n    }\r\n    /**\r\n     * Get the english name representing the given numeric value of a week day (between 1 and 7), where\r\n     * Sunday is considered to be the first one: 1 = Sunday, 2 = Monday, 3 = Tuesday, etc ...\r\n     *\r\n     * @param day A day number between 1 and 7\r\n     *\r\n     * @return The day name in english and with capital letters, like for example: MONDAY, SATURDAY...\r\n     */\r\n    static getDayName(day) {\r\n        if (!NumericUtils_1.NumericUtils.isNumeric(day) || day > 7 || day < 1) {\r\n            throw new Error('Provided value is not a valid day number between 1 and 7');\r\n        }\r\n        let days = ['SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY'];\r\n        return days[day - 1];\r\n    }\r\n    /**\r\n     * Get the year based on current system date and timezone\r\n     *\r\n     * @return A numeric value representing the current year\r\n     */\r\n    static getCurrentYear() {\r\n        return (new Date()).getFullYear();\r\n    }\r\n    /**\r\n     * Get the month based on current system date and timezone as a numeric value from 1 to 12\r\n     *\r\n     * @return A value between 1 and 12\r\n     */\r\n    static getCurrentMonth() {\r\n        return (new Date()).getMonth() + 1;\r\n    }\r\n    /**\r\n     * Get the day based on current system date and timezone as a numeric value from 1 to 31\r\n     *\r\n     * @return The day of month as a value between 1 and 31\r\n     */\r\n    static getCurrentDay() {\r\n        return (new Date()).getDate();\r\n    }\r\n    /**\r\n     * Get the numeric day of week (between 1 and 7) based on current system time, where Sunday is considered\r\n     * to be the first one:<br>\r\n     * 1 = Sunday, 2 = Monday, 3 = Tuesday, etc ...\r\n     *\r\n     * @return A numeric value between 1 and 7  (where Sunday is 1, Monday is 2, ...)\r\n     */\r\n    static getCurrentDayOfWeek() {\r\n        //        return (int) ((new DateTime())->format('w') + 1);\r\n    }\r\n    /**\r\n     * Get the hour based on current system date and timezone as a numeric value from 0 to 23\r\n     *\r\n     * @return The hour as a value between 0 and 23\r\n     */\r\n    static getCurrentHour() {\r\n        return (new Date()).getHours();\r\n    }\r\n    /**\r\n     * Get the minute based on current system date and timezone as a numeric value from 0 to 59\r\n     *\r\n     * @return The minute as a value between 0 and 59\r\n     */\r\n    static getCurrentMinute() {\r\n        return (new Date()).getMinutes();\r\n    }\r\n    /**\r\n     * Get the seconds based on current system date and timezone as a numeric value from 0 to 59\r\n     *\r\n     * @return The seconds as a value between 0 and 59\r\n     */\r\n    static getCurrentSecond() {\r\n        return (new Date()).getSeconds();\r\n    }\r\n    /**\r\n     * Get the miliseconds based on current system date and timezone as a numeric value up to 3 digits\r\n     *\r\n     * @return The miliseconds as a value up to 3 digits\r\n     */\r\n    static getCurrentMiliSecond() {\r\n        return Math.round((new Date()).getMilliseconds() / 1000);\r\n    }\r\n    /**\r\n     * Get the microseconds based on current system date and timezone as a numeric value up to 6 digits\r\n     *\r\n     * @return The microseconds as a value up to 6 digits\r\n     */\r\n    static getCurrentMicroSecond() {\r\n        // TODO\r\n        // return (new Date()).getm->format('u');\r\n    }\r\n    /**\r\n     * Get the timezone offset based on current system date and timezone as a numeric value (in seconds)\r\n     *\r\n     * @return The timezone offset as a numeric value in seconds\r\n     */\r\n    static getCurrentTimeZoneOffset() {\r\n        return (new Date()).getTimezoneOffset();\r\n    }\r\n    /**\r\n     * This method compares two dateTime values and tells if they are exactly the same or\r\n     * which one represents a later time value than the other.\r\n     * Timezones from the specified dateTime values are taken into consideration for the comparison.\r\n     *\r\n     * @param dateTime1 A valid ISO 8601 dateTime value or a DateTimeObject instance.\r\n     * @param dateTime2 A valid ISO 8601 dateTime value or a DateTimeObject instance.\r\n     *\r\n     * @throws UnexpectedValueException\r\n     *\r\n     * @return 0 If the two dateTime values represent the exact same time, 1 if dateTime1 > dateTime2 or 2 if dateTime2 > dateTime1\r\n     */\r\n    static compare(dateTime1, dateTime2) {\r\n        if (DateTimeObject.isValidDateTime(dateTime1) && DateTimeObject.isValidDateTime(dateTime2)) {\r\n            if (StringUtils_1.StringUtils.isString(dateTime1)) {\r\n                dateTime1 = new DateTimeObject(dateTime1);\r\n            }\r\n            if (StringUtils_1.StringUtils.isString(dateTime2)) {\r\n                dateTime2 = new DateTimeObject(dateTime2);\r\n            }\r\n            dateTime1.setUTC();\r\n            dateTime2.setUTC();\r\n            let date1 = dateTime1.toString();\r\n            let date2 = dateTime2.toString();\r\n            if (date1 === date2) {\r\n                return 0;\r\n            }\r\n            let sortedDates = [date1, date2];\r\n            sortedDates.sort();\r\n            return (sortedDates[0] === date1) ? 2 : 1;\r\n        }\r\n        throw new Error('Provided value is not a valid ISO 8601 date time format');\r\n    }\r\n    /**\r\n     * Get this instance's defined year as a numeric value\r\n     *\r\n     * @return A 4 digits numeric value\r\n     */\r\n    getYear() {\r\n        return Number(this._dateTimeStringExploded[0]);\r\n    }\r\n    /**\r\n     * Get this instance's defined month as a numeric value from 1 to 12\r\n     *\r\n     * @return A value between 1 and 12\r\n     */\r\n    getMonth() {\r\n        return Number(this._dateTimeStringExploded[1]);\r\n    }\r\n    /**\r\n     * Get this instance's defined day as a numeric value from 1 to 31\r\n     *\r\n     * @return A value between 1 and 31\r\n     */\r\n    getDay() {\r\n        return Number(this._dateTimeStringExploded[2]);\r\n    }\r\n    /**\r\n     * Get this instance's defined day of week as a numeric value from 1 to 7, where Sunday is considered\r\n     * to be the first one:<br>\r\n     * 1 = Sunday, 2 = Monday, 3 = Tuesday, etc ...\r\n     *\r\n     * @return A numeric value between 1 and 7\r\n     */\r\n    getDayOfWeek() {\r\n        // TODO\r\n        //        let v = this._dateTimeStringExploded;\r\n        //\r\n        //        let dateTimeInstance = new DateTime();\r\n        //\r\n        //        $dateTimeInstance->setDate($v[0], $v[1], $v[2]);\r\n        //\r\n        //        return $dateTimeInstance->format('w') + 1;\r\n    }\r\n    /**\r\n     * Get this instance's defined hour as a numeric value from 0 to 23\r\n     *\r\n     * @return A value between 0 and 23\r\n     */\r\n    getHour() {\r\n        return Number(this._dateTimeStringExploded[3]);\r\n    }\r\n    /**\r\n     * Get this instance's defined minute as a numeric value from 0 to 59\r\n     *\r\n     * @return A value between 0 and 59\r\n     */\r\n    getMinute() {\r\n        return Number(this._dateTimeStringExploded[4]);\r\n    }\r\n    /**\r\n     * Get this instance's defined second as a numeric value from 0 to 59\r\n     *\r\n     * @return A value between 0 and 59\r\n     */\r\n    getSecond() {\r\n        return Number(this._dateTimeStringExploded[5]);\r\n    }\r\n    /**\r\n     * Get this instance's defined miliseconds as a numeric value up to 3 digit\r\n     *\r\n     * @return A value up to 3 digit\r\n     */\r\n    getMiliSecond() {\r\n        return Math.round(this.getMicroSecond() / 1000);\r\n    }\r\n    /**\r\n     * Get this instance's defined microseconds as a numeric value up to 6 digit\r\n     *\r\n     * @return A value up to 6 digit\r\n     */\r\n    getMicroSecond() {\r\n        return Number(this._dateTimeStringExploded[6]);\r\n    }\r\n    /**\r\n     * Get this instance's defined timezone offset as a numeric value (in seconds)\r\n     *\r\n     * @return The UTC timezone offset in seconds\r\n     */\r\n    getTimeZoneOffset() {\r\n        return (new Date(this._dateTimeString)).getTimezoneOffset();\r\n    }\r\n    /**\r\n     * Get the first day of month for the current dateTime value.\r\n     *\r\n     * @return A dateTime object representing the first day of month based on the current instance\r\n     */\r\n    getFirstDayOfMonth() {\r\n        // TODO\r\n        //        $dateTime = (new DateTime(this._dateTimeString))->format('Y-m-01\\\\TH:i:s.uP');\r\n        //\r\n        //        return new DateTimeObject($dateTime);\r\n    }\r\n    /**\r\n     * Get the last day of month for the current dateTime value.\r\n     *\r\n     * @return A dateTime object representing the last day of month based on the current instance\r\n     */\r\n    getLastDayOfMonth() {\r\n        // TODO\r\n        //        $dateTime = (new DateTime(this._dateTimeString))->format('Y-m-t\\\\TH:i:s.uP');\r\n        //\r\n        //        return new DateTimeObject($dateTime);\r\n    }\r\n    /**\r\n     * Convert the current instance date and time values to the specified timezone offset.\r\n     *\r\n     * @param offset One of the supported timezone names or an offset value (+0200, +05:00, -0300, -03:00, etc...)\r\n     *\r\n     * @return This object instance\r\n     */\r\n    //    setTimeZoneOffset(offset:string){\r\n    // TODO\r\n    //        $dateTime = new DateTime(this._dateTimeString);\r\n    //\r\n    //        $dateTime->setTimezone(new DateTimeZone($offset));\r\n    //\r\n    //        this._dateTimeString = $dateTime->format(this._iso8601FormatString);\r\n    //\r\n    //        this._dateTimeStringExploded = this._explodeISO8601String(this._dateTimeString);\r\n    //\r\n    //        return $this;\r\n    //    }\r\n    /**\r\n     * Convert the current instance date and time values to the local timezone offset.\r\n     *\r\n     * @return This object instance\r\n     */\r\n    setLocalTimeZone() {\r\n        // TODO\r\n        //        return this.setTimeZoneOffset(date_default_timezone_get());\r\n    }\r\n    /**\r\n     * Check if the current instance timezone is the UTC +00:00 value\r\n     *\r\n     * @return True if the instance timezone is UTC, false if not\r\n     */\r\n    isUTC() {\r\n        return this.getTimeZoneOffset() === 0;\r\n    }\r\n    /**\r\n     * Convert the current instance date and time values to the UTC zero timezone offset.\r\n     *\r\n     * @example If this instance contains a +02:00 timezone offset, after calling this method the offset will be +00:00 (date and time will be updated accordingly)\r\n     *\r\n     * @return This object instance\r\n     */\r\n    setUTC() {\r\n        // TODO\r\n        //        let dateTimeInstance = new Date(this._dateTimeString);\r\n        //        dateTimeInstance->setTimezone(new DateTimeZone('UTC'));\r\n        //\r\n        //        this._dateTimeString = $dateTimeInstance->format(this._iso8601FormatString);\r\n        this._dateTimeStringExploded = this._explodeISO8601String(this._dateTimeString);\r\n        return this;\r\n    }\r\n    /**\r\n     * Output the current dateTime instance data as a custom formatted string (by default a full ISO 8601 string).\r\n     *\r\n     * @param formatString A string containing the output format like 'd/m/Y' or 'm-d-y'\r\n     * where the following characters will be automatically replaced:<br><br>\r\n     * - Y with a four digit year value<br>\r\n     * - y with a one or two digit year value<br>\r\n     * - M with a two digit month value<br>\r\n     * - m with a one or two digit month value<br>\r\n     * - D with a two digit day value<br>\r\n     * - d with a one or two digit day value<br>\r\n     * - H with a two digit hour value<br>\r\n     * - h with a one or two digit hour value<br>\r\n     * - N with a two digit minutes value<br>\r\n     * - n with a one or two digit minutes value<br>\r\n     * - S with a two digit seconds value<br>\r\n     * - s with a one or two digit seconds value<br>\r\n     * - U with a 6 digit microseconds value<br>\r\n     * - u with a 3 digit miliseconds value<br>\r\n     * - Offset with the timezone offset value (including the + or - symbol)\r\n     *\r\n     * @return The dateTime with the specified format.\r\n     */\r\n    toString(formatString = 'Y-M-DTH:N:S.UOffset') {\r\n        let exploded = this._dateTimeStringExploded;\r\n        // Get the time zone offset\r\n        formatString = StringUtils_1.StringUtils.replace(formatString, 'Offset', exploded[7].substr(0));\r\n        // Get the year\r\n        formatString = StringUtils_1.StringUtils.replace(formatString, 'Y', exploded[0]);\r\n        formatString = StringUtils_1.StringUtils.replace(formatString, 'y', exploded[0].substr(2));\r\n        // Get the month\r\n        formatString = StringUtils_1.StringUtils.replace(formatString, 'M', exploded[1]);\r\n        formatString = StringUtils_1.StringUtils.replace(formatString, 'm', String(Number(exploded[1])));\r\n        // Get the day\r\n        formatString = StringUtils_1.StringUtils.replace(formatString, 'D', exploded[2]);\r\n        formatString = StringUtils_1.StringUtils.replace(formatString, 'd', String(Number(exploded[2])));\r\n        // Get the hour\r\n        formatString = StringUtils_1.StringUtils.replace(formatString, 'H', exploded[3]);\r\n        formatString = StringUtils_1.StringUtils.replace(formatString, 'h', String(Number(exploded[3])));\r\n        // Get the minute\r\n        formatString = StringUtils_1.StringUtils.replace(formatString, 'N', exploded[4]);\r\n        formatString = StringUtils_1.StringUtils.replace(formatString, 'n', String(Number(exploded[4])));\r\n        // Get the second\r\n        formatString = StringUtils_1.StringUtils.replace(formatString, 'S', exploded[5]);\r\n        formatString = StringUtils_1.StringUtils.replace(formatString, 's', String(Number(exploded[5])));\r\n        // Get the milisecond\r\n        formatString = StringUtils_1.StringUtils.replace(formatString, 'u', StringUtils_1.StringUtils.pad(String(Math.min(999, Math.round(Number(exploded[6]) / 1000))), 3, '0'));\r\n        // Get the microsecond\r\n        return StringUtils_1.StringUtils.replace(formatString, 'U', StringUtils_1.StringUtils.pad(exploded[6], 6, '0', 'RIGHT'));\r\n    }\r\n    /**\r\n     * Compares the current datetime instance value to the given one and tells if they\r\n     * are exactly the same or which one represents a later time value than the other.\r\n     * Timezones from the both dateTime values are taken into consideration for the comparison.\r\n     *\r\n     * @param dateTime A valid ISO 8601 dateTime value or a DateTimeObject instance.\r\n     *\r\n     * @throws Error\r\n     *\r\n     * @see DateTimeObject.compare\r\n     *\r\n     * @return 0 If the two dateTime values represent the exact same time, 1 if this instance > dateTime or 2 if dateTime > this instance\r\n     */\r\n    compareTo(dateTime) {\r\n        return DateTimeObject.compare(this, dateTime);\r\n    }\r\n    /**\r\n     * Check if the provided ISO 8601 dateTime value is identical to the date and time from this instance\r\n     *\r\n     * @param dateTime A valid ISO 8601 dateTime string or a DateTimeObject instance.\r\n     *\r\n     * @return True if both dateTime values are equivalent to the exact same date and time\r\n     */\r\n    isEqualTo(dateTime) {\r\n        return DateTimeObject.compare(this, dateTime) === 0;\r\n    }\r\n    /**\r\n     * Adds the specified amount of time to the given dateTime value\r\n     * TODO - This method currently only works with years, and PHPDoc is incomplete!\r\n     *\r\n     * @param value The numeric amount that will be added to this DateTimeObject instance\r\n     * @param type TODO - this paramenter description\r\n     *\r\n     * @return void\r\n     */\r\n    //    add(value: Number, type = 'minutes'){\r\n    // TODO - copy from php when finished there\r\n    //    }\r\n    /**\r\n     * TODO - this method depends on this.add for being finished\r\n     */\r\n    //    substract(value: Number, type = 'minutes'){\r\n    //        return this.add(-value, type);\r\n    //    }\r\n    /**\r\n     * Auxiliary method that is used to generate an array with all the values that are defined on an ISO 8601 string\r\n     *\r\n     * @param string A valid ISO 8601 string\r\n     *\r\n     * @return An array with all the date time values extracted\r\n     */\r\n    _explodeISO8601String(string) {\r\n        let result = ['', '01', '01', '00', '00', '00', '000000', ''];\r\n        if (string.substr(string.length - 1, 1).toLowerCase() === 'z') {\r\n            string = string.substr(0, string.length - 1) + '+00:00';\r\n        }\r\n        let splitted = string.split(/[+-.: TZ]/);\r\n        let i = 0;\r\n        while (splitted.length > 0 && i < 6) {\r\n            result[i] = splitted.shift();\r\n            i++;\r\n        }\r\n        let splittedCount = splitted.length;\r\n        if (splittedCount === 1 || splittedCount === 3) {\r\n            // NOTE: Javascript cannot provide microseconds, so we add three zeros here to correctly format it\r\n            result[6] = splitted.shift() + '000';\r\n        }\r\n        if (splittedCount === 2 || splittedCount === 3) {\r\n            result[7] = string.substr(string.length - 6, 1) + splitted[0] + ':' + splitted[1];\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.DateTimeObject = DateTimeObject;\r\n//# sourceMappingURL=DateTimeObject.js.map","\"use strict\";\r\n/**\r\n * TurboCommons is a general purpose and cross-language library that implements frequently used and generic software development tasks.\r\n *\r\n * Website : -> http://www.turbocommons.org\r\n * License : -> Licensed under the Apache License, Version 2.0. You may not use this file except in compliance with the License.\r\n * License Url : -> http://www.apache.org/licenses/LICENSE-2.0\r\n * CopyRight : -> Copyright 2015 Edertone Advanded Solutions (08211 Castellar del Valls, Barcelona). http://www.edertone.com\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst StringUtils_1 = require(\"./StringUtils\");\r\n/**\r\n * The most common conversion utilities to convert the data from a simple type to another one.<br>\r\n * To convert complex classes or structures, use SerializationUtils class.\r\n *\r\n * <pre><code>\r\n * This is a static class, so no instance needs to be created.\r\n * Usage example:\r\n *\r\n * var ns = org_turbocommons_utils;\r\n *\r\n * var result1 = ns.ConversionUtils.stringToBase64('hello');\r\n * var result2 = ns.ConversionUtils.base64ToString('somebase64text');\r\n * ...\r\n * </code></pre>\r\n */\r\nclass ConversionUtils {\r\n    /**\r\n     * Encode a string to base64 (Which contains only numbers, uppercase, lowercase, forward slash, plus and equal signs)\r\n     * Found at: http://www.webtoolkit.info/\r\n     *           http://www.webtoolkit.info/javascript-base64.html#.VO3gzjSG9AY\r\n     *\r\n     * @param {string} string The input string to be converted\r\n     * @returns {string} The input string as base 64\r\n     */\r\n    static stringToBase64(string) {\r\n        if (string === null || string === undefined) {\r\n            return '';\r\n        }\r\n        if (!StringUtils_1.StringUtils.isString(string)) {\r\n            throw new Error(\"ConversionUtils.stringToBase64: value is not a string\");\r\n        }\r\n        var keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\r\n        var chr1;\r\n        var chr2;\r\n        var chr3;\r\n        var enc1;\r\n        var enc2;\r\n        var enc3;\r\n        var enc4;\r\n        var output = '';\r\n        // Auxiliary method to encode a string as utf 8\r\n        function utf8Encode(string) {\r\n            var utftext = '';\r\n            string = string.replace(/\\r\\n/g, \"\\n\");\r\n            for (var n = 0; n < string.length; n++) {\r\n                var c = string.charCodeAt(n);\r\n                if (c < 128) {\r\n                    utftext += String.fromCharCode(c);\r\n                }\r\n                else if ((c > 127) && (c < 2048)) {\r\n                    utftext += String.fromCharCode((c >> 6) | 192);\r\n                    utftext += String.fromCharCode((c & 63) | 128);\r\n                }\r\n                else {\r\n                    utftext += String.fromCharCode((c >> 12) | 224);\r\n                    utftext += String.fromCharCode(((c >> 6) & 63) | 128);\r\n                    utftext += String.fromCharCode((c & 63) | 128);\r\n                }\r\n            }\r\n            return utftext;\r\n        }\r\n        string = utf8Encode(string);\r\n        var i = 0;\r\n        while (i < string.length) {\r\n            chr1 = string.charCodeAt(i++);\r\n            chr2 = string.charCodeAt(i++);\r\n            chr3 = string.charCodeAt(i++);\r\n            enc1 = chr1 >> 2;\r\n            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n            enc4 = chr3 & 63;\r\n            if (isNaN(chr2)) {\r\n                enc3 = enc4 = 64;\r\n            }\r\n            else if (isNaN(chr3)) {\r\n                enc4 = 64;\r\n            }\r\n            output = output + keyStr.charAt(enc1) + keyStr.charAt(enc2) + keyStr.charAt(enc3) + keyStr.charAt(enc4);\r\n        }\r\n        return output;\r\n    }\r\n    /**\r\n     * Decode a string from base64 (Which contains only numbers, uppercase, lowercase, forward slash, plus and equal signs)\r\n     * Found at: http://www.webtoolkit.info/\r\n     *           http://www.webtoolkit.info/javascript-base64.html#.VO3gzjSG9AY\r\n     *\r\n     * @param {string} string a base64 string\r\n     *\r\n     * @returns {string} The base64 decoded as its original string\r\n     */\r\n    static base64ToString(string) {\r\n        if (string === null || string === undefined) {\r\n            return '';\r\n        }\r\n        if (!StringUtils_1.StringUtils.isString(string)) {\r\n            throw new Error('ConversionUtils.stringToBase64: value is not a string');\r\n        }\r\n        var keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\r\n        var chr1;\r\n        var chr2;\r\n        var chr3;\r\n        var enc1;\r\n        var enc2;\r\n        var enc3;\r\n        var enc4;\r\n        var output = '';\r\n        var i = 0;\r\n        string = string.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\r\n        while (i < string.length) {\r\n            enc1 = keyStr.indexOf(string.charAt(i++));\r\n            enc2 = keyStr.indexOf(string.charAt(i++));\r\n            enc3 = keyStr.indexOf(string.charAt(i++));\r\n            enc4 = keyStr.indexOf(string.charAt(i++));\r\n            chr1 = (enc1 << 2) | (enc2 >> 4);\r\n            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n            chr3 = ((enc3 & 3) << 6) | enc4;\r\n            output = output + String.fromCharCode(chr1);\r\n            if (enc3 != 64) {\r\n                output = output + String.fromCharCode(chr2);\r\n            }\r\n            if (enc4 != 64) {\r\n                output = output + String.fromCharCode(chr3);\r\n            }\r\n        }\r\n        // Auxiliary method for utf8 decoding\r\n        function utf8Decode(utftext) {\r\n            var string = '';\r\n            var i = 0;\r\n            var c = 0;\r\n            var c2 = 0;\r\n            while (i < utftext.length) {\r\n                c = utftext.charCodeAt(i);\r\n                if (c < 128) {\r\n                    string += String.fromCharCode(c);\r\n                    i++;\r\n                }\r\n                else if ((c > 191) && (c < 224)) {\r\n                    c2 = utftext.charCodeAt(i + 1);\r\n                    string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\r\n                    i += 2;\r\n                }\r\n                else {\r\n                    c2 = utftext.charCodeAt(i + 1);\r\n                    var c3 = utftext.charCodeAt(i + 2);\r\n                    string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n                    i += 3;\r\n                }\r\n            }\r\n            return string;\r\n        }\r\n        return utf8Decode(output);\r\n    }\r\n}\r\nexports.ConversionUtils = ConversionUtils;\r\n//# sourceMappingURL=ConversionUtils.js.map"],"sourceRoot":""}